<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HEAD>
<TITLE>Blender to Ogre Exporter</TITLE>
<META NAME="description" CONTENT="Blender to Ogre Exporter Manual">
<META NAME="keywords" CONTENT="Ogre, Blender, Export">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">
<LINK TYPE="text/css" rel="stylesheet" href="style.css">
</HEAD>
<BODY LANG="" BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#0000FF" VLINK="#800080" ALINK="#FF0000">
<DIV>
<H1>Blender to Ogre Exporter</H1>
Blender is an open source 3D content creation suite for modeling, animation, rendering and video post production. The Blender to Ogre Exporter is a python script to run directly within blender. Currently it supports the export of 
<UL>
<LI>mesh objects with multiple materials, uv textures and blend modes,</LI>
<LI>armature keyframe animations.</LI>
</UL>
<H2>Installation</H2>
<P>
The script needs access to standard Python modules not shipped with Blender. Consult the Blender documentation at <A HREF="http://www.blender.org"> www.blender.org</A> how to incorporate Python with Blender.
</P>
<UL>
<LI>
Copy the script either into ".blender/scripts" or the user defined scripts directory.
</LI>
<LI>
In the "Scripts Window" run "Scripts -> Update Menus".
</LI>
</UL>
<H2>Basic Usage</H2>
<UL>
<LI>In the "3D View" select the objects you want to export.</LI>
<LI>In the "Scripts Window" run "Scripts -> Export -> Ogre XML".</LI>
<LI>Choose your export options.</LI>
<LI>Press the "Export" button.</LI>
</UL>
You will get a detailed log of the export process. Use the OgreXmlConverter to convert the generated XML files to binary .mesh and .skeleton files.
<P>
<DIV ID=exporter>
<IMG SRC="images/exporter.png" WIDTH="473" HEIGHT="394" />
<P>Screenshot of the exporter interface.</P>
</DIV>
<H3>Options</H3>
<DL COMPACT>
<DT>Export Textures</DT>
<DD>Export uv texture coordinates and texture names.</DD>
<DT>Export Armature</DT>
<DD>Export armatures and armature animations.</DD>
<DT>Export Armature as Mesh</DT>
<DD>Generate an animated extra mesh in the form of the skeleton.</DD>
<DT>Material File</DT>
<DD>The name of the material script file that will be generated.</DD>
<DT>Mesh Scale Factor</DT>
<DD>All meshs and bones are scaled on export by this factor.</DD>
<DT>RotX</DT>
<DD>Angle of an additional rotation around the x-axis of all objects on export. This rotation is applied first. The default value is -90 degrees. This maps Blender's default up-vector (z-direction) to Ogre's default up-vector (y-direction).</DD>
<DT>RotY</DT>
<DD>Angle of an additional rotation around the y-axis. This rotation is applied second, after RotX.</DD>
<DT>RotZ</DT>
<DD>Angle of an additional rotation around the z-axis. This rotation is applied third, after RotY.</DD>
<DT>Frs/Sec</DT>
<DD>The default animation speed in the export in terms of frames per second.<br>
From Blender version 2.33 on, this value is taken from the corresponding scene render buttons:
<P>
<IMG SRC="images/format.png" WIDTH="288" HEIGHT="203" />
</P>
Blender's format setting that affect the exported Ogre animation is marked green.</DD>
<DT>Animation settings of</DT>
<DD>Choose an object from the list of all objects selected for export. The animations that will be exported for that object are then displayed in the scroll area below. Each animation correspond to one line.</DD>
<DL>
<DT>Action name</DT>
<DD>The name of the Blender action.</DD>
<DT>Start frame (Sta:)</DT>
<DD>Start frame of the animation.</DD>
<DT>End frame (End:)</DT>
<DD>End frame of the animation.</DD>
<DT>Animation export name</DT>
<DD>The animation name in the exported Ogre file.</DD>
<DT>Delete</DT>
<DD>Removes the animation from export.</DD>
<DT>Add</DT>
<DD>Add another animation to be exported.</DD>
</DL>
<DT>Update</DT>
<DD>Updates the list of all objects selected for export from the currently selected objects in the "3D View". Also updates the list of possible actions, deletes animations for removed actions and sets default animations for new actions.</DD>
<DT>Path</DT>
<DD>All generated files of the exporter are written into this directory. Mesh files are named after the mesh object name in blender with suffix ".mesh.xml". Skeleton files are named after the armature object name in blender with suffix ".skeleton.xml".</DD>
<DT>Export</DT>
<DD>Export all objects in the list of objects selected for export.</DD>
<DT>Quit</DT>
<DD>Exit from the export script.</DD>
</DL>
<P>
The script loads and saves its options to a file named after the current .blend file with suffix ".ogre". You can disable this behaviour by changing the script variable KEEP_SETTINGS to 0.
</P>
</P>
<H2>Specifics</H2>
<H3>Mesh</H3>
<P>The script supports sticky and per face vertex uv coordinates, smoothed and non-smoothed normals. Each rectangle face is automatically converted into two triangle faces in the exported mesh.</P>
<P>The script does not support subdivision surface (SubSurf) options. To export a SubSurf object, you have to convert it into a Mesh object, "Object -> Convert Object Type... -> Mesh (keep original)".</P>
<P> The script does not support double sided faces (Double Sided/Two Sided). To make a face double sided, select the face in the "Edit Mode", duplicate it ("Mesh -> Duplicate", RMB) and flip the normals ("Mesh -> Normals -> Flip").</P>
<H3>Material</H3>
<P>
In contrast to Ogre, Blender treats material, uv texture and blend mode separately. Therefore, the name of the exported material consists of blender's material name (if any), the blend mode and the name of the texture file (if any). The parts of the name are separated with slashs. Only textures assigned in the "UV/Image Editor" will be exported. You don't need to assign a material to a mesh in order to export uv textures. The following mapping is done on export:
</P>
<H4>Material Specific</H4>
<TABLE>
<TR>
<TH>Blender</TH>
<TH>Ogre</TH>
</TR>
<TR>
<TD>Amb*Col</TD>
<TD>ambient R G B</TD>
</TR>
<TR>
<TD>Col</TD>
<TD>diffuse R G B</TD>
</TR>
<TR>
<TD>Spec*Spe, Hard</TD>
<TD>specular R G B, Shininess
</TD>
</TR>
<TR>
<TD>Emit*Col</TD>
<TD>emissive R G B</TD>
</TR>
<TR>
<TD>TexFace</TD>
<TD>disable ambient, diffuse, specular and emissive</TD>
</TR>
<TR>
<TD>Shadeless</TD>
<TD>lighting off</TD>
</TR>
<TR>
<TD>ZInvert</TD>
<TD>depth_func greater_equal</TD>
</TR>
<TR>
<TD>Shadow</TD>
<TD>receive_shadows on/off</TD>
</TR>
<TR>
<TD>No Mist</TD>
<TD>fog_override true</TD>
</TR>
<TR>
<TD>Env</TD>
<TD>depth_func always_fail</TD>
</TR>
</TABLE>
<P>
<IMG SRC="images/material.png" WIDTH="288" HEIGHT="203" />
</P>
<P>
<IMG SRC="images/shaders.png" WIDTH="288" HEIGHT="203" />
</P>
<P>
<IMG SRC="images/mirrortransp.png" WIDTH="288" HEIGHT="203" />
</P>
Blender's material settings that affect the exported Ogre material are marked green.
<H4>Face Specific</H4>
<TABLE> 
<TR>
<TH>Blender</TH>
<TH>Ogre</TH>
</TR>
<TR>
<TD>Textured</TD>
<TD>texture_unit { texture (image filename without path) }</TD>
</TR>
<TR>
<TD>Invisible</TD>
<TD>no export</TD>
</TR>
<TR>
<TD>Opaque Blend Mode</TD>
<TD>scene_blend one zero (Ogre default)</TD>
</TR>
<TR>
<TD>Additive Blend Mode</TD>
<TD>scene_blend add</TD>
</TR>
<TR>
<TD>Alpha Blend Mode</TD>
<TD>scene_blend alpha_blend</TD>
</TR>
</TABLE>
<P>
<IMG SRC="images/face.png" WIDTH="398" HEIGHT="310" />
</P>
Blender's face settings that affect the exported Ogre material are marked green.
<H3>Armature</H3>
<P>
You must have no more than four weighted bone assignments per mesh vertex. If you have more, the script will eliminate the lowest weighted assignments and renormalise the other weights. All vertices must be assigned to at least one bone.
</P>
<P>
Armature animations are exported based upon keyframe ranges and action names. Action ipos are associated with bones according to their names. Therefore make sure all bone names of all armature objects are unique. Also make sure that the name of an ipo of a bone contains the full bone name. You can choose any frame as start and end frame of an animation. The script will automatically insert keyframes at the start and end of the exported animation and reverse the exported animation if the end frame is lesser than the start frame. In order to export armature animations of a mesh you don't have to select the armature separately.
</P>
<P>
The script does not evaluate action constraints. To export an action with constraints you have to convert the constraint effects into ipo keys ("Action Editor -> Bake") and choose the baked action in the animation settings.
</P>
</DIV>
</BODY>
</HTML>
