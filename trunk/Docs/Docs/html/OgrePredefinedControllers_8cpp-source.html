<html>
<head>
<title>OGRE Documentation</title> <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"> 
<link type="text/css" rel="stylesheet" href="style.css">
</head>

<body>
<!-- Generated by Doxygen 1.2.16 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="namespaces.html">Namespace List</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="namespacemembers.html">Namespace Members</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; <a class="qindex" href="pages.html">Related Pages</a> &nbsp; </center>
<hr><h1>OgrePredefinedControllers.cpp</h1><a href="OgrePredefinedControllers_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <font class="comment">/*</font>
00002 <font class="comment">-----------------------------------------------------------------------------</font>
00003 <font class="comment">This source file is part of OGRE</font>
00004 <font class="comment">    (Object-oriented Graphics Rendering Engine)</font>
00005 <font class="comment">For the latest info, see http://www.stevestreeting.com/ogre/</font>
00006 <font class="comment"></font>
00007 <font class="comment">Copyright © 2000-2001 Steven J. Streeting</font>
00008 <font class="comment">Also see acknowledgements in Readme.html</font>
00009 <font class="comment"></font>
00010 <font class="comment">This program is free software; you can redistribute it and/or modify it under</font>
00011 <font class="comment">the terms of the GNU General Public License as published by the Free Software</font>
00012 <font class="comment">Foundation; either version 2 of the License, or (at your option) any later</font>
00013 <font class="comment">version.</font>
00014 <font class="comment"></font>
00015 <font class="comment">This program is distributed in the hope that it will be useful, but WITHOUT</font>
00016 <font class="comment">ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS</font>
00017 <font class="comment">FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.</font>
00018 <font class="comment"></font>
00019 <font class="comment">You should have received a copy of the GNU General Public License along with</font>
00020 <font class="comment">this program; if not, write to the Free Software Foundation, Inc., 59 Temple</font>
00021 <font class="comment">Place - Suite 330, Boston, MA 02111-1307, USA, or go to</font>
00022 <font class="comment">http://www.gnu.org/copyleft/gpl.html.</font>
00023 <font class="comment">-----------------------------------------------------------------------------</font>
00024 <font class="comment">*/</font>
00025 <font class="preprocessor">#include "<a class="code" href="OgrePredefinedControllers_8h.html">OgrePredefinedControllers.h</a>"</font>
00026 
00027 <font class="preprocessor">#include "<a class="code" href="OgreRoot_8h.html">OgreRoot.h</a>"</font>
00028 <font class="preprocessor">#include "<a class="code" href="OgreMath_8h.html">OgreMath.h</a>"</font>
00029 <font class="preprocessor">#include "<a class="code" href="OgreLogManager_8h.html">OgreLogManager.h</a>"</font>
00030 
00031 <font class="keyword">namespace </font>Ogre
00032 {
00033     <font class="comment">//-----------------------------------------------------------------------</font>
00034     <font class="comment">// FrameTimeControllerValue</font>
00035     <font class="comment">//-----------------------------------------------------------------------</font>
<a name="l00036"></a><a class="code" href="classOgre_1_1FrameTimeControllerValue.html#Ogre_1_1FrameTimeControllerValuea0">00036</a>     FrameTimeControllerValue::FrameTimeControllerValue()
00037     {
00038         <font class="comment">// Register self</font>
00039         Root::getSingleton().addFrameListener(<font class="keyword">this</font>);
00040         <a class="code" href="classOgre_1_1FrameTimeControllerValue.html#Ogre_1_1FrameTimeControllerValuen0">mFrameTime</a> = 0;
00041 
00042     }
00043     <font class="comment">//-----------------------------------------------------------------------</font>
<a name="l00044"></a><a class="code" href="classOgre_1_1FrameTimeControllerValue.html#Ogre_1_1FrameTimeControllerValuea2">00044</a>     <font class="keywordtype">bool</font> FrameTimeControllerValue::frameStarted(<font class="keyword">const</font> <a class="code" href="structOgre_1_1FrameEvent.html">FrameEvent</a> &amp;evt)
00045     {
00046         <font class="comment">// Save the time value</font>
00047         <a class="code" href="classOgre_1_1FrameTimeControllerValue.html#Ogre_1_1FrameTimeControllerValuen0">mFrameTime</a> = evt.<a class="code" href="structOgre_1_1FrameEvent.html#Ogre_1_1FrameEventm1">timeSinceLastFrame</a>;
00048         <font class="keywordflow">return</font> <font class="keyword">true</font>;
00049     }
00050     <font class="comment">//-----------------------------------------------------------------------</font>
<a name="l00051"></a><a class="code" href="classOgre_1_1FrameTimeControllerValue.html#Ogre_1_1FrameTimeControllerValuea1">00051</a>     <font class="keywordtype">bool</font> FrameTimeControllerValue::frameEnded(<font class="keyword">const</font> <a class="code" href="structOgre_1_1FrameEvent.html">FrameEvent</a> &amp;evt)
00052     {
00053         <font class="keywordflow">return</font> <font class="keyword">true</font>;
00054     }
00055     <font class="comment">//-----------------------------------------------------------------------</font>
<a name="l00056"></a><a class="code" href="classOgre_1_1FrameTimeControllerValue.html#Ogre_1_1FrameTimeControllerValuea3">00056</a>     <a class="code" href="namespaceOgre.html#a281">Real</a> FrameTimeControllerValue::getValue()
00057     {
00058         <font class="keywordflow">return</font> <a class="code" href="classOgre_1_1FrameTimeControllerValue.html#Ogre_1_1FrameTimeControllerValuen0">mFrameTime</a>;
00059     }
00060     <font class="comment">//-----------------------------------------------------------------------</font>
<a name="l00061"></a><a class="code" href="classOgre_1_1FrameTimeControllerValue.html#Ogre_1_1FrameTimeControllerValuea4">00061</a>     <font class="keywordtype">void</font> FrameTimeControllerValue::setValue(<a class="code" href="namespaceOgre.html#a281">Real</a> value)
00062     {
00063         <font class="comment">// Do nothing - value is set from frame listener</font>
00064     }
00065     <font class="comment">//-----------------------------------------------------------------------</font>
00066     <font class="comment">// TextureFrameControllerValue</font>
00067     <font class="comment">//-----------------------------------------------------------------------</font>
<a name="l00068"></a><a class="code" href="classOgre_1_1TextureFrameControllerValue.html#Ogre_1_1TextureFrameControllerValuea0">00068</a>     TextureFrameControllerValue::TextureFrameControllerValue(<a class="code" href="classOgre_1_1Material_1_1TextureLayer.html">Material::TextureLayer</a>* t)
00069     {
00070         <a class="code" href="classOgre_1_1TextureFrameControllerValue.html#Ogre_1_1TextureFrameControllerValuen0">mTextureLayer</a> = t;
00071     }
00072     <font class="comment">//-----------------------------------------------------------------------</font>
<a name="l00073"></a><a class="code" href="classOgre_1_1TextureFrameControllerValue.html#Ogre_1_1TextureFrameControllerValuea1">00073</a>     <a class="code" href="namespaceOgre.html#a281">Real</a> TextureFrameControllerValue::getValue(<font class="keywordtype">void</font>)
00074     {
00075         <font class="keywordtype">int</font> numFrames = <a class="code" href="classOgre_1_1TextureFrameControllerValue.html#Ogre_1_1TextureFrameControllerValuen0">mTextureLayer</a>-&gt;<a class="code" href="classOgre_1_1Material_1_1TextureLayer.html#Ogre_1_1Material_1_1TextureLayera15">getNumFrames</a>();
00076         <font class="keywordflow">return</font> (<a class="code" href="classOgre_1_1TextureFrameControllerValue.html#Ogre_1_1TextureFrameControllerValuen0">mTextureLayer</a>-&gt;<a class="code" href="classOgre_1_1Material_1_1TextureLayer.html#Ogre_1_1Material_1_1TextureLayera13">getCurrentFrame</a>() / numFrames);
00077     }
00078     <font class="comment">//-----------------------------------------------------------------------</font>
<a name="l00079"></a><a class="code" href="classOgre_1_1TextureFrameControllerValue.html#Ogre_1_1TextureFrameControllerValuea2">00079</a>     <font class="keywordtype">void</font> TextureFrameControllerValue::setValue(<a class="code" href="namespaceOgre.html#a281">Real</a> value)
00080     {
00081         <font class="keywordtype">int</font> numFrames = <a class="code" href="classOgre_1_1TextureFrameControllerValue.html#Ogre_1_1TextureFrameControllerValuen0">mTextureLayer</a>-&gt;<a class="code" href="classOgre_1_1Material_1_1TextureLayer.html#Ogre_1_1Material_1_1TextureLayera15">getNumFrames</a>();
00082         <a class="code" href="classOgre_1_1TextureFrameControllerValue.html#Ogre_1_1TextureFrameControllerValuen0">mTextureLayer</a>-&gt;<a class="code" href="classOgre_1_1Material_1_1TextureLayer.html#Ogre_1_1Material_1_1TextureLayera12">setCurrentFrame</a>((<font class="keywordtype">int</font>)(value * numFrames));
00083     }
00084     <font class="comment">//-----------------------------------------------------------------------</font>
00085     <font class="comment">// TexCoordModifierControllerValue</font>
00086     <font class="comment">//-----------------------------------------------------------------------</font>
<a name="l00087"></a><a class="code" href="classOgre_1_1TexCoordModifierControllerValue.html#Ogre_1_1TexCoordModifierControllerValuea0">00087</a>     TexCoordModifierControllerValue::TexCoordModifierControllerValue(<a class="code" href="classOgre_1_1Material_1_1TextureLayer.html">Material::TextureLayer</a>* t,
00088         <font class="keywordtype">bool</font> translateU, <font class="keywordtype">bool</font> translateV, <font class="keywordtype">bool</font> scaleU, <font class="keywordtype">bool</font> scaleV, <font class="keywordtype">bool</font> rotate )
00089     {
00090         <a class="code" href="classOgre_1_1TexCoordModifierControllerValue.html#Ogre_1_1TexCoordModifierControllerValuen5">mTextureLayer</a> = t;
00091         <a class="code" href="classOgre_1_1TexCoordModifierControllerValue.html#Ogre_1_1TexCoordModifierControllerValuen0">mTransU</a> = translateU;
00092         <a class="code" href="classOgre_1_1TexCoordModifierControllerValue.html#Ogre_1_1TexCoordModifierControllerValuen1">mTransV</a> = translateV;
00093         <a class="code" href="classOgre_1_1TexCoordModifierControllerValue.html#Ogre_1_1TexCoordModifierControllerValuen2">mScaleU</a> = scaleU;
00094         <a class="code" href="classOgre_1_1TexCoordModifierControllerValue.html#Ogre_1_1TexCoordModifierControllerValuen3">mScaleV</a> = scaleV;
00095         <a class="code" href="classOgre_1_1TexCoordModifierControllerValue.html#Ogre_1_1TexCoordModifierControllerValuen4">mRotate</a> = rotate;
00096     }
00097     <font class="comment">//-----------------------------------------------------------------------</font>
<a name="l00098"></a><a class="code" href="classOgre_1_1TexCoordModifierControllerValue.html#Ogre_1_1TexCoordModifierControllerValuea1">00098</a>     <a class="code" href="namespaceOgre.html#a281">Real</a> TexCoordModifierControllerValue::getValue()
00099     {
00100         <font class="keyword">const</font> <a class="code" href="classOgre_1_1Matrix4.html">Matrix4</a>&amp; pMat = <a class="code" href="classOgre_1_1TexCoordModifierControllerValue.html#Ogre_1_1TexCoordModifierControllerValuen5">mTextureLayer</a>-&gt;<a class="code" href="classOgre_1_1Material_1_1TextureLayer.html#Ogre_1_1Material_1_1TextureLayera21">getTextureTransform</a>();
00101         <font class="keywordflow">if</font> (mTransU)
00102         {
00103             <font class="keywordflow">return</font> pMat[0][3];
00104         }
00105         <font class="keywordflow">else</font> <font class="keywordflow">if</font> (mTransV)
00106         {
00107             <font class="keywordflow">return</font> pMat[1][3];
00108         }
00109         <font class="keywordflow">else</font> <font class="keywordflow">if</font> (mScaleU)
00110         {
00111             <font class="keywordflow">return</font> pMat[0][0];
00112         }
00113         <font class="keywordflow">else</font> <font class="keywordflow">if</font> (mScaleV)
00114         {
00115             <font class="keywordflow">return</font> pMat[1][1];
00116         }
00117         <font class="comment">// Shouldn't get here</font>
00118         <font class="keywordflow">return</font> 0;
00119     }
00120     <font class="comment">//-----------------------------------------------------------------------</font>
<a name="l00121"></a><a class="code" href="classOgre_1_1TexCoordModifierControllerValue.html#Ogre_1_1TexCoordModifierControllerValuea2">00121</a>     <font class="keywordtype">void</font> TexCoordModifierControllerValue::setValue(<a class="code" href="namespaceOgre.html#a281">Real</a> value)
00122     {
00123         <font class="keywordflow">if</font> (mTransU)
00124         {
00125             <a class="code" href="classOgre_1_1TexCoordModifierControllerValue.html#Ogre_1_1TexCoordModifierControllerValuen5">mTextureLayer</a>-&gt;<a class="code" href="classOgre_1_1Material_1_1TextureLayer.html#Ogre_1_1Material_1_1TextureLayera23">setTextureUScroll</a>(value);
00126         }
00127         <font class="keywordflow">if</font> (mTransV)
00128         {
00129             <a class="code" href="classOgre_1_1TexCoordModifierControllerValue.html#Ogre_1_1TexCoordModifierControllerValuen5">mTextureLayer</a>-&gt;<a class="code" href="classOgre_1_1Material_1_1TextureLayer.html#Ogre_1_1Material_1_1TextureLayera24">setTextureVScroll</a>(value);
00130         }
00131         <font class="keywordflow">if</font> (mScaleU)
00132         {
00133             <font class="keywordflow">if</font> (value &gt;= 0)
00134             {
00135                 <font class="comment">// Add 1 to scale (+ve scales up)</font>
00136                 <a class="code" href="classOgre_1_1TexCoordModifierControllerValue.html#Ogre_1_1TexCoordModifierControllerValuen5">mTextureLayer</a>-&gt;<a class="code" href="classOgre_1_1Material_1_1TextureLayer.html#Ogre_1_1Material_1_1TextureLayera25">setTextureUScale</a>(1 + value);
00137             }
00138             <font class="keywordflow">else</font>
00139             {
00140                 <font class="comment">// (-ve scales down)</font>
00141                 <a class="code" href="classOgre_1_1TexCoordModifierControllerValue.html#Ogre_1_1TexCoordModifierControllerValuen5">mTextureLayer</a>-&gt;<a class="code" href="classOgre_1_1Material_1_1TextureLayer.html#Ogre_1_1Material_1_1TextureLayera25">setTextureUScale</a>(1 / -value);
00142             }
00143         }
00144         <font class="keywordflow">if</font> (mScaleV)
00145         {
00146             <font class="keywordflow">if</font> (value &gt;= 0)
00147             {
00148                 <font class="comment">// Add 1 to scale (+ve scales up)</font>
00149                 <a class="code" href="classOgre_1_1TexCoordModifierControllerValue.html#Ogre_1_1TexCoordModifierControllerValuen5">mTextureLayer</a>-&gt;<a class="code" href="classOgre_1_1Material_1_1TextureLayer.html#Ogre_1_1Material_1_1TextureLayera26">setTextureVScale</a>(1 + value);
00150             }
00151             <font class="keywordflow">else</font>
00152             {
00153                 <font class="comment">// (-ve scales down)</font>
00154                 <a class="code" href="classOgre_1_1TexCoordModifierControllerValue.html#Ogre_1_1TexCoordModifierControllerValuen5">mTextureLayer</a>-&gt;<a class="code" href="classOgre_1_1Material_1_1TextureLayer.html#Ogre_1_1Material_1_1TextureLayera26">setTextureVScale</a>(1 / -value);
00155             }
00156         }
00157         <font class="keywordflow">if</font> (mRotate)
00158         {
00159             <a class="code" href="classOgre_1_1TexCoordModifierControllerValue.html#Ogre_1_1TexCoordModifierControllerValuen5">mTextureLayer</a>-&gt;<a class="code" href="classOgre_1_1Material_1_1TextureLayer.html#Ogre_1_1Material_1_1TextureLayera28">setTextureRotate</a>(value * 360);
00160         }
00161     }
00162     <font class="comment">//-----------------------------------------------------------------------</font>
00163     <font class="comment">// AnimationControllerFunction</font>
00164     <font class="comment">//-----------------------------------------------------------------------</font>
<a name="l00165"></a><a class="code" href="classOgre_1_1AnimationControllerFunction.html#Ogre_1_1AnimationControllerFunctiona0">00165</a>     AnimationControllerFunction::AnimationControllerFunction(<a class="code" href="namespaceOgre.html#a281">Real</a> sequenceTime, <a class="code" href="namespaceOgre.html#a281">Real</a> timeOffset) : <a class="code" href="classOgre_1_1ControllerFunction.html">ControllerFunction</a>(false)
00166     {
00167         <a class="code" href="classOgre_1_1AnimationControllerFunction.html#Ogre_1_1AnimationControllerFunctionn0">mSeqTime</a> = sequenceTime;
00168         <a class="code" href="classOgre_1_1AnimationControllerFunction.html#Ogre_1_1AnimationControllerFunctionn1">mTime</a> = timeOffset;
00169     }
00170     <font class="comment">//-----------------------------------------------------------------------</font>
<a name="l00171"></a><a class="code" href="classOgre_1_1AnimationControllerFunction.html#Ogre_1_1AnimationControllerFunctiona1">00171</a>     <a class="code" href="namespaceOgre.html#a281">Real</a> AnimationControllerFunction::calculate(<a class="code" href="namespaceOgre.html#a281">Real</a> source)
00172     {
00173         <font class="comment">// Assume source is time since last update</font>
00174         <a class="code" href="classOgre_1_1AnimationControllerFunction.html#Ogre_1_1AnimationControllerFunctionn1">mTime</a> += source;
00175         <font class="comment">// Wrap</font>
00176         <font class="keywordflow">while</font> (<a class="code" href="classOgre_1_1AnimationControllerFunction.html#Ogre_1_1AnimationControllerFunctionn1">mTime</a> &gt;= <a class="code" href="classOgre_1_1AnimationControllerFunction.html#Ogre_1_1AnimationControllerFunctionn0">mSeqTime</a>) <a class="code" href="classOgre_1_1AnimationControllerFunction.html#Ogre_1_1AnimationControllerFunctionn1">mTime</a> -= <a class="code" href="classOgre_1_1AnimationControllerFunction.html#Ogre_1_1AnimationControllerFunctionn0">mSeqTime</a>;
00177 
00178         <font class="comment">// Return parametric</font>
00179         <font class="keywordflow">return</font> <a class="code" href="classOgre_1_1AnimationControllerFunction.html#Ogre_1_1AnimationControllerFunctionn1">mTime</a> / <a class="code" href="classOgre_1_1AnimationControllerFunction.html#Ogre_1_1AnimationControllerFunctionn0">mSeqTime</a>;
00180     }
00181     <font class="comment">//-----------------------------------------------------------------------</font>
00182     <font class="comment">// ScaleControllerFunction</font>
00183     <font class="comment">//-----------------------------------------------------------------------</font>
<a name="l00184"></a><a class="code" href="classOgre_1_1ScaleControllerFunction.html#Ogre_1_1ScaleControllerFunctiona0">00184</a>     ScaleControllerFunction::ScaleControllerFunction(<a class="code" href="namespaceOgre.html#a281">Real</a> factor, <font class="keywordtype">bool</font> delta) : <a class="code" href="classOgre_1_1ControllerFunction.html">ControllerFunction</a>(delta)
00185     {
00186         <a class="code" href="classOgre_1_1ScaleControllerFunction.html#Ogre_1_1ScaleControllerFunctionn0">mScale</a> = factor;
00187     }
00188     <font class="comment">//-----------------------------------------------------------------------</font>
<a name="l00189"></a><a class="code" href="classOgre_1_1ScaleControllerFunction.html#Ogre_1_1ScaleControllerFunctiona1">00189</a>     <a class="code" href="namespaceOgre.html#a281">Real</a> ScaleControllerFunction::calculate(<a class="code" href="namespaceOgre.html#a281">Real</a> source)
00190     {
00191         <font class="keywordflow">return</font> <a class="code" href="classOgre_1_1ControllerFunction.html#Ogre_1_1WaveformControllerFunctionb0">getAdjustedInput</a>(source * <a class="code" href="classOgre_1_1ScaleControllerFunction.html#Ogre_1_1ScaleControllerFunctionn0">mScale</a>);
00192 
00193     }
00194     <font class="comment">//-----------------------------------------------------------------------</font>
00195     <font class="comment">// WaveformControllerFunction</font>
00196     <font class="comment">//-----------------------------------------------------------------------</font>
<a name="l00197"></a><a class="code" href="classOgre_1_1WaveformControllerFunction.html#Ogre_1_1WaveformControllerFunctiona0">00197</a>     WaveformControllerFunction::WaveformControllerFunction(<a class="code" href="namespaceOgre.html#a432">WaveformType</a> wType, <a class="code" href="namespaceOgre.html#a281">Real</a> base,  <a class="code" href="namespaceOgre.html#a281">Real</a> frequency, <a class="code" href="namespaceOgre.html#a281">Real</a> phase, <a class="code" href="namespaceOgre.html#a281">Real</a> amplitude, <font class="keywordtype">bool</font> delta)
00198         :<a class="code" href="classOgre_1_1ControllerFunction.html">ControllerFunction</a>(delta)
00199     {
00200         <a class="code" href="classOgre_1_1WaveformControllerFunction.html#Ogre_1_1WaveformControllerFunctionn0">mWaveType</a> = wType;
00201         <a class="code" href="classOgre_1_1WaveformControllerFunction.html#Ogre_1_1WaveformControllerFunctionn1">mBase</a> = base;
00202         <a class="code" href="classOgre_1_1WaveformControllerFunction.html#Ogre_1_1WaveformControllerFunctionn2">mFrequency</a> = frequency;
00203         <a class="code" href="classOgre_1_1WaveformControllerFunction.html#Ogre_1_1WaveformControllerFunctionn3">mPhase</a> = phase;
00204         <a class="code" href="classOgre_1_1WaveformControllerFunction.html#Ogre_1_1WaveformControllerFunctionn4">mAmplitude</a> = amplitude;
00205         <a class="code" href="classOgre_1_1ControllerFunction.html#Ogre_1_1WaveformControllerFunctionn6">mDeltaCount</a> = phase;
00206 
00207     }
00208     <font class="comment">//-----------------------------------------------------------------------</font>
<a name="l00209"></a><a class="code" href="classOgre_1_1WaveformControllerFunction.html#Ogre_1_1WaveformControllerFunctiona1">00209</a>     <a class="code" href="namespaceOgre.html#a281">Real</a> WaveformControllerFunction::calculate(<a class="code" href="namespaceOgre.html#a281">Real</a> source)
00210     {
00211         <a class="code" href="classOgre_1_1Math.html">Math</a>&amp; math = Math::getSingleton();
00212         <a class="code" href="namespaceOgre.html#a281">Real</a> input = <a class="code" href="classOgre_1_1ControllerFunction.html#Ogre_1_1WaveformControllerFunctionb0">getAdjustedInput</a>(source * <a class="code" href="classOgre_1_1WaveformControllerFunction.html#Ogre_1_1WaveformControllerFunctionn2">mFrequency</a>);
00213         <a class="code" href="namespaceOgre.html#a281">Real</a> output;
00214         <font class="comment">// For simplicity, factor input down to {0,1)</font>
00215         <font class="comment">// Use looped subtract rather than divide / round</font>
00216         <font class="keywordflow">while</font> (input &gt;= 1.0)
00217             input -= 1.0;
00218 
00219         <font class="comment">// Calculate output in -1..1 range</font>
00220         <font class="keywordflow">switch</font> (mWaveType)
00221         {
00222         <font class="keywordflow">case</font> <a class="code" href="namespaceOgre.html#a432a90">WFT_SINE</a>:
00223             output = math.<a class="code" href="classOgre_1_1Math.html#Ogre_1_1Mathd16">Sin</a>(input * Math::TWO_PI);
00224             <font class="keywordflow">break</font>;
00225         <font class="keywordflow">case</font> <a class="code" href="namespaceOgre.html#a432a91">WFT_TRIANGLE</a>:
00226             <font class="keywordflow">if</font> (input &lt; 0.25)
00227                 output = input * 4;
00228             <font class="keywordflow">else</font> <font class="keywordflow">if</font> (input &gt;= 0.25 &amp;&amp; input &lt; 0.75)
00229                 output = 1.0 - ((input - 0.25) * 4);
00230             <font class="keywordflow">else</font>
00231                 output = ((input - 0.75) * 4) - 1.0;
00232 
00233             <font class="keywordflow">break</font>;
00234         <font class="keywordflow">case</font> <a class="code" href="namespaceOgre.html#a432a92">WFT_SQUARE</a>:
00235             <font class="keywordflow">if</font> (input &lt;= 0.5)
00236                 output = 1.0;
00237             <font class="keywordflow">else</font>
00238                 output = -1.0;
00239             <font class="keywordflow">break</font>;
00240         <font class="keywordflow">case</font> <a class="code" href="namespaceOgre.html#a432a93">WFT_SAWTOOTH</a>:
00241             output = (input * 2) - 1;
00242             <font class="keywordflow">break</font>;
00243         <font class="keywordflow">case</font> <a class="code" href="namespaceOgre.html#a432a94">WFT_INVERSE_SAWTOOTH</a>:
00244             output = -((input * 2) - 1);
00245             <font class="keywordflow">break</font>;
00246         }
00247 
00248         <font class="comment">// Scale output into 0..1 range and then by base + amplitude</font>
00249         <font class="keywordflow">return</font> <a class="code" href="classOgre_1_1WaveformControllerFunction.html#Ogre_1_1WaveformControllerFunctionn1">mBase</a> + ((output + 1.0) * 0.5 * <a class="code" href="classOgre_1_1WaveformControllerFunction.html#Ogre_1_1WaveformControllerFunctionn4">mAmplitude</a>);
00250 
00251 
00252     }
00253 }
00254 
</pre></div><p>
Copyright &copy; 2002 by The OGRE Team<br />
<script type="text/javascript">
<!--//hide script from old browsers
document.write( "Last modified "+ document.lastModified );
//end hiding contents -->
</script>
</p>
</body>
</html>
