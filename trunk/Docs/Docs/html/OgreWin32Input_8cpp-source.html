<html>
<head>
<title>OGRE Documentation</title> <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"> 
<link type="text/css" rel="stylesheet" href="style.css">
</head>

<body>
<!-- Generated by Doxygen 1.2.16 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="namespaces.html">Namespace List</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="namespacemembers.html">Namespace Members</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; <a class="qindex" href="pages.html">Related Pages</a> &nbsp; </center>
<hr><h1>OgreWin32Input.cpp</h1><a href="OgreWin32Input_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <font class="comment">/*</font>
00002 <font class="comment">-----------------------------------------------------------------------------</font>
00003 <font class="comment">This source file is part of OGRE</font>
00004 <font class="comment">    (Object-oriented Graphics Rendering Engine)</font>
00005 <font class="comment">For the latest info, see http://www.stevestreeting.com/ogre/</font>
00006 <font class="comment"></font>
00007 <font class="comment">Copyright © 2000-2001 Steven J. Streeting</font>
00008 <font class="comment">Also see acknowledgements in Readme.html</font>
00009 <font class="comment"></font>
00010 <font class="comment">This program is free software; you can redistribute it and/or modify it under</font>
00011 <font class="comment">the terms of the GNU General Public License as published by the Free Software</font>
00012 <font class="comment">Foundation; either version 2 of the License, or (at your option) any later</font>
00013 <font class="comment">version.</font>
00014 <font class="comment"></font>
00015 <font class="comment">This program is distributed in the hope that it will be useful, but WITHOUT</font>
00016 <font class="comment">ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS</font>
00017 <font class="comment">FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.</font>
00018 <font class="comment"></font>
00019 <font class="comment">You should have received a copy of the GNU General Public License along with</font>
00020 <font class="comment">this program; if not, write to the Free Software Foundation, Inc., 59 Temple</font>
00021 <font class="comment">Place - Suite 330, Boston, MA 02111-1307, USA, or go to</font>
00022 <font class="comment">http://www.gnu.org/copyleft/gpl.html.</font>
00023 <font class="comment">-----------------------------------------------------------------------------</font>
00024 <font class="comment">*/</font>
00025 <font class="preprocessor">#include "<a class="code" href="OgreWin32Input_8h.html">OgreWin32Input.h</a>"</font>
00026 <font class="preprocessor">#include "<a class="code" href="OgreRenderWindow_8h.html">OgreRenderWindow.h</a>"</font>
00027 <font class="preprocessor">#include "<a class="code" href="OgreLogManager_8h.html">OgreLogManager.h</a>"</font>
00028 <font class="preprocessor">#include "<a class="code" href="OgreException_8h.html">OgreException.h</a>"</font>
00029 <font class="preprocessor">#include "<a class="code" href="OgreRoot_8h.html">OgreRoot.h</a>"</font>
00030 <font class="preprocessor">#include "<a class="code" href="OgreRenderSystem_8h.html">OgreRenderSystem.h</a>"</font>
00031 
<a name="l00032"></a><a class="code" href="OgreWin32Input_8cpp.html#a0">00032</a> <font class="preprocessor">#define DINPUT_BUFFERSIZE  16</font>
00033 <font class="preprocessor"></font>
00034 <font class="keyword">namespace </font>Ogre {
00035     <font class="comment">//-----------------------------------------------------------------------</font>
<a name="l00036"></a><a class="code" href="classOgre_1_1Win32Input.html#Ogre_1_1Win32Inputa0">00036</a>     Win32Input::Win32Input()
00037     {
00038         <a class="code" href="classOgre_1_1Win32Input.html#Ogre_1_1Win32Inputo0">mlpDI</a> = 0;
00039         <a class="code" href="classOgre_1_1Win32Input.html#Ogre_1_1Win32Inputo1">mlpDIKeyboard</a> = 0;
00040         <a class="code" href="classOgre_1_1Win32Input.html#Ogre_1_1Win32Inputo2">mlpDIMouse</a> = 0;
00041 
00042         memset(<a class="code" href="classOgre_1_1Win32Input.html#Ogre_1_1Win32Inputo4">mKeyboardBuffer</a>,0,256);
00043 
00044 
00045     }
00046     <font class="comment">//-----------------------------------------------------------------------</font>
<a name="l00047"></a><a class="code" href="classOgre_1_1Win32Input.html#Ogre_1_1Win32Inputa1">00047</a>     Win32Input::~Win32Input()
00048     {
00049         <font class="comment">// Shutdown</font>
00050         <font class="keywordflow">if</font> (mlpDIKeyboard)
00051         {
00052             <a class="code" href="classOgre_1_1Win32Input.html#Ogre_1_1Win32Inputo1">mlpDIKeyboard</a>-&gt;Unacquire();
00053             <a class="code" href="classOgre_1_1Win32Input.html#Ogre_1_1Win32Inputo1">mlpDIKeyboard</a>-&gt;Release();
00054             <a class="code" href="classOgre_1_1Win32Input.html#Ogre_1_1Win32Inputo1">mlpDIKeyboard</a> = 0;
00055         }
00056         <font class="keywordflow">if</font> (mlpDIMouse)
00057         {
00058             <a class="code" href="classOgre_1_1Win32Input.html#Ogre_1_1Win32Inputo2">mlpDIMouse</a>-&gt;Unacquire();
00059             <a class="code" href="classOgre_1_1Win32Input.html#Ogre_1_1Win32Inputo2">mlpDIMouse</a>-&gt;Release();
00060             <a class="code" href="classOgre_1_1Win32Input.html#Ogre_1_1Win32Inputo2">mlpDIMouse</a> = 0;
00061         }
00062         <font class="keywordflow">if</font> (mlpDI)
00063         {
00064             <a class="code" href="classOgre_1_1Win32Input.html#Ogre_1_1Win32Inputo0">mlpDI</a>-&gt;Release();
00065             <a class="code" href="classOgre_1_1Win32Input.html#Ogre_1_1Win32Inputo0">mlpDI</a> = 0;
00066         }
00067 
00068     }
00069 
00070     <font class="comment">//-----------------------------------------------------------------------</font>
<a name="l00071"></a><a class="code" href="classOgre_1_1Win32Input.html#Ogre_1_1Win32Inputa2">00071</a>     <font class="keywordtype">void</font> Win32Input::initialise(<a class="code" href="classOgre_1_1RenderWindow.html">RenderWindow</a>* pWindow, <font class="keywordtype">bool</font> useKeyboard, <font class="keywordtype">bool</font> useMouse, <font class="keywordtype">bool</font> useGameController)
00072     {
00073         HRESULT hr;
00074 
00075         LogManager::getSingleton().logMessage(<font class="stringliteral">"Win32Input: DirectInput Activation Starts"</font>);
00076 
00077         <font class="comment">// Get HINST</font>
00078         HINSTANCE hInst = GetModuleHandle(<font class="stringliteral">"OgrePlatform.dll"</font>);
00079 
00080 
00081         <font class="comment">// Get HWND</font>
00082         HWND hWnd;
00083         <font class="comment">//pWindow-&gt;getCustomAttribute("HWND", &amp;hWnd);</font>
00084         <font class="comment">// Decouple from Win32Window</font>
00085         hWnd = GetActiveWindow();
00086 
00087         <a class="code" href="classOgre_1_1Win32Input.html#Ogre_1_1Win32Inputo3">mHWnd</a> = hWnd;
00088         RECT rect;
00089         GetClientRect(<a class="code" href="classOgre_1_1Win32Input.html#Ogre_1_1Win32Inputo3">mHWnd</a>, &amp;rect);
00090         <a class="code" href="classOgre_1_1Win32Input.html#Ogre_1_1Win32Inputo7">mMouseCenterX</a> = (rect.right - rect.left) / 2;
00091         <a class="code" href="classOgre_1_1Win32Input.html#Ogre_1_1Win32Inputo8">mMouseCenterY</a> = (rect.bottom - rect.top) / 2;
00092         POINT p;
00093         p.x = <a class="code" href="classOgre_1_1Win32Input.html#Ogre_1_1Win32Inputo7">mMouseCenterX</a>;
00094         p.y = <a class="code" href="classOgre_1_1Win32Input.html#Ogre_1_1Win32Inputo8">mMouseCenterY</a>;
00095         ClientToScreen(<a class="code" href="classOgre_1_1Win32Input.html#Ogre_1_1Win32Inputo3">mHWnd</a>, &amp;p);
00096         SetCursorPos(p.x, p.y);
00097         <font class="comment">// hide cursor</font>
00098         ShowCursor(FALSE);
00099 
00100 
00101 
00102         <font class="comment">// Create direct input</font>
00103         hr = DirectInputCreateEx(hInst, DIRECTINPUT_VERSION,
00104             IID_IDirectInput7, (<font class="keywordtype">void</font>**)&amp;<a class="code" href="classOgre_1_1Win32Input.html#Ogre_1_1Win32Inputo0">mlpDI</a>, NULL);
00105 
00106         <font class="keywordflow">if</font> (FAILED(hr))
00107             <font class="keywordflow">throw</font> <a class="code" href="classOgre_1_1Exception.html">Exception</a>(hr, <font class="stringliteral">"Unable to initialise DirectInput."</font>,
00108                 <font class="stringliteral">"Win32Input - initialise"</font>);
00109 
00110         <font class="keywordflow">if</font> (useKeyboard)
00111         {
00112             LogManager::getSingleton().logMessage(<font class="stringliteral">"Win32Input: Establishing keyboard input."</font>);
00113 
00114             <font class="comment">// Create keyboard device</font>
00115             hr = <a class="code" href="classOgre_1_1Win32Input.html#Ogre_1_1Win32Inputo0">mlpDI</a>-&gt;CreateDeviceEx(GUID_SysKeyboard, IID_IDirectInputDevice7,
00116                 (<font class="keywordtype">void</font>**)&amp;<a class="code" href="classOgre_1_1Win32Input.html#Ogre_1_1Win32Inputo1">mlpDIKeyboard</a>, NULL);
00117 
00118 
00119             <font class="keywordflow">if</font> (FAILED(hr))
00120                 <font class="keywordflow">throw</font> <a class="code" href="classOgre_1_1Exception.html">Exception</a>(hr, <font class="stringliteral">"Unable to create DirectInput keyboard device."</font>,
00121                     <font class="stringliteral">"Win32Input - initialise"</font>);
00122 
00123             <font class="comment">// Set data format</font>
00124             hr = <a class="code" href="classOgre_1_1Win32Input.html#Ogre_1_1Win32Inputo1">mlpDIKeyboard</a>-&gt;SetDataFormat(&amp;c_dfDIKeyboard);
00125             <font class="keywordflow">if</font> (FAILED(hr))
00126                 <font class="keywordflow">throw</font> <a class="code" href="classOgre_1_1Exception.html">Exception</a>(hr, <font class="stringliteral">"Unable to set DirectInput keyboard device data format."</font>,
00127                     <font class="stringliteral">"Win32Input - initialise"</font>);
00128 
00129             <font class="comment">// Make the window grab keyboard behaviour when foreground</font>
00130             <font class="comment">// NB Keyboard is never exclusive</font>
00131             hr = <a class="code" href="classOgre_1_1Win32Input.html#Ogre_1_1Win32Inputo1">mlpDIKeyboard</a>-&gt;SetCooperativeLevel(hWnd,
00132                        DISCL_BACKGROUND | DISCL_NONEXCLUSIVE);
00133             <font class="keywordflow">if</font> (FAILED(hr))
00134                 <font class="keywordflow">throw</font> <a class="code" href="classOgre_1_1Exception.html">Exception</a>(hr, <font class="stringliteral">"Unable to set DirectInput keyboard device co-operative level."</font>,
00135                     <font class="stringliteral">"Win32Input - initialise"</font>);
00136 
00137 
00138             <font class="comment">// Acquire input</font>
00139             hr = <a class="code" href="classOgre_1_1Win32Input.html#Ogre_1_1Win32Inputo1">mlpDIKeyboard</a>-&gt;Acquire();
00140             <font class="keywordflow">if</font> (FAILED(hr))
00141                 <font class="keywordflow">throw</font> <a class="code" href="classOgre_1_1Exception.html">Exception</a>(hr, <font class="stringliteral">"Unable to set aquire DirectInput keyboard device."</font>,
00142                     <font class="stringliteral">"Win32Input - initialise"</font>);
00143 
00144             LogManager::getSingleton().logMessage(<font class="stringliteral">"Win32Input: Keyboard input established."</font>);
00145         }
00146         <font class="keywordflow">if</font> (useMouse)
00147         {
00148             <font class="comment">/* don't use DI</font>
00149 <font class="comment">            LogManager::getSingleton().logMessage("Win32Input: Establishing mouse input.");</font>
00150 <font class="comment"></font>
00151 <font class="comment">            // Create mouse device</font>
00152 <font class="comment">            hr = mlpDI-&gt;CreateDeviceEx(GUID_SysMouse, IID_IDirectInputDevice7,</font>
00153 <font class="comment">                (void**)&amp;mlpDIMouse, NULL);</font>
00154 <font class="comment"></font>
00155 <font class="comment"></font>
00156 <font class="comment">            if (FAILED(hr))</font>
00157 <font class="comment">                throw Exception(hr, "Unable to create DirectInput mouse device.",</font>
00158 <font class="comment">                    "Win32Input - initialise");</font>
00159 <font class="comment"></font>
00160 <font class="comment">            // Set data format</font>
00161 <font class="comment">            hr = mlpDIMouse-&gt;SetDataFormat(&amp;c_dfDIMouse);</font>
00162 <font class="comment">            if (FAILED(hr))</font>
00163 <font class="comment">                throw Exception(hr, "Unable to set DirectInput mouse device data format.",</font>
00164 <font class="comment">                    "Win32Input - initialise");</font>
00165 <font class="comment"></font>
00166 <font class="comment">            // Make the window grab mouse behaviour when foreground</font>
00167 <font class="comment">            hr = mlpDIMouse-&gt;SetCooperativeLevel(hWnd,</font>
00168 <font class="comment">                       DISCL_BACKGROUND | DISCL_NONEXCLUSIVE);</font>
00169 <font class="comment">            if (FAILED(hr))</font>
00170 <font class="comment">                throw Exception(hr, "Unable to set DirectInput mouse device co-operative level.",</font>
00171 <font class="comment">                    "Win32Input - initialise");</font>
00172 <font class="comment"></font>
00173 <font class="comment">            // Acquire input</font>
00174 <font class="comment">            hr = mlpDIKeyboard-&gt;Acquire();</font>
00175 <font class="comment">            if (FAILED(hr))</font>
00176 <font class="comment">                throw Exception(hr, "Unable to set aquire DirectInput mouse device.",</font>
00177 <font class="comment">                    "Win32Input - initialise");</font>
00178 <font class="comment"></font>
00179 <font class="comment">            LogManager::getSingleton().logMessage("Win32Input: Mouse input established.");</font>
00180 <font class="comment">            */</font>
00181 
00182         }
00183 
00184 
00185         LogManager::getSingleton().logMessage(<font class="stringliteral">"Win32Input: DirectInput OK."</font>);
00186 
00187     }
00188 
00189     <font class="comment">//-----------------------------------------------------------------------</font>
<a name="l00190"></a><a class="code" href="classOgre_1_1Win32Input.html#Ogre_1_1Win32Inputa3">00190</a>     <font class="keywordtype">void</font> Win32Input::capture(<font class="keywordtype">void</font>)
00191     {
00192 
00193         HRESULT  hr;
00194 
00195         <font class="comment">// Get keyboard state</font>
00196         hr = <a class="code" href="classOgre_1_1Win32Input.html#Ogre_1_1Win32Inputo1">mlpDIKeyboard</a>-&gt;GetDeviceState(256,(LPVOID)&amp;<a class="code" href="classOgre_1_1Win32Input.html#Ogre_1_1Win32Inputo4">mKeyboardBuffer</a>);
00197         <font class="keywordflow">if</font> (hr == DIERR_INPUTLOST || hr == DIERR_NOTACQUIRED)
00198         {
00199             hr = <a class="code" href="classOgre_1_1Win32Input.html#Ogre_1_1Win32Inputo1">mlpDIKeyboard</a>-&gt;Acquire();
00200             <font class="keywordflow">if</font> (hr == DIERR_OTHERAPPHASPRIO)
00201             {
00202                 hr = 0;
00203             }
00204             <font class="keywordflow">else</font>
00205             {
00206                 hr = <a class="code" href="classOgre_1_1Win32Input.html#Ogre_1_1Win32Inputo1">mlpDIKeyboard</a>-&gt;GetDeviceState(256,(LPVOID)&amp;<a class="code" href="classOgre_1_1Win32Input.html#Ogre_1_1Win32Inputo4">mKeyboardBuffer</a>);
00207             }
00208         }
00209         <font class="keywordflow">else</font> <font class="keywordflow">if</font> (hr == DIERR_OTHERAPPHASPRIO)
00210         {
00211             <font class="comment">// We've gone into the background - ignore</font>
00212             hr = 0;
00213         }
00214         <font class="keywordflow">else</font> <font class="keywordflow">if</font> (hr == DIERR_NOTINITIALIZED)
00215         {
00216             hr = 0;
00217         }
00218         <font class="keywordflow">else</font> <font class="keywordflow">if</font> (hr == E_PENDING)
00219         {
00220             hr = 0;
00221         }
00222         <font class="keywordflow">else</font> <font class="keywordflow">if</font> (FAILED(hr))
00223         {
00224             <font class="comment">// Ignore for now</font>
00225             <font class="comment">// TODO - sort this out</font>
00226             hr = 0;
00227         }
00228 
00229         <font class="comment">/*</font>
00230 <font class="comment">        DIMOUSESTATE diMouseState;</font>
00231 <font class="comment"></font>
00232 <font class="comment">        if (mlpDIMouse)</font>
00233 <font class="comment">        {</font>
00234 <font class="comment">            hr = mlpDIMouse-&gt;GetDeviceState(sizeof(DIMOUSESTATE),(LPVOID)&amp;diMouseState);</font>
00235 <font class="comment">            if (hr == DIERR_INPUTLOST || hr == DIERR_NOTACQUIRED)</font>
00236 <font class="comment">            {</font>
00237 <font class="comment">                hr = mlpDIMouse-&gt;Acquire();</font>
00238 <font class="comment">                if (hr == DIERR_OTHERAPPHASPRIO)</font>
00239 <font class="comment">                {</font>
00240 <font class="comment">                    hr = 0;</font>
00241 <font class="comment">                }</font>
00242 <font class="comment">                else</font>
00243 <font class="comment">                {</font>
00244 <font class="comment">                    hr = mlpDIKeyboard-&gt;GetDeviceState(sizeof(DIMOUSESTATE),(LPVOID)&amp;diMouseState);</font>
00245 <font class="comment">                }</font>
00246 <font class="comment">            }</font>
00247 <font class="comment">            else if (hr == DIERR_OTHERAPPHASPRIO)</font>
00248 <font class="comment">            {</font>
00249 <font class="comment">                // We've gone into the background - ignore</font>
00250 <font class="comment">                hr = 0;</font>
00251 <font class="comment">            }</font>
00252 <font class="comment">            else if (hr == DIERR_NOTINITIALIZED)</font>
00253 <font class="comment">            {</font>
00254 <font class="comment">                hr = 0;</font>
00255 <font class="comment">            }</font>
00256 <font class="comment">            else if (hr == E_PENDING)</font>
00257 <font class="comment">            {</font>
00258 <font class="comment">                hr = 0;</font>
00259 <font class="comment">            }</font>
00260 <font class="comment">            else if (FAILED(hr))</font>
00261 <font class="comment">            {</font>
00262 <font class="comment">                // Ignore for now</font>
00263 <font class="comment">                // TODO - sort this out</font>
00264 <font class="comment">                hr = 0;</font>
00265 <font class="comment">            }</font>
00266 <font class="comment">            else</font>
00267 <font class="comment">            {</font>
00268 <font class="comment">                mMouseRelX = diMouseState.lX;</font>
00269 <font class="comment">                mMouseRelY = diMouseState.lY;</font>
00270 <font class="comment"></font>
00271 <font class="comment">            }</font>
00272 <font class="comment">        }</font>
00273 <font class="comment">        */</font>
00274         <font class="comment">/*</font>
00275 <font class="comment">            Only update mouse position if the window has the focus</font>
00276 <font class="comment">         */</font>
00277         <font class="keywordflow">if</font>( <a class="code" href="classOgre_1_1Win32Input.html#Ogre_1_1Win32Inputo3">mHWnd</a> == GetForegroundWindow() )
00278         {
00279             POINT p;
00280             GetCursorPos(&amp;p);
00281             ScreenToClient(<a class="code" href="classOgre_1_1Win32Input.html#Ogre_1_1Win32Inputo3">mHWnd</a>,&amp;p);
00282             <a class="code" href="classOgre_1_1Win32Input.html#Ogre_1_1Win32Inputo5">mMouseX</a> = (Real)p.x;
00283             <a class="code" href="classOgre_1_1Win32Input.html#Ogre_1_1Win32Inputo6">mMouseY</a> = (Real)p.y;
00284             p.x = <a class="code" href="classOgre_1_1Win32Input.html#Ogre_1_1Win32Inputo7">mMouseCenterX</a>;
00285             p.y = <a class="code" href="classOgre_1_1Win32Input.html#Ogre_1_1Win32Inputo8">mMouseCenterY</a>;
00286             ClientToScreen(<a class="code" href="classOgre_1_1Win32Input.html#Ogre_1_1Win32Inputo3">mHWnd</a>, &amp;p);
00287             <font class="keywordflow">if</font>( IsWindowVisible( <a class="code" href="classOgre_1_1Win32Input.html#Ogre_1_1Win32Inputo3">mHWnd</a> ) )
00288             SetCursorPos(p.x, p.y);
00289         }
00290     }
00291     <font class="comment">//-----------------------------------------------------------------------</font>
<a name="l00292"></a><a class="code" href="classOgre_1_1Win32Input.html#Ogre_1_1Win32Inputa4">00292</a>     <font class="keywordtype">bool</font> Win32Input::isKeyDown(<a class="code" href="namespaceOgre.html#a433">KeyCode</a> kc)
00293     {
00294         <font class="keywordflow">if</font> (<a class="code" href="classOgre_1_1Win32Input.html#Ogre_1_1Win32Inputo4">mKeyboardBuffer</a>[kc] &amp; 0x80)
00295         {
00296             <font class="keywordflow">return</font> <font class="keyword">true</font>;
00297         }
00298         <font class="keywordflow">else</font>
00299         {
00300             <font class="keywordflow">return</font> <font class="keyword">false</font>;
00301         }
00302     }
00303 
00304     <font class="comment">//-----------------------------------------------------------------------</font>
<a name="l00305"></a><a class="code" href="classOgre_1_1Win32Input.html#Ogre_1_1Win32Inputa5">00305</a>     <font class="keywordtype">int</font> Win32Input::getMouseRelativeX(<font class="keywordtype">void</font>)
00306     {
00307         <font class="keywordflow">return</font> <a class="code" href="classOgre_1_1Win32Input.html#Ogre_1_1Win32Inputo5">mMouseX</a> - <a class="code" href="classOgre_1_1Win32Input.html#Ogre_1_1Win32Inputo7">mMouseCenterX</a>;
00308     }
00309     <font class="comment">//-----------------------------------------------------------------------</font>
<a name="l00310"></a><a class="code" href="classOgre_1_1Win32Input.html#Ogre_1_1Win32Inputa6">00310</a>     <font class="keywordtype">int</font> Win32Input::getMouseRelativeY(<font class="keywordtype">void</font>)
00311     {
00312         <font class="keywordflow">return</font> <a class="code" href="classOgre_1_1Win32Input.html#Ogre_1_1Win32Inputo6">mMouseY</a> - <a class="code" href="classOgre_1_1Win32Input.html#Ogre_1_1Win32Inputo8">mMouseCenterY</a>;
00313     }
00314 
00315 
00316 } <font class="comment">// namespace</font>
</pre></div><p>
Copyright &copy; 2002 by The OGRE Team<br />
<script type="text/javascript">
<!--//hide script from old browsers
document.write( "Last modified "+ document.lastModified );
//end hiding contents -->
</script>
</p>
</body>
</html>
