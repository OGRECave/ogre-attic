<html>
<head>
<title>OGRE Documentation</title> <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"> 
<link type="text/css" rel="stylesheet" href="style.css">
</head>

<body>
<!-- Generated by Doxygen 1.2.16 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="namespaces.html">Namespace List</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="namespacemembers.html">Namespace Members</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; <a class="qindex" href="pages.html">Related Pages</a> &nbsp; </center>
<hr><h1>OgreQuake3ShaderManager.cpp</h1><a href="OgreQuake3ShaderManager_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <font class="comment">/*</font>
00002 <font class="comment">-----------------------------------------------------------------------------</font>
00003 <font class="comment">This source file is part of OGRE</font>
00004 <font class="comment">    (Object-oriented Graphics Rendering Engine)</font>
00005 <font class="comment">For the latest info, see http://www.stevestreeting.com/ogre/</font>
00006 <font class="comment"></font>
00007 <font class="comment">Copyright © 2000-2001 Steven J. Streeting</font>
00008 <font class="comment">Also see acknowledgements in Readme.html</font>
00009 <font class="comment"></font>
00010 <font class="comment">This program is free software; you can redistribute it and/or modify it under</font>
00011 <font class="comment">the terms of the GNU General Public License as published by the Free Software</font>
00012 <font class="comment">Foundation; either version 2 of the License, or (at your option) any later</font>
00013 <font class="comment">version.</font>
00014 <font class="comment"></font>
00015 <font class="comment">This program is distributed in the hope that it will be useful, but WITHOUT</font>
00016 <font class="comment">ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS</font>
00017 <font class="comment">FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.</font>
00018 <font class="comment"></font>
00019 <font class="comment">You should have received a copy of the GNU General Public License along with</font>
00020 <font class="comment">this program; if not, write to the Free Software Foundation, Inc., 59 Temple</font>
00021 <font class="comment">Place - Suite 330, Boston, MA 02111-1307, USA, or go to</font>
00022 <font class="comment">http://www.gnu.org/copyleft/gpl.html.</font>
00023 <font class="comment">-----------------------------------------------------------------------------</font>
00024 <font class="comment">*/</font>
00025 <font class="preprocessor">#include "<a class="code" href="OgreQuake3ShaderManager_8h.html">OgreQuake3ShaderManager.h</a>"</font>
00026 <font class="preprocessor">#include "<a class="code" href="OgreQuake3Shader_8h.html">OgreQuake3Shader.h</a>"</font>
00027 <font class="preprocessor">#include "<a class="code" href="OgreStringVector_8h.html">OgreStringVector.h</a>"</font>
00028 
00029 <font class="keyword">namespace </font>Ogre {
00030 
00031     <font class="comment">//-----------------------------------------------------------------------</font>
<a name="l00032"></a><a class="code" href="classOgre_1_1Singleton.html#Ogre_1_1Singletonq0">00032</a>     <font class="keyword">template</font>&lt;&gt; <a class="code" href="classOgre_1_1Quake3ShaderManager.html">Quake3ShaderManager</a> *<a class="code" href="classOgre_1_1Singleton.html">Singleton&lt;Quake3ShaderManager&gt;</a>::ms_Singleton = 0;
00033     <font class="comment">//-----------------------------------------------------------------------</font>
00034 
00035     <font class="comment">//-----------------------------------------------------------------------</font>
<a name="l00036"></a><a class="code" href="classOgre_1_1Quake3ShaderManager.html#Ogre_1_1Quake3ShaderManagera0">00036</a>     Quake3ShaderManager::Quake3ShaderManager()
00037     {
00038     }
00039     <font class="comment">//-----------------------------------------------------------------------</font>
<a name="l00040"></a><a class="code" href="classOgre_1_1Quake3ShaderManager.html#Ogre_1_1Quake3ShaderManagera1">00040</a>     Quake3ShaderManager::~Quake3ShaderManager()
00041     {
00042     }
00043     <font class="comment">//-----------------------------------------------------------------------</font>
<a name="l00044"></a><a class="code" href="classOgre_1_1Quake3ShaderManager.html#Ogre_1_1Quake3ShaderManagera2">00044</a>     <font class="keywordtype">void</font> Quake3ShaderManager::parseShaderFile(<a class="code" href="classOgre_1_1DataChunk.html">DataChunk</a>&amp; chunk)
00045     {
00046         <a class="code" href="classOgre_1_1String.html">String</a> line;
00047         <a class="code" href="classOgre_1_1Quake3Shader.html">Quake3Shader</a>* pShader;
00048         <font class="keywordtype">char</font> tempBuf[512];
00049 
00050         pShader = 0;
00051 
00052         <font class="keywordflow">while</font>(!chunk.<a class="code" href="classOgre_1_1DataChunk.html#Ogre_1_1SDDataChunka12">isEOF</a>())
00053         {
00054             line = chunk.<a class="code" href="classOgre_1_1DataChunk.html#Ogre_1_1SDDataChunka13">getLine</a>();
00055             <font class="comment">// Ignore comments &amp; blanks</font>
00056             <font class="keywordflow">if</font> (!(line.length() == 0 || line.substr(0,2) == <font class="stringliteral">"//"</font>))
00057             {
00058                 <font class="keywordflow">if</font> (pShader == 0)
00059                 {
00060                     <font class="comment">// No current shader</font>
00061                     <font class="comment">// So first valid data should be a shader name</font>
00062                     pShader = (<a class="code" href="classOgre_1_1Quake3Shader.html">Quake3Shader</a>*)<a class="code" href="classOgre_1_1Quake3ShaderManager.html#Ogre_1_1Quake3ShaderManagera4">create</a>(line);
00063                     <font class="comment">// Skip to and over next {</font>
00064                     chunk.<a class="code" href="classOgre_1_1DataChunk.html#Ogre_1_1SDDataChunka11">readUpTo</a>(tempBuf, 511, <font class="stringliteral">"{"</font>);
00065                 }
00066                 <font class="keywordflow">else</font>
00067                 {
00068                     <font class="comment">// Already in a shader</font>
00069                     <font class="keywordflow">if</font> (line == <font class="stringliteral">"}"</font>)
00070                     {
00071                         <font class="comment">// Finished shader</font>
00072                         pShader = 0;
00073                     }
00074                     <font class="keywordflow">else</font> <font class="keywordflow">if</font> (line == <font class="stringliteral">"{"</font>)
00075                     {
00076                         <font class="comment">// new pass</font>
00077                         <a class="code" href="classOgre_1_1Quake3ShaderManager.html#Ogre_1_1Quake3ShaderManagerb0">parseNewShaderPass</a>(chunk, pShader);
00078 
00079                     }
00080                     <font class="keywordflow">else</font>
00081                     {
00082                         <font class="comment">// Attribute</font>
00083                         <a class="code" href="classOgre_1_1Quake3ShaderManager.html#Ogre_1_1Quake3ShaderManagerb1">parseShaderAttrib</a>(line.<a class="code" href="classOgre_1_1String.html#Ogre_1_1Stringa7">toLowerCase</a>(), pShader);
00084                     }
00085 
00086                 }
00087 
00088             }
00089 
00090 
00091         }
00092 
00093     }
00094     <font class="comment">//-----------------------------------------------------------------------</font>
<a name="l00095"></a><a class="code" href="classOgre_1_1Quake3ShaderManager.html#Ogre_1_1Quake3ShaderManagera3">00095</a>     <font class="keywordtype">void</font> Quake3ShaderManager::parseAllSources(<font class="keyword">const</font> <a class="code" href="classOgre_1_1String.html">String</a>&amp; extension)
00096     {
00097         <a class="code" href="namespaceOgre.html#a338">StringVector</a> shaderFiles;
00098         <a class="code" href="classOgre_1_1DataChunk.html">DataChunk</a>* pChunk;
00099 
00100         std::vector&lt;ArchiveEx*&gt;::iterator i = <a class="code" href="classOgre_1_1ResourceManager.html#Ogre_1_1TextureManagern6">mVFS</a>.begin();
00101 
00102         <font class="comment">// Specific archives</font>
00103         <font class="keywordflow">for</font> (; i != <a class="code" href="classOgre_1_1ResourceManager.html#Ogre_1_1TextureManagern6">mVFS</a>.end(); ++i)
00104         {
00105             shaderFiles = (*i)-&gt;getAllNamesLike( <font class="stringliteral">"./"</font>, extension);
00106             <font class="keywordflow">for</font> (StringVector::iterator si = shaderFiles.begin(); si!=shaderFiles.end(); ++si)
00107             {
00108                 <a class="code" href="classOgre_1_1DataChunk.html">DataChunk</a> dat; pChunk = &amp;dat;
00109                 (*i)-&gt;fileRead(si[0], &amp;pChunk );
00110                 <a class="code" href="classOgre_1_1Quake3ShaderManager.html#Ogre_1_1Quake3ShaderManagera2">parseShaderFile</a>(dat);
00111             }
00112 
00113         }
00114         <font class="comment">// search common archives</font>
00115         <font class="keywordflow">for</font> (i = <a class="code" href="classOgre_1_1ResourceManager.html#Ogre_1_1TextureManagerq1">mCommonVFS</a>.begin(); i != <a class="code" href="classOgre_1_1ResourceManager.html#Ogre_1_1TextureManagerq1">mCommonVFS</a>.end(); ++i)
00116         {
00117             shaderFiles = (*i)-&gt;getAllNamesLike( <font class="stringliteral">"./"</font>, extension);
00118             <font class="keywordflow">for</font> (StringVector::iterator si = shaderFiles.begin(); si!=shaderFiles.end(); ++si)
00119             {
00120                 <a class="code" href="classOgre_1_1DataChunk.html">DataChunk</a> dat; pChunk = &amp;dat;
00121                 (*i)-&gt;fileRead(si[0], &amp;pChunk );
00122                 <a class="code" href="classOgre_1_1Quake3ShaderManager.html#Ogre_1_1Quake3ShaderManagera2">parseShaderFile</a>(dat);
00123             }
00124         }
00125 
00126 
00127     }
00128     <font class="comment">//-----------------------------------------------------------------------</font>
<a name="l00129"></a><a class="code" href="classOgre_1_1Quake3ShaderManager.html#Ogre_1_1Quake3ShaderManagera4">00129</a>     <a class="code" href="classOgre_1_1Resource.html">Resource</a>* Quake3ShaderManager::create( <font class="keyword">const</font> <a class="code" href="classOgre_1_1String.html">String</a>&amp; name)
00130     {
00131         <a class="code" href="classOgre_1_1Quake3Shader.html">Quake3Shader</a>* s = <font class="keyword">new</font> <a class="code" href="classOgre_1_1Quake3Shader.html">Quake3Shader</a>(name);
00132         <a class="code" href="classOgre_1_1ResourceManager.html#Ogre_1_1TextureManagera10">load</a>(s,1);
00133         <font class="keywordflow">return</font> s;
00134     }
00135     <font class="comment">//-----------------------------------------------------------------------</font>
<a name="l00136"></a><a class="code" href="classOgre_1_1Quake3ShaderManager.html#Ogre_1_1Quake3ShaderManagerb0">00136</a>     <font class="keywordtype">void</font> Quake3ShaderManager::parseNewShaderPass(<a class="code" href="classOgre_1_1DataChunk.html">DataChunk</a>&amp; chunk, <a class="code" href="classOgre_1_1Quake3Shader.html">Quake3Shader</a>* pShader)
00137     {
00138         <a class="code" href="classOgre_1_1String.html">String</a> line;
00139         <font class="keywordtype">int</font> passIdx;
00140 
00141         passIdx = pShader-&gt;<a class="code" href="classOgre_1_1Quake3Shader.html#Ogre_1_1Quake3Shaderm1">numPasses</a>;
00142         pShader-&gt;<a class="code" href="classOgre_1_1Quake3Shader.html#Ogre_1_1Quake3Shaderm1">numPasses</a>++;
00143 
00144         <font class="comment">// Default pass details</font>
00145         pShader-&gt;<a class="code" href="classOgre_1_1Quake3Shader.html#Ogre_1_1Quake3Shaderm2">pass</a>[passIdx].animNumFrames = 0;
00146         pShader-&gt;<a class="code" href="classOgre_1_1Quake3Shader.html#Ogre_1_1Quake3Shaderm2">pass</a>[passIdx].blend = <a class="code" href="namespaceOgre.html#a418a15">LBO_REPLACE</a>;
00147         pShader-&gt;<a class="code" href="classOgre_1_1Quake3Shader.html#Ogre_1_1Quake3Shaderm2">pass</a>[passIdx].blendDest = <a class="code" href="namespaceOgre.html#a422a41">SBF_ZERO</a>;
00148         pShader-&gt;<a class="code" href="classOgre_1_1Quake3Shader.html#Ogre_1_1Quake3Shaderm2">pass</a>[passIdx].blendSrc = <a class="code" href="namespaceOgre.html#a422a40">SBF_ONE</a>;
00149         pShader-&gt;<a class="code" href="classOgre_1_1Quake3Shader.html#Ogre_1_1Quake3Shaderm2">pass</a>[passIdx].depthFunc = <a class="code" href="namespaceOgre.html#a426a69">CMPF_LESS_EQUAL</a>;
00150         pShader-&gt;<a class="code" href="classOgre_1_1Quake3Shader.html#Ogre_1_1Quake3Shaderm2">pass</a>[passIdx].flags = 0;
00151         pShader-&gt;<a class="code" href="classOgre_1_1Quake3Shader.html#Ogre_1_1Quake3Shaderm2">pass</a>[passIdx].rgbGenFunc = <a class="code" href="OgreQuake3Types_8h.html#a97a81">SHADER_GEN_IDENTITY</a>;
00152         pShader-&gt;<a class="code" href="classOgre_1_1Quake3Shader.html#Ogre_1_1Quake3Shaderm2">pass</a>[passIdx].tcModRotate = 0;
00153         pShader-&gt;<a class="code" href="classOgre_1_1Quake3Shader.html#Ogre_1_1Quake3Shaderm2">pass</a>[passIdx].tcModScale[0] = pShader-&gt;<a class="code" href="classOgre_1_1Quake3Shader.html#Ogre_1_1Quake3Shaderm2">pass</a>[passIdx].tcModScale[1] = 1.0;
00154         pShader-&gt;<a class="code" href="classOgre_1_1Quake3Shader.html#Ogre_1_1Quake3Shaderm2">pass</a>[passIdx].tcModScroll[0] = pShader-&gt;<a class="code" href="classOgre_1_1Quake3Shader.html#Ogre_1_1Quake3Shaderm2">pass</a>[passIdx].tcModScroll[1] = 0;
00155         pShader-&gt;<a class="code" href="classOgre_1_1Quake3Shader.html#Ogre_1_1Quake3Shaderm2">pass</a>[passIdx].tcModStretchWave = <a class="code" href="OgreQuake3Types_8h.html#a96a75">SHADER_FUNC_NONE</a>;
00156         pShader-&gt;<a class="code" href="classOgre_1_1Quake3Shader.html#Ogre_1_1Quake3Shaderm2">pass</a>[passIdx].tcModTransform[0] = pShader-&gt;<a class="code" href="classOgre_1_1Quake3Shader.html#Ogre_1_1Quake3Shaderm2">pass</a>[passIdx].tcModTransform[1] = 0;
00157         pShader-&gt;<a class="code" href="classOgre_1_1Quake3Shader.html#Ogre_1_1Quake3Shaderm2">pass</a>[passIdx].tcModTurbOn = <font class="keyword">false</font>;
00158         pShader-&gt;<a class="code" href="classOgre_1_1Quake3Shader.html#Ogre_1_1Quake3Shaderm2">pass</a>[passIdx].tcModTurb[0] = pShader-&gt;<a class="code" href="classOgre_1_1Quake3Shader.html#Ogre_1_1Quake3Shaderm2">pass</a>[passIdx].tcModTurb[1] =
00159             pShader-&gt;<a class="code" href="classOgre_1_1Quake3Shader.html#Ogre_1_1Quake3Shaderm2">pass</a>[passIdx].tcModTurb[2] = pShader-&gt;<a class="code" href="classOgre_1_1Quake3Shader.html#Ogre_1_1Quake3Shaderm2">pass</a>[passIdx].tcModTurb[3] = 0;
00160         pShader-&gt;<a class="code" href="classOgre_1_1Quake3Shader.html#Ogre_1_1Quake3Shaderm2">pass</a>[passIdx].texGen = <a class="code" href="OgreQuake3Types_8h.html#a98a84">TEXGEN_BASE</a>;
00161         pShader-&gt;<a class="code" href="classOgre_1_1Quake3Shader.html#Ogre_1_1Quake3Shaderm2">pass</a>[passIdx].addressMode = Material::TextureLayer::TAM_WRAP;
00162         pShader-&gt;<a class="code" href="classOgre_1_1Quake3Shader.html#Ogre_1_1Quake3Shaderm2">pass</a>[passIdx].customBlend = <font class="keyword">false</font>;
00163         pShader-&gt;<a class="code" href="classOgre_1_1Quake3Shader.html#Ogre_1_1Quake3Shaderm2">pass</a>[passIdx].alphaVal = 0;
00164         pShader-&gt;<a class="code" href="classOgre_1_1Quake3Shader.html#Ogre_1_1Quake3Shaderm2">pass</a>[passIdx].alphaFunc = <a class="code" href="namespaceOgre.html#a426a67">CMPF_ALWAYS_PASS</a>;
00165 
00166         <font class="keywordflow">while</font> (!chunk.<a class="code" href="classOgre_1_1DataChunk.html#Ogre_1_1SDDataChunka12">isEOF</a>())
00167         {
00168             line = chunk.<a class="code" href="classOgre_1_1DataChunk.html#Ogre_1_1SDDataChunka13">getLine</a>();
00169             <font class="comment">// Ignore comments &amp; blanks</font>
00170             <font class="keywordflow">if</font> (line.length() != 0 &amp;&amp; line.substr(0,2) != <font class="stringliteral">"//"</font>)
00171             {
00172                 <font class="keywordflow">if</font> (line == <font class="stringliteral">"}"</font>)
00173                 {
00174                     <font class="comment">// end of shader</font>
00175                     <font class="keywordflow">return</font>;
00176                 }
00177                 <font class="keywordflow">else</font>
00178                 {
00179                     <a class="code" href="classOgre_1_1Quake3ShaderManager.html#Ogre_1_1Quake3ShaderManagerb2">parseShaderPassAttrib</a>(line.<a class="code" href="classOgre_1_1String.html#Ogre_1_1Stringa7">toLowerCase</a>(), pShader, &amp;pShader-&gt;<a class="code" href="classOgre_1_1Quake3Shader.html#Ogre_1_1Quake3Shaderm2">pass</a>[passIdx]);
00180                 }
00181             }
00182 
00183 
00184         }
00185     }
00186     <font class="comment">//-----------------------------------------------------------------------</font>
<a name="l00187"></a><a class="code" href="classOgre_1_1Quake3ShaderManager.html#Ogre_1_1Quake3ShaderManagerb1">00187</a>     <font class="keywordtype">void</font> Quake3ShaderManager::parseShaderAttrib( <font class="keyword">const</font> <a class="code" href="classOgre_1_1String.html">String</a>&amp; line, <a class="code" href="classOgre_1_1Quake3Shader.html">Quake3Shader</a>* pShader)
00188     {
00189         <a class="code" href="namespaceOgre.html#a338">StringVector</a> vecparams;
00190 
00191         vecparams = line.<a class="code" href="classOgre_1_1String.html#Ogre_1_1Stringa6">split</a>(<font class="stringliteral">" "</font>);
00192         StringVector::iterator params = vecparams.begin();
00193 
00194         <font class="keywordflow">if</font> (params[0] == <font class="stringliteral">"skyparms"</font>)
00195         {
00196             <font class="keywordflow">if</font> (params[1] != <font class="stringliteral">"-"</font>)
00197             {
00198                 pShader-&gt;<a class="code" href="classOgre_1_1Quake3Shader.html#Ogre_1_1Quake3Shaderm3">farbox</a> = <font class="keyword">true</font>;
00199                 pShader-&gt;<a class="code" href="classOgre_1_1Quake3Shader.html#Ogre_1_1Quake3Shaderm4">farboxName</a> = params[1];
00200             }
00201             <font class="keywordflow">if</font> (params[2] != <font class="stringliteral">"-"</font>)
00202             {
00203                 pShader-&gt;<a class="code" href="classOgre_1_1Quake3Shader.html#Ogre_1_1Quake3Shaderm5">skyDome</a> = <font class="keyword">true</font>;
00204                 pShader-&gt;<a class="code" href="classOgre_1_1Quake3Shader.html#Ogre_1_1Quake3Shaderm6">cloudHeight</a> = atof(params[2].c_str());
00205             }
00206             <font class="comment">// nearbox not supported</font>
00207         }
00208         <font class="keywordflow">else</font> <font class="keywordflow">if</font> (params[0] == <font class="stringliteral">"cull"</font>)
00209         {
00210             <font class="keywordflow">if</font> (params[1] == <font class="stringliteral">"diable"</font> || params[1] == <font class="stringliteral">"none"</font>)
00211             {
00212                 pShader-&gt;<a class="code" href="classOgre_1_1Quake3Shader.html#Ogre_1_1Quake3Shaderm9">cullMode</a> = <a class="code" href="namespaceOgre.html#a431a87">MANUAL_CULL_NONE</a>;
00213             }
00214             <font class="keywordflow">else</font> <font class="keywordflow">if</font> (params[1] == <font class="stringliteral">"front"</font>)
00215             {
00216                 pShader-&gt;<a class="code" href="classOgre_1_1Quake3Shader.html#Ogre_1_1Quake3Shaderm9">cullMode</a> = <a class="code" href="namespaceOgre.html#a431a89">MANUAL_CULL_FRONT</a>;
00217             }
00218             <font class="keywordflow">else</font> <font class="keywordflow">if</font> (params[1] == <font class="stringliteral">"back"</font>)
00219             {
00220                 pShader-&gt;<a class="code" href="classOgre_1_1Quake3Shader.html#Ogre_1_1Quake3Shaderm9">cullMode</a> = <a class="code" href="namespaceOgre.html#a431a88">MANUAL_CULL_BACK</a>;
00221             }
00222         }
00223         <font class="keywordflow">else</font> <font class="keywordflow">if</font> (params[0] == <font class="stringliteral">"deformvertexes"</font>)
00224         {
00225             <font class="comment">// TODO</font>
00226         }
00227         <font class="keywordflow">else</font> <font class="keywordflow">if</font> (params[0] == <font class="stringliteral">"fogparms"</font>)
00228         {
00229             <a class="code" href="namespaceOgre.html#a281">Real</a> r,g,b;
00230             r = atof(params[1].c_str());
00231             g = atof(params[2].c_str());
00232             b = atof(params[3].c_str());
00233             pShader-&gt;<a class="code" href="classOgre_1_1Quake3Shader.html#Ogre_1_1Quake3Shaderm10">fog</a> = <font class="keyword">true</font>;
00234             pShader-&gt;<a class="code" href="classOgre_1_1Quake3Shader.html#Ogre_1_1Quake3Shaderm11">fogColour</a> = <a class="code" href="classOgre_1_1ColourValue.html">ColourValue</a>(r,g,b);
00235             pShader-&gt;<a class="code" href="classOgre_1_1Quake3Shader.html#Ogre_1_1Quake3Shaderm12">fogDistance</a> = atof(params[4].c_str());
00236 
00237         }
00238     }
00239     <font class="comment">//-----------------------------------------------------------------------</font>
<a name="l00240"></a><a class="code" href="classOgre_1_1Quake3ShaderManager.html#Ogre_1_1Quake3ShaderManagerb2">00240</a>     <font class="keywordtype">void</font> Quake3ShaderManager::parseShaderPassAttrib( <font class="keyword">const</font> <a class="code" href="classOgre_1_1String.html">String</a>&amp; line, <a class="code" href="classOgre_1_1Quake3Shader.html">Quake3Shader</a>* pShader, <a class="code" href="structOgre_1_1Quake3Shader_1_1Pass.html">Quake3Shader::Pass</a>* pPass)
00241     {
00242         <a class="code" href="namespaceOgre.html#a338">StringVector</a> vecparams;
00243 
00244         vecparams = line.<a class="code" href="classOgre_1_1String.html#Ogre_1_1Stringa6">split</a>(<font class="stringliteral">" "</font>);
00245         StringVector::iterator params = vecparams.begin();
00246 
00247         <font class="comment">// MAP</font>
00248         <font class="keywordflow">if</font> (params[0] == <font class="stringliteral">"map"</font>)
00249         {
00250             pPass-&gt;<a class="code" href="structOgre_1_1Quake3Shader_1_1Pass.html#Ogre_1_1Quake3Shader_1_1Passm1">textureName</a> = params[1];
00251             <font class="keywordflow">if</font> (params[1] == <font class="stringliteral">"$lightmap"</font>)
00252                 pPass-&gt;<a class="code" href="structOgre_1_1Quake3Shader_1_1Pass.html#Ogre_1_1Quake3Shader_1_1Passm2">texGen</a> = <a class="code" href="OgreQuake3Types_8h.html#a98a85">TEXGEN_LIGHTMAP</a>;
00253         }
00254         <font class="comment">// CLAMPMAP</font>
00255         <font class="keywordflow">if</font> (params[0] == <font class="stringliteral">"clampmap"</font>)
00256         {
00257             pPass-&gt;<a class="code" href="structOgre_1_1Quake3Shader_1_1Pass.html#Ogre_1_1Quake3Shader_1_1Passm1">textureName</a> = params[1];
00258             <font class="keywordflow">if</font> (params[1] == <font class="stringliteral">"$lightmap"</font>)
00259                 pPass-&gt;<a class="code" href="structOgre_1_1Quake3Shader_1_1Pass.html#Ogre_1_1Quake3Shader_1_1Passm2">texGen</a> = <a class="code" href="OgreQuake3Types_8h.html#a98a85">TEXGEN_LIGHTMAP</a>;
00260             pPass-&gt;<a class="code" href="structOgre_1_1Quake3Shader_1_1Pass.html#Ogre_1_1Quake3Shader_1_1Passm8">addressMode</a> = Material::TextureLayer::TAM_CLAMP;
00261         }
00262         <font class="comment">// ANIMMAP</font>
00263         <font class="keywordflow">else</font> <font class="keywordflow">if</font> (params[0] == <font class="stringliteral">"animmap"</font>)
00264         {
00265             pPass-&gt;<a class="code" href="structOgre_1_1Quake3Shader_1_1Pass.html#Ogre_1_1Quake3Shader_1_1Passm22">animFps</a> = atof(params[1].c_str());
00266             pPass-&gt;<a class="code" href="structOgre_1_1Quake3Shader_1_1Pass.html#Ogre_1_1Quake3Shader_1_1Passm23">animNumFrames</a> = static_cast&lt;unsigned int&gt;( vecparams.size() - 2 );
00267             <font class="keywordflow">for</font> (<font class="keywordtype">unsigned</font> <font class="keywordtype">int</font> frame = 0; frame &lt; pPass-&gt;<a class="code" href="structOgre_1_1Quake3Shader_1_1Pass.html#Ogre_1_1Quake3Shader_1_1Passm23">animNumFrames</a>; ++frame)
00268             {
00269                 pPass-&gt;<a class="code" href="structOgre_1_1Quake3Shader_1_1Pass.html#Ogre_1_1Quake3Shader_1_1Passm24">frames</a>[frame] = params[frame+2];
00270             }
00271         }
00272         <font class="comment">// BLENDFUNC</font>
00273         <font class="keywordflow">else</font> <font class="keywordflow">if</font> (params[0] == <font class="stringliteral">"blendfunc"</font>)
00274         {
00275             <font class="keywordflow">if</font> (params[1] == <font class="stringliteral">"add"</font> || params[1] == <font class="stringliteral">"gl_add"</font>)
00276             {
00277                 pPass-&gt;<a class="code" href="structOgre_1_1Quake3Shader_1_1Pass.html#Ogre_1_1Quake3Shader_1_1Passm3">blend</a> = <a class="code" href="namespaceOgre.html#a418a16">LBO_ADD</a>;
00278                 pPass-&gt;<a class="code" href="structOgre_1_1Quake3Shader_1_1Pass.html#Ogre_1_1Quake3Shader_1_1Passm5">blendDest</a> = <a class="code" href="namespaceOgre.html#a422a40">SBF_ONE</a>;
00279                 pPass-&gt;<a class="code" href="structOgre_1_1Quake3Shader_1_1Pass.html#Ogre_1_1Quake3Shader_1_1Passm4">blendSrc</a> = <a class="code" href="namespaceOgre.html#a422a40">SBF_ONE</a>;
00280             }
00281             <font class="keywordflow">else</font> <font class="keywordflow">if</font> (params[1] == <font class="stringliteral">"filter"</font> || params[1] == <font class="stringliteral">"gl_filter"</font>)
00282             {
00283                 pPass-&gt;<a class="code" href="structOgre_1_1Quake3Shader_1_1Pass.html#Ogre_1_1Quake3Shader_1_1Passm3">blend</a> = <a class="code" href="namespaceOgre.html#a418a17">LBO_MODULATE</a>;
00284                 pPass-&gt;<a class="code" href="structOgre_1_1Quake3Shader_1_1Pass.html#Ogre_1_1Quake3Shader_1_1Passm5">blendDest</a> = <a class="code" href="namespaceOgre.html#a422a41">SBF_ZERO</a>;
00285                 pPass-&gt;<a class="code" href="structOgre_1_1Quake3Shader_1_1Pass.html#Ogre_1_1Quake3Shader_1_1Passm4">blendSrc</a> = <a class="code" href="namespaceOgre.html#a422a42">SBF_DEST_COLOUR</a>;
00286             }
00287             <font class="keywordflow">else</font> <font class="keywordflow">if</font> (params[1] == <font class="stringliteral">"blend"</font> || params[1] == <font class="stringliteral">"gl_blend"</font>)
00288             {
00289                 pPass-&gt;<a class="code" href="structOgre_1_1Quake3Shader_1_1Pass.html#Ogre_1_1Quake3Shader_1_1Passm3">blend</a> = <a class="code" href="namespaceOgre.html#a418a18">LBO_ALPHA_BLEND</a>;
00290                 pPass-&gt;<a class="code" href="structOgre_1_1Quake3Shader_1_1Pass.html#Ogre_1_1Quake3Shader_1_1Passm5">blendDest</a> = <a class="code" href="namespaceOgre.html#a422a49">SBF_ONE_MINUS_SOURCE_ALPHA</a>;
00291                 pPass-&gt;<a class="code" href="structOgre_1_1Quake3Shader_1_1Pass.html#Ogre_1_1Quake3Shader_1_1Passm4">blendSrc</a> = <a class="code" href="namespaceOgre.html#a422a47">SBF_SOURCE_ALPHA</a>;
00292             }
00293             <font class="keywordflow">else</font>
00294             {
00295                 <font class="comment">// Manual blend</font>
00296                 pPass-&gt;<a class="code" href="structOgre_1_1Quake3Shader_1_1Pass.html#Ogre_1_1Quake3Shader_1_1Passm4">blendSrc</a> = <a class="code" href="classOgre_1_1Quake3ShaderManager.html#Ogre_1_1Quake3ShaderManagerb3">convertBlendFunc</a>(params[1]);
00297                 pPass-&gt;<a class="code" href="structOgre_1_1Quake3Shader_1_1Pass.html#Ogre_1_1Quake3Shader_1_1Passm5">blendDest</a> = <a class="code" href="classOgre_1_1Quake3ShaderManager.html#Ogre_1_1Quake3ShaderManagerb3">convertBlendFunc</a>(params[2]);
00298                 <font class="comment">// Detect common blends</font>
00299                 <font class="keywordflow">if</font> (pPass-&gt;<a class="code" href="structOgre_1_1Quake3Shader_1_1Pass.html#Ogre_1_1Quake3Shader_1_1Passm4">blendSrc</a> == <a class="code" href="namespaceOgre.html#a422a40">SBF_ONE</a> &amp;&amp; pPass-&gt;<a class="code" href="structOgre_1_1Quake3Shader_1_1Pass.html#Ogre_1_1Quake3Shader_1_1Passm5">blendDest</a> == <a class="code" href="namespaceOgre.html#a422a41">SBF_ZERO</a>)
00300                     pPass-&gt;<a class="code" href="structOgre_1_1Quake3Shader_1_1Pass.html#Ogre_1_1Quake3Shader_1_1Passm3">blend</a> = <a class="code" href="namespaceOgre.html#a418a15">LBO_REPLACE</a>;
00301                 <font class="keywordflow">else</font> <font class="keywordflow">if</font> (pPass-&gt;<a class="code" href="structOgre_1_1Quake3Shader_1_1Pass.html#Ogre_1_1Quake3Shader_1_1Passm4">blendSrc</a> == <a class="code" href="namespaceOgre.html#a422a40">SBF_ONE</a> &amp;&amp; pPass-&gt;<a class="code" href="structOgre_1_1Quake3Shader_1_1Pass.html#Ogre_1_1Quake3Shader_1_1Passm5">blendDest</a> == <a class="code" href="namespaceOgre.html#a422a40">SBF_ONE</a>)
00302                     pPass-&gt;<a class="code" href="structOgre_1_1Quake3Shader_1_1Pass.html#Ogre_1_1Quake3Shader_1_1Passm3">blend</a> = <a class="code" href="namespaceOgre.html#a418a16">LBO_ADD</a>;
00303                 <font class="keywordflow">else</font> <font class="keywordflow">if</font> ((pPass-&gt;<a class="code" href="structOgre_1_1Quake3Shader_1_1Pass.html#Ogre_1_1Quake3Shader_1_1Passm4">blendSrc</a> == <a class="code" href="namespaceOgre.html#a422a41">SBF_ZERO</a> &amp;&amp; pPass-&gt;<a class="code" href="structOgre_1_1Quake3Shader_1_1Pass.html#Ogre_1_1Quake3Shader_1_1Passm5">blendDest</a> == <a class="code" href="namespaceOgre.html#a422a43">SBF_SOURCE_COLOUR</a>) ||
00304                     (pPass-&gt;<a class="code" href="structOgre_1_1Quake3Shader_1_1Pass.html#Ogre_1_1Quake3Shader_1_1Passm4">blendSrc</a> == <a class="code" href="namespaceOgre.html#a422a42">SBF_DEST_COLOUR</a> &amp;&amp; pPass-&gt;<a class="code" href="structOgre_1_1Quake3Shader_1_1Pass.html#Ogre_1_1Quake3Shader_1_1Passm5">blendDest</a> == <a class="code" href="namespaceOgre.html#a422a41">SBF_ZERO</a>))
00305                     pPass-&gt;<a class="code" href="structOgre_1_1Quake3Shader_1_1Pass.html#Ogre_1_1Quake3Shader_1_1Passm3">blend</a> = <a class="code" href="namespaceOgre.html#a418a17">LBO_MODULATE</a>;
00306                 <font class="keywordflow">else</font> <font class="keywordflow">if</font> (pPass-&gt;<a class="code" href="structOgre_1_1Quake3Shader_1_1Pass.html#Ogre_1_1Quake3Shader_1_1Passm4">blendSrc</a> == <a class="code" href="namespaceOgre.html#a422a47">SBF_SOURCE_ALPHA</a> &amp;&amp; pPass-&gt;<a class="code" href="structOgre_1_1Quake3Shader_1_1Pass.html#Ogre_1_1Quake3Shader_1_1Passm5">blendDest</a> == <a class="code" href="namespaceOgre.html#a422a49">SBF_ONE_MINUS_SOURCE_ALPHA</a>)
00307                     pPass-&gt;<a class="code" href="structOgre_1_1Quake3Shader_1_1Pass.html#Ogre_1_1Quake3Shader_1_1Passm3">blend</a> = <a class="code" href="namespaceOgre.html#a418a18">LBO_ALPHA_BLEND</a>;
00308                 <font class="keywordflow">else</font>
00309                     pPass-&gt;<a class="code" href="structOgre_1_1Quake3Shader_1_1Pass.html#Ogre_1_1Quake3Shader_1_1Passm6">customBlend</a> = <font class="keyword">true</font>;
00310 
00311 
00312                 <font class="comment">// NB other custom blends might not work due to OGRE trying to use multitexture over multipass</font>
00313             }
00314         }
00315         <font class="comment">// RGBGEN</font>
00316         <font class="keywordflow">else</font> <font class="keywordflow">if</font> (params[0] == <font class="stringliteral">"rgbgen"</font>)
00317         {
00318             <font class="comment">// TODO</font>
00319         }
00320         <font class="comment">// ALPHAGEN</font>
00321         <font class="keywordflow">else</font> <font class="keywordflow">if</font> (params[0] == <font class="stringliteral">"alphagen"</font>)
00322         {
00323             <font class="comment">// TODO</font>
00324         }
00325         <font class="comment">// TCGEN</font>
00326         <font class="keywordflow">else</font> <font class="keywordflow">if</font> (params[0] == <font class="stringliteral">"tcgen"</font>)
00327         {
00328             <font class="keywordflow">if</font> (params[1] == <font class="stringliteral">"base"</font>)
00329             {
00330                 pPass-&gt;<a class="code" href="structOgre_1_1Quake3Shader_1_1Pass.html#Ogre_1_1Quake3Shader_1_1Passm2">texGen</a> = <a class="code" href="OgreQuake3Types_8h.html#a98a84">TEXGEN_BASE</a>;
00331             }
00332             <font class="keywordflow">else</font> <font class="keywordflow">if</font> (params[1] == <font class="stringliteral">"lightmap"</font>)
00333             {
00334                 pPass-&gt;<a class="code" href="structOgre_1_1Quake3Shader_1_1Pass.html#Ogre_1_1Quake3Shader_1_1Passm2">texGen</a> = <a class="code" href="OgreQuake3Types_8h.html#a98a85">TEXGEN_LIGHTMAP</a>;
00335             }
00336             <font class="keywordflow">else</font> <font class="keywordflow">if</font> (params[1] == <font class="stringliteral">"environment"</font>)
00337             {
00338                 pPass-&gt;<a class="code" href="structOgre_1_1Quake3Shader_1_1Pass.html#Ogre_1_1Quake3Shader_1_1Passm2">texGen</a> = <a class="code" href="OgreQuake3Types_8h.html#a98a86">TEXGEN_ENVIRONMENT</a>;
00339             }
00340         }
00341         <font class="comment">// TCMOD</font>
00342         <font class="keywordflow">else</font> <font class="keywordflow">if</font> (params[0] == <font class="stringliteral">"tcmod"</font>)
00343         {
00344             <font class="keywordflow">if</font> (params[1] == <font class="stringliteral">"rotate"</font>)
00345             {
00346                 pPass-&gt;<a class="code" href="structOgre_1_1Quake3Shader_1_1Pass.html#Ogre_1_1Quake3Shader_1_1Passm13">tcModRotate</a> = -atof(params[2]) / 360; <font class="comment">// +ve is clockwise degrees in Q3 shader, anticlockwise complete rotations in Ogre</font>
00347             }
00348             <font class="keywordflow">else</font> <font class="keywordflow">if</font> (params[1] == <font class="stringliteral">"scroll"</font>)
00349             {
00350                 pPass-&gt;<a class="code" href="structOgre_1_1Quake3Shader_1_1Pass.html#Ogre_1_1Quake3Shader_1_1Passm14">tcModScroll</a>[0] = atof(params[2]);
00351                 pPass-&gt;<a class="code" href="structOgre_1_1Quake3Shader_1_1Pass.html#Ogre_1_1Quake3Shader_1_1Passm14">tcModScroll</a>[1] = atof(params[3]);
00352             }
00353             <font class="keywordflow">else</font> <font class="keywordflow">if</font> (params[1] == <font class="stringliteral">"scale"</font>)
00354             {
00355                 pPass-&gt;<a class="code" href="structOgre_1_1Quake3Shader_1_1Pass.html#Ogre_1_1Quake3Shader_1_1Passm12">tcModScale</a>[0] = atof(params[2]);
00356                 pPass-&gt;<a class="code" href="structOgre_1_1Quake3Shader_1_1Pass.html#Ogre_1_1Quake3Shader_1_1Passm12">tcModScale</a>[1] = atof(params[3]);
00357             }
00358             <font class="keywordflow">else</font> <font class="keywordflow">if</font> (params[1] == <font class="stringliteral">"stretch"</font>)
00359             {
00360                 <font class="keywordflow">if</font> (params[2] == <font class="stringliteral">"sin"</font>)
00361                     pPass-&gt;<a class="code" href="structOgre_1_1Quake3Shader_1_1Pass.html#Ogre_1_1Quake3Shader_1_1Passm18">tcModStretchWave</a> = <a class="code" href="OgreQuake3Types_8h.html#a96a76">SHADER_FUNC_SIN</a>;
00362                 <font class="keywordflow">else</font> <font class="keywordflow">if</font> (params[2] == <font class="stringliteral">"triangle"</font>)
00363                     pPass-&gt;<a class="code" href="structOgre_1_1Quake3Shader_1_1Pass.html#Ogre_1_1Quake3Shader_1_1Passm18">tcModStretchWave</a> = <a class="code" href="OgreQuake3Types_8h.html#a96a77">SHADER_FUNC_TRIANGLE</a>;
00364                 <font class="keywordflow">else</font> <font class="keywordflow">if</font> (params[2] == <font class="stringliteral">"square"</font>)
00365                     pPass-&gt;<a class="code" href="structOgre_1_1Quake3Shader_1_1Pass.html#Ogre_1_1Quake3Shader_1_1Passm18">tcModStretchWave</a> = <a class="code" href="OgreQuake3Types_8h.html#a96a78">SHADER_FUNC_SQUARE</a>;
00366                 <font class="keywordflow">else</font> <font class="keywordflow">if</font> (params[2] == <font class="stringliteral">"sawtooth"</font>)
00367                     pPass-&gt;<a class="code" href="structOgre_1_1Quake3Shader_1_1Pass.html#Ogre_1_1Quake3Shader_1_1Passm18">tcModStretchWave</a> = <a class="code" href="OgreQuake3Types_8h.html#a96a79">SHADER_FUNC_SAWTOOTH</a>;
00368                 <font class="keywordflow">else</font> <font class="keywordflow">if</font> (params[2] == <font class="stringliteral">"inversesawtooth"</font>)
00369                     pPass-&gt;<a class="code" href="structOgre_1_1Quake3Shader_1_1Pass.html#Ogre_1_1Quake3Shader_1_1Passm18">tcModStretchWave</a> = <a class="code" href="OgreQuake3Types_8h.html#a96a80">SHADER_FUNC_INVERSESAWTOOTH</a>;
00370 
00371                 pPass-&gt;<a class="code" href="structOgre_1_1Quake3Shader_1_1Pass.html#Ogre_1_1Quake3Shader_1_1Passm19">tcModStretchParams</a>[0] = atof(params[3]);
00372                 pPass-&gt;<a class="code" href="structOgre_1_1Quake3Shader_1_1Pass.html#Ogre_1_1Quake3Shader_1_1Passm19">tcModStretchParams</a>[1] = atof(params[4]);
00373                 pPass-&gt;<a class="code" href="structOgre_1_1Quake3Shader_1_1Pass.html#Ogre_1_1Quake3Shader_1_1Passm19">tcModStretchParams</a>[2] = atof(params[5]);
00374                 pPass-&gt;<a class="code" href="structOgre_1_1Quake3Shader_1_1Pass.html#Ogre_1_1Quake3Shader_1_1Passm19">tcModStretchParams</a>[3] = atof(params[6]);
00375 
00376             }
00377         }
00378         <font class="comment">// TURB</font>
00379         <font class="keywordflow">else</font> <font class="keywordflow">if</font> (params[0] == <font class="stringliteral">"turb"</font>)
00380         {
00381             pPass-&gt;<a class="code" href="structOgre_1_1Quake3Shader_1_1Pass.html#Ogre_1_1Quake3Shader_1_1Passm16">tcModTurbOn</a> = <font class="keyword">true</font>;
00382             pPass-&gt;<a class="code" href="structOgre_1_1Quake3Shader_1_1Pass.html#Ogre_1_1Quake3Shader_1_1Passm17">tcModTurb</a>[0] = atof(params[2]);
00383             pPass-&gt;<a class="code" href="structOgre_1_1Quake3Shader_1_1Pass.html#Ogre_1_1Quake3Shader_1_1Passm17">tcModTurb</a>[1] = atof(params[3]);
00384             pPass-&gt;<a class="code" href="structOgre_1_1Quake3Shader_1_1Pass.html#Ogre_1_1Quake3Shader_1_1Passm17">tcModTurb</a>[2] = atof(params[4]);
00385             pPass-&gt;<a class="code" href="structOgre_1_1Quake3Shader_1_1Pass.html#Ogre_1_1Quake3Shader_1_1Passm17">tcModTurb</a>[3] = atof(params[5]);
00386         }
00387         <font class="comment">// DEPTHFUNC</font>
00388         <font class="keywordflow">else</font> <font class="keywordflow">if</font> (params[0] == <font class="stringliteral">"depthfunc"</font>)
00389         {
00390             <font class="comment">// TODO</font>
00391         }
00392         <font class="comment">// DEPTHWRITE</font>
00393         <font class="keywordflow">else</font> <font class="keywordflow">if</font> (params[0] == <font class="stringliteral">"depthwrite"</font>)
00394         {
00395             <font class="comment">// TODO</font>
00396         }
00397         <font class="comment">// ALPHAFUNC</font>
00398         <font class="keywordflow">else</font> <font class="keywordflow">if</font> (params[0] == <font class="stringliteral">"alphafunc"</font>)
00399         {
00400             <font class="keywordflow">if</font> (params[1] == <font class="stringliteral">"gt0"</font>)
00401             {
00402                 pPass-&gt;<a class="code" href="structOgre_1_1Quake3Shader_1_1Pass.html#Ogre_1_1Quake3Shader_1_1Passm21">alphaVal</a> = 0;
00403                 pPass-&gt;<a class="code" href="structOgre_1_1Quake3Shader_1_1Pass.html#Ogre_1_1Quake3Shader_1_1Passm20">alphaFunc</a> = <a class="code" href="namespaceOgre.html#a426a73">CMPF_GREATER</a>;
00404             }
00405             <font class="keywordflow">else</font> <font class="keywordflow">if</font> (params[1] == <font class="stringliteral">"ge128"</font>)
00406             {
00407                 pPass-&gt;<a class="code" href="structOgre_1_1Quake3Shader_1_1Pass.html#Ogre_1_1Quake3Shader_1_1Passm21">alphaVal</a> = 128;
00408                 pPass-&gt;<a class="code" href="structOgre_1_1Quake3Shader_1_1Pass.html#Ogre_1_1Quake3Shader_1_1Passm20">alphaFunc</a> = <a class="code" href="namespaceOgre.html#a426a72">CMPF_GREATER_EQUAL</a>;
00409             }
00410             <font class="keywordflow">else</font> <font class="keywordflow">if</font> (params[1] == <font class="stringliteral">"lt128"</font>)
00411             {
00412                 pPass-&gt;<a class="code" href="structOgre_1_1Quake3Shader_1_1Pass.html#Ogre_1_1Quake3Shader_1_1Passm21">alphaVal</a> = 128;
00413                 pPass-&gt;<a class="code" href="structOgre_1_1Quake3Shader_1_1Pass.html#Ogre_1_1Quake3Shader_1_1Passm20">alphaFunc</a> = <a class="code" href="namespaceOgre.html#a426a68">CMPF_LESS</a>;
00414             }
00415         }
00416 
00417 
00418 
00419     }
00420     <font class="comment">//-----------------------------------------------------------------------</font>
<a name="l00421"></a><a class="code" href="classOgre_1_1Quake3ShaderManager.html#Ogre_1_1Quake3ShaderManagerb3">00421</a>     <a class="code" href="namespaceOgre.html#a422">SceneBlendFactor</a> Quake3ShaderManager::convertBlendFunc( <font class="keyword">const</font> <a class="code" href="classOgre_1_1String.html">String</a>&amp; q3func)
00422     {
00423         <font class="keywordflow">if</font> (q3func == <font class="stringliteral">"gl_one"</font>)
00424         {
00425             <font class="keywordflow">return</font> <a class="code" href="namespaceOgre.html#a422a40">SBF_ONE</a>;
00426         }
00427         <font class="keywordflow">else</font> <font class="keywordflow">if</font> (q3func == <font class="stringliteral">"gl_zero"</font>)
00428         {
00429             <font class="keywordflow">return</font> <a class="code" href="namespaceOgre.html#a422a41">SBF_ZERO</a>;
00430         }
00431         <font class="keywordflow">else</font> <font class="keywordflow">if</font> (q3func == <font class="stringliteral">"gl_dst_color"</font>)
00432         {
00433             <font class="keywordflow">return</font> <a class="code" href="namespaceOgre.html#a422a42">SBF_DEST_COLOUR</a>;
00434         }
00435         <font class="keywordflow">else</font> <font class="keywordflow">if</font> (q3func == <font class="stringliteral">"gl_src_color"</font>)
00436         {
00437             <font class="keywordflow">return</font> <a class="code" href="namespaceOgre.html#a422a43">SBF_SOURCE_COLOUR</a>;
00438         }
00439         <font class="keywordflow">else</font> <font class="keywordflow">if</font> (q3func == <font class="stringliteral">"gl_one_minus_dest_color"</font>)
00440         {
00441             <font class="keywordflow">return</font> <a class="code" href="namespaceOgre.html#a422a44">SBF_ONE_MINUS_DEST_COLOUR</a>;
00442         }
00443         <font class="keywordflow">else</font> <font class="keywordflow">if</font> (q3func == <font class="stringliteral">"gl_src_alpha"</font>)
00444         {
00445             <font class="keywordflow">return</font> <a class="code" href="namespaceOgre.html#a422a47">SBF_SOURCE_ALPHA</a>;
00446         }
00447         <font class="keywordflow">else</font> <font class="keywordflow">if</font> (q3func == <font class="stringliteral">"gl_one_minus_src_alpha"</font>)
00448         {
00449             <font class="keywordflow">return</font> <a class="code" href="namespaceOgre.html#a422a49">SBF_ONE_MINUS_SOURCE_ALPHA</a>;
00450         }
00451 
00452         <font class="comment">// Default if unrecognised</font>
00453         <font class="keywordflow">return</font> <a class="code" href="namespaceOgre.html#a422a40">SBF_ONE</a>;
00454 
00455     }
00456     <font class="comment">//-----------------------------------------------------------------------</font>
<a name="l00457"></a><a class="code" href="classOgre_1_1Quake3ShaderManager.html#Ogre_1_1Quake3ShaderManagerd0">00457</a>     <a class="code" href="classOgre_1_1Quake3ShaderManager.html">Quake3ShaderManager</a>&amp; Quake3ShaderManager::getSingleton(<font class="keywordtype">void</font>)
00458     {
00459         <font class="keywordflow">return</font> <a class="code" href="classOgre_1_1Singleton.html">Singleton&lt;Quake3ShaderManager&gt;::getSingleton</a>();
00460     }
00461 
00462 }
</pre></div><p>
Copyright &copy; 2002 by The OGRE Team<br />
<script type="text/javascript">
<!--//hide script from old browsers
document.write( "Last modified "+ document.lastModified );
//end hiding contents -->
</script>
</p>
</body>
</html>
