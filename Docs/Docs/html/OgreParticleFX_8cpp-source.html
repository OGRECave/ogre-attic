<html>
<head>
<title>OGRE Documentation</title> <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"> 
<link type="text/css" rel="stylesheet" href="style.css">
</head>

<body>
<!-- Generated by Doxygen 1.2.16 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="namespaces.html">Namespace List</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="namespacemembers.html">Namespace Members</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; <a class="qindex" href="pages.html">Related Pages</a> &nbsp; </center>
<hr><h1>OgreParticleFX.cpp</h1><a href="OgreParticleFX_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <font class="comment">/*</font>
00002 <font class="comment">-----------------------------------------------------------------------------</font>
00003 <font class="comment">This source file is part of OGRE</font>
00004 <font class="comment">    (Object-oriented Graphics Rendering Engine)</font>
00005 <font class="comment">For the latest info, see http://www.stevestreeting.com/ogre/</font>
00006 <font class="comment"></font>
00007 <font class="comment">Copyright © 2000-2002 Steven J. Streeting</font>
00008 <font class="comment">Also see acknowledgements in Readme.html</font>
00009 <font class="comment"></font>
00010 <font class="comment">This program is free software; you can redistribute it and/or modify it under</font>
00011 <font class="comment">the terms of the GNU General Public License as published by the Free Software</font>
00012 <font class="comment">Foundation; either version 2 of the License, or (at your option) any later</font>
00013 <font class="comment">version.</font>
00014 <font class="comment"></font>
00015 <font class="comment">This program is distributed in the hope that it will be useful, but WITHOUT</font>
00016 <font class="comment">ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS</font>
00017 <font class="comment">FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.</font>
00018 <font class="comment"></font>
00019 <font class="comment">You should have received a copy of the GNU General Public License along with</font>
00020 <font class="comment">this program; if not, write to the Free Software Foundation, Inc., 59 Temple</font>
00021 <font class="comment">Place - Suite 330, Boston, MA 02111-1307, USA, or go to</font>
00022 <font class="comment">http://www.gnu.org/copyleft/gpl.html.</font>
00023 <font class="comment">-----------------------------------------------------------------------------</font>
00024 <font class="comment">*/</font>
00025 
00026 <font class="preprocessor">#include "<a class="code" href="OgreRoot_8h.html">OgreRoot.h</a>"</font>
00027 <font class="preprocessor">#include "<a class="code" href="OgreParticleSystemManager_8h.html">OgreParticleSystemManager.h</a>"</font>
00028 <font class="preprocessor">#include "<a class="code" href="OgreParticleAffectorFactory_8h.html">OgreParticleAffectorFactory.h</a>"</font>
00029 <font class="preprocessor">#include "<a class="code" href="OgreParticleEmitterFactory_8h.html">OgreParticleEmitterFactory.h</a>"</font>
00030 
00031 <font class="preprocessor">#include "<a class="code" href="OgrePointEmitterFactory_8h.html">OgrePointEmitterFactory.h</a>"</font>
00032 <font class="preprocessor">#include "<a class="code" href="OgreBoxEmitterFactory_8h.html">OgreBoxEmitterFactory.h</a>"</font>
00033 <font class="preprocessor">#include "<a class="code" href="OgreEllipsoidEmitterFactory_8h.html">OgreEllipsoidEmitterFactory.h</a>"</font>
00034 <font class="preprocessor">#include "<a class="code" href="OgreHollowEllipsoidEmitterFactory_8h.html">OgreHollowEllipsoidEmitterFactory.h</a>"</font>
00035 <font class="preprocessor">#include "<a class="code" href="OgreRingEmitterFactory_8h.html">OgreRingEmitterFactory.h</a>"</font>
00036 <font class="preprocessor">#include "<a class="code" href="OgreCylinderEmitterFactory_8h.html">OgreCylinderEmitterFactory.h</a>"</font>
00037 <font class="preprocessor">#include "<a class="code" href="OgreLinearForceAffectorFactory_8h.html">OgreLinearForceAffectorFactory.h</a>"</font>
00038 <font class="preprocessor">#include "<a class="code" href="OgreColourFaderAffectorFactory_8h.html">OgreColourFaderAffectorFactory.h</a>"</font>
00039 
00040 <font class="keyword">namespace </font>Ogre {
00041 
<a name="l00042"></a><a class="code" href="namespaceOgre.html#a350">00042</a>     std::vector&lt;ParticleEmitterFactory*&gt; <a class="code" href="namespaceOgre.html#a350">emitterFactories</a>;
<a name="l00043"></a><a class="code" href="namespaceOgre.html#a351">00043</a>     std::vector&lt;ParticleAffectorFactory*&gt; <a class="code" href="namespaceOgre.html#a351">affectorFactories</a>;
00044 
00045     <font class="comment">//-----------------------------------------------------------------------</font>
<a name="l00046"></a><a class="code" href="namespaceOgre.html#a406">00046</a>     <font class="keywordtype">void</font> <a class="code" href="namespaceOgre.html#a406">registerParticleFactories</a>(<font class="keywordtype">void</font>)
00047     {
00048         <font class="comment">// -- Create all new particle emitter factories --</font>
00049         <a class="code" href="classOgre_1_1ParticleEmitterFactory.html">ParticleEmitterFactory</a>* pEmitFact;
00050 
00051         <font class="comment">// PointEmitter</font>
00052         pEmitFact = <font class="keyword">new</font> <a class="code" href="classOgre_1_1PointEmitterFactory.html">PointEmitterFactory</a>();
00053         ParticleSystemManager::getSingleton().addEmitterFactory(pEmitFact);
00054         <a class="code" href="namespaceOgre.html#a350">emitterFactories</a>.push_back(pEmitFact);
00055 
00056         <font class="comment">// BoxEmitter</font>
00057         pEmitFact = <font class="keyword">new</font> <a class="code" href="classOgre_1_1BoxEmitterFactory.html">BoxEmitterFactory</a>();
00058         ParticleSystemManager::getSingleton().addEmitterFactory(pEmitFact);
00059         <a class="code" href="namespaceOgre.html#a350">emitterFactories</a>.push_back(pEmitFact);
00060 
00061         <font class="comment">// EllipsoidEmitter</font>
00062         pEmitFact = <font class="keyword">new</font> <a class="code" href="classOgre_1_1EllipsoidEmitterFactory.html">EllipsoidEmitterFactory</a>();
00063         ParticleSystemManager::getSingleton().addEmitterFactory(pEmitFact);
00064         <a class="code" href="namespaceOgre.html#a350">emitterFactories</a>.push_back(pEmitFact);
00065         
00066         <font class="comment">// CylinderEmitter</font>
00067         pEmitFact = <font class="keyword">new</font> <a class="code" href="classOgre_1_1CylinderEmitterFactory.html">CylinderEmitterFactory</a>();
00068         ParticleSystemManager::getSingleton().addEmitterFactory(pEmitFact);
00069         <a class="code" href="namespaceOgre.html#a350">emitterFactories</a>.push_back(pEmitFact);
00070     
00071         <font class="comment">// RingEmitter</font>
00072         pEmitFact = <font class="keyword">new</font> <a class="code" href="classOgre_1_1RingEmitterFactory.html">RingEmitterFactory</a>();
00073         ParticleSystemManager::getSingleton().addEmitterFactory(pEmitFact);
00074         <a class="code" href="namespaceOgre.html#a350">emitterFactories</a>.push_back(pEmitFact);
00075 
00076         <font class="comment">// HollowEllipsoidEmitter</font>
00077         pEmitFact = <font class="keyword">new</font> <a class="code" href="classOgre_1_1HollowEllipsoidEmitterFactory.html">HollowEllipsoidEmitterFactory</a>();
00078         ParticleSystemManager::getSingleton().addEmitterFactory(pEmitFact);
00079         <a class="code" href="namespaceOgre.html#a350">emitterFactories</a>.push_back(pEmitFact);
00080 
00081         <font class="comment">// -- Create all new particle affector factories --</font>
00082         <a class="code" href="classOgre_1_1ParticleAffectorFactory.html">ParticleAffectorFactory</a>* pAffFact;
00083 
00084         <font class="comment">// LinearForceAffector</font>
00085         pAffFact = <font class="keyword">new</font> <a class="code" href="classOgre_1_1LinearForceAffectorFactory.html">LinearForceAffectorFactory</a>();
00086         ParticleSystemManager::getSingleton().addAffectorFactory(pAffFact);
00087         <a class="code" href="namespaceOgre.html#a351">affectorFactories</a>.push_back(pAffFact);
00088 
00089         <font class="comment">// ColourFaderAffector</font>
00090         pAffFact = <font class="keyword">new</font> <a class="code" href="classOgre_1_1ColourFaderAffectorFactory.html">ColourFaderAffectorFactory</a>();
00091         ParticleSystemManager::getSingleton().addAffectorFactory(pAffFact);
00092         <a class="code" href="namespaceOgre.html#a351">affectorFactories</a>.push_back(pAffFact);
00093 
00094     }
00095     <font class="comment">//-----------------------------------------------------------------------</font>
<a name="l00096"></a><a class="code" href="namespaceOgre.html#a407">00096</a>     <font class="keywordtype">void</font> <a class="code" href="namespaceOgre.html#a407">destroyParticleFactories</a>(<font class="keywordtype">void</font>)
00097     {
00098         std::vector&lt;ParticleEmitterFactory*&gt;::iterator ei;
00099         std::vector&lt;ParticleAffectorFactory*&gt;::iterator ai;
00100 
00101         <font class="keywordflow">for</font> (ei = <a class="code" href="namespaceOgre.html#a350">emitterFactories</a>.begin(); ei != <a class="code" href="namespaceOgre.html#a350">emitterFactories</a>.end(); ++ei)
00102         {
00103             <font class="keyword">delete</font> (*ei);
00104         }
00105 
00106         <font class="keywordflow">for</font> (ai = <a class="code" href="namespaceOgre.html#a351">affectorFactories</a>.begin(); ai != <a class="code" href="namespaceOgre.html#a351">affectorFactories</a>.end(); ++ai)
00107         {
00108             <font class="keyword">delete</font> (*ai);
00109         }
00110 
00111 
00112     }
00113     <font class="comment">//-----------------------------------------------------------------------</font>
00114     <font class="keyword">extern</font> <font class="stringliteral">"C"</font> <font class="keywordtype">void</font> <a class="code" href="namespaceOgre.html#a396">dllStartPlugin</a>(<font class="keywordtype">void</font>) <font class="keywordflow">throw</font>()
00115     {
00116         <font class="comment">// Particle SFX</font>
00117         <a class="code" href="namespaceOgre.html#a406">registerParticleFactories</a>();
00118     }
00119 
00120     <font class="comment">//-----------------------------------------------------------------------</font>
00121     <font class="keyword">extern</font> <font class="stringliteral">"C"</font> <font class="keywordtype">void</font> <a class="code" href="namespaceOgre.html#a397">dllStopPlugin</a>(<font class="keywordtype">void</font>)
00122     {
00123         <font class="comment">// Particle SFX</font>
00124         <a class="code" href="namespaceOgre.html#a407">destroyParticleFactories</a>();
00125 
00126     }
00127 
00128 
00129 }
00130 
</pre></div><p>
Copyright &copy; 2002 by The OGRE Team<br />
<script type="text/javascript">
<!--//hide script from old browsers
document.write( "Last modified "+ document.lastModified );
//end hiding contents -->
</script>
</p>
</body>
</html>
