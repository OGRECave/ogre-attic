<html>
<head>
<title>OGRE Documentation</title> <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"> 
<link type="text/css" rel="stylesheet" href="style.css">
</head>

<body>
<!-- Generated by Doxygen 1.2.16 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="namespaces.html">Namespace List</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="namespacemembers.html">Namespace Members</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; <a class="qindex" href="pages.html">Related Pages</a> &nbsp; </center>
<hr><h1>OgreBillboardSet.cpp</h1><a href="OgreBillboardSet_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <font class="comment">/*</font>
00002 <font class="comment">-----------------------------------------------------------------------------</font>
00003 <font class="comment">This source file is part of OGRE</font>
00004 <font class="comment">    (Object-oriented Graphics Rendering Engine)</font>
00005 <font class="comment">For the latest info, see http://www.stevestreeting.com/ogre/</font>
00006 <font class="comment"></font>
00007 <font class="comment">Copyright © 2000-2001 Steven J. Streeting</font>
00008 <font class="comment">Also see acknowledgements in Readme.html</font>
00009 <font class="comment"></font>
00010 <font class="comment">This program is free software; you can redistribute it and/or modify it under</font>
00011 <font class="comment">the terms of the GNU General Public License as published by the Free Software</font>
00012 <font class="comment">Foundation; either version 2 of the License, or (at your option) any later</font>
00013 <font class="comment">version.</font>
00014 <font class="comment"></font>
00015 <font class="comment">This program is distributed in the hope that it will be useful, but WITHOUT</font>
00016 <font class="comment">ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS</font>
00017 <font class="comment">FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.</font>
00018 <font class="comment"></font>
00019 <font class="comment">You should have received a copy of the GNU General Public License along with</font>
00020 <font class="comment">this program; if not, write to the Free Software Foundation, Inc., 59 Temple</font>
00021 <font class="comment">Place - Suite 330, Boston, MA 02111-1307, USA, or go to</font>
00022 <font class="comment">http://www.gnu.org/copyleft/gpl.html.</font>
00023 <font class="comment">-----------------------------------------------------------------------------</font>
00024 <font class="comment">*/</font>
00025 
00026 <font class="preprocessor">#include "<a class="code" href="OgreBillboardSet_8h.html">OgreBillboardSet.h</a>"</font>
00027 
00028 <font class="preprocessor">#include "<a class="code" href="OgreMaterialManager_8h.html">OgreMaterialManager.h</a>"</font>
00029 <font class="preprocessor">#include "<a class="code" href="OgreCamera_8h.html">OgreCamera.h</a>"</font>
00030 <font class="preprocessor">#include "<a class="code" href="OgreMath_8h.html">OgreMath.h</a>"</font>
00031 <font class="preprocessor">#include "<a class="code" href="OgreSphere_8h.html">OgreSphere.h</a>"</font>
00032 <font class="preprocessor">#include "<a class="code" href="OgreRoot_8h.html">OgreRoot.h</a>"</font>
00033 <font class="preprocessor">#include &lt;algorithm&gt;</font>
00034 
00035 <font class="keyword">namespace </font>Ogre {
00036 
<a name="l00037"></a><a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemq7">00037</a>     <a class="code" href="classOgre_1_1String.html">String</a> BillboardSet::msMovableType = <font class="stringliteral">"BillboardSet"</font>;
00038     <font class="comment">//-----------------------------------------------------------------------</font>
<a name="l00039"></a><a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1BillboardSetb0">00039</a>     BillboardSet::BillboardSet() :
00040         mOriginType( <a class="code" href="namespaceOgre.html#a415a5">BBO_CENTER</a> ),
00041         mAllDefaultSize( true ),
00042         mAutoExtendPool( true ),
00043         mpPositions( 0 ),
00044         mpColours( 0 ),
00045         mpTexCoords( 0 ),
00046         mpIndexes(0),
00047         mCullIndividual( false ),
00048         mBillboardType(<a class="code" href="namespaceOgre.html#a416a10">BBT_POINT</a>)
00049     {
00050         <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystema36">setDefaultDimensions</a>( 100, 100 );
00051         <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystema41">setMaterialName</a>( <font class="stringliteral">"BaseWhite"</font> );
00052     }
00053 
00054     <font class="comment">//-----------------------------------------------------------------------</font>
<a name="l00055"></a><a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1BillboardSeta0">00055</a>     BillboardSet::BillboardSet(
00056         <font class="keyword">const</font> <a class="code" href="classOgre_1_1String.html">String</a>&amp; name,
00057         <font class="keywordtype">unsigned</font> <font class="keywordtype">int</font> poolSize ) :
00058         mName( name ),
00059         mOriginType( <a class="code" href="namespaceOgre.html#a415a5">BBO_CENTER</a> ),
00060         mAllDefaultSize( true ),
00061         mAutoExtendPool( true ),
00062         mpPositions( 0 ),
00063         mpColours( 0 ),
00064         mpTexCoords( 0 ),
00065         mpIndexes(0),
00066         mCullIndividual( false ),
00067         mBillboardType(<a class="code" href="namespaceOgre.html#a416a10">BBT_POINT</a>)
00068     {
00069         <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystema36">setDefaultDimensions</a>( 100, 100 );
00070         <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystema41">setMaterialName</a>( <font class="stringliteral">"BaseWhite"</font> );
00071         <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystema28">setPoolSize</a>( poolSize );
00072     }
00073     <font class="comment">//-----------------------------------------------------------------------</font>
<a name="l00074"></a><a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1BillboardSeta1">00074</a>     BillboardSet::~BillboardSet()
00075     {
00076         <font class="comment">// Free pool items</font>
00077         BillboardPool::iterator i;
00078         <font class="keywordflow">for</font> (i = <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemn13">mBillboardPool</a>.begin(); i != <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemn13">mBillboardPool</a>.end(); ++i)
00079         {
00080             <font class="keyword">delete</font> *i;
00081         }
00082 
00083     }
00084     <font class="comment">//-----------------------------------------------------------------------</font>
<a name="l00085"></a><a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystema23">00085</a>     <a class="code" href="classOgre_1_1Billboard.html">Billboard</a>* BillboardSet::createBillboard(
00086         <font class="keyword">const</font> <a class="code" href="classOgre_1_1Vector3.html">Vector3</a>&amp; position,
00087         <font class="keyword">const</font> <a class="code" href="classOgre_1_1ColourValue.html">ColourValue</a>&amp; colour )
00088     {
00089         <font class="keywordflow">if</font>( <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemn12">mFreeBillboards</a>.empty() )
00090         {
00091             <font class="keywordflow">if</font>( mAutoExtendPool )
00092             {
00093                 <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystema28">setPoolSize</a>( <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystema29">getPoolSize</a>() * 2 );
00094             }
00095             <font class="keywordflow">else</font>
00096             {
00097                 <font class="keywordflow">return</font> 0;
00098             }
00099         }
00100 
00101         <font class="comment">// Get a new billboard</font>
00102         <a class="code" href="classOgre_1_1Billboard.html">Billboard</a>* newBill = <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemn12">mFreeBillboards</a>.front();
00103         <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemn12">mFreeBillboards</a>.pop_front();
00104         <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemn11">mActiveBillboards</a>.push_back(newBill);
00105 
00106         newBill-&gt;<a class="code" href="classOgre_1_1Billboard.html#Ogre_1_1Particlea1">setPosition</a>(position);
00107         newBill-&gt;<a class="code" href="classOgre_1_1Billboard.html#Ogre_1_1Particlea5">setColour</a>(colour);
00108         newBill-&gt;<a class="code" href="classOgre_1_1Billboard.html#Ogre_1_1Particlea8">_notifyOwner</a>(<font class="keyword">this</font>);
00109 
00110         <font class="keywordflow">return</font> newBill;
00111     }
00112 
00113     <font class="comment">//-----------------------------------------------------------------------</font>
<a name="l00114"></a><a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystema24">00114</a>     <a class="code" href="classOgre_1_1Billboard.html">Billboard</a>* BillboardSet::createBillboard(
00115         <a class="code" href="namespaceOgre.html#a281">Real</a> x, <a class="code" href="namespaceOgre.html#a281">Real</a> y, <a class="code" href="namespaceOgre.html#a281">Real</a> z,
00116         <font class="keyword">const</font> <a class="code" href="classOgre_1_1ColourValue.html">ColourValue</a>&amp; colour )
00117     {
00118         <font class="keywordflow">return</font> <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystema23">createBillboard</a>( <a class="code" href="classOgre_1_1Vector3.html">Vector3</a>( x, y, z ), colour );
00119     }
00120 
00121     <font class="comment">//-----------------------------------------------------------------------</font>
<a name="l00122"></a><a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystema25">00122</a>     <font class="keywordtype">int</font> BillboardSet::getNumBillboards(<font class="keywordtype">void</font>)<font class="keyword"> const</font>
00123 <font class="keyword">    </font>{
00124         <font class="keywordflow">return</font> static_cast&lt; int &gt;( <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemn11">mActiveBillboards</a>.size() );
00125     }
00126 
00127     <font class="comment">//-----------------------------------------------------------------------</font>
<a name="l00128"></a><a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystema30">00128</a>     <font class="keywordtype">void</font> BillboardSet::clear()
00129     {
00130         <font class="comment">// Remove all active instances</font>
00131         <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemn11">mActiveBillboards</a>.clear();
00132     }
00133 
00134     <font class="comment">//-----------------------------------------------------------------------</font>
<a name="l00135"></a><a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystema31">00135</a>     <a class="code" href="classOgre_1_1Billboard.html">Billboard</a>* BillboardSet::getBillboard( <font class="keywordtype">unsigned</font> <font class="keywordtype">int</font> index )<font class="keyword"> const</font>
00136 <font class="keyword">    </font>{
00137         <a class="code" href="OgreException_8h.html#a4">OgreAssert</a>(
00138             index &lt; <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemn11">mActiveBillboards</a>.size(),
00139             <font class="stringliteral">"Billboard index out of bounds."</font> );
00140 
00141         <font class="comment">/* We can't access it directly, so we check wether it's in the first</font>
00142 <font class="comment">           or the second half, then we start either from the beginning or the</font>
00143 <font class="comment">           end of the list</font>
00144 <font class="comment">        */</font>
00145         ActiveBillboardList::const_iterator it;
00146         <font class="keywordflow">if</font>( index &gt;= ( <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemn11">mActiveBillboards</a>.size() &gt;&gt; 1 ) )
00147         {
00148             <font class="keywordflow">for</font>( it = <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemn11">mActiveBillboards</a>.end(); index; --index, --it );
00149         }
00150         <font class="keywordflow">else</font>
00151         {
00152             <font class="keywordflow">for</font>( it = <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemn11">mActiveBillboards</a>.begin(); index; --index, ++it );
00153         }
00154 
00155         <font class="keywordflow">return</font> *it;
00156     }
00157 
00158     <font class="comment">//-----------------------------------------------------------------------</font>
<a name="l00159"></a><a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystema32">00159</a>     <font class="keywordtype">void</font> BillboardSet::removeBillboard(<font class="keywordtype">unsigned</font> <font class="keywordtype">int</font> index)
00160     {
00161         assert(
00162             index &lt; <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemn11">mActiveBillboards</a>.size() &amp;&amp;
00163             <font class="stringliteral">"Billboard index out of bounds."</font> );
00164 
00165         <font class="comment">/* We can't access it directly, so we check wether it's in the first</font>
00166 <font class="comment">           or the second half, then we start either from the beginning or the</font>
00167 <font class="comment">           end of the list.</font>
00168 <font class="comment">           We then remove the billboard form the 'used' list and add it to</font>
00169 <font class="comment">           the 'free' list.</font>
00170 <font class="comment">        */</font>
00171         ActiveBillboardList::iterator it;
00172         <font class="keywordflow">if</font>( index &gt;= ( <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemn11">mActiveBillboards</a>.size() &gt;&gt; 1 ) )
00173         {
00174             <font class="keywordflow">for</font>( it = <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemn11">mActiveBillboards</a>.end(); index; --index, --it );
00175         }
00176         <font class="keywordflow">else</font>
00177         {
00178             <font class="keywordflow">for</font>( it = <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemn11">mActiveBillboards</a>.begin(); index; --index, ++it );
00179         }
00180 
00181         <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemn12">mFreeBillboards</a>.push_back( *it );
00182         <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemn11">mActiveBillboards</a>.erase( it );
00183     }
00184 
00185     <font class="comment">//-----------------------------------------------------------------------</font>
<a name="l00186"></a><a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystema33">00186</a>     <font class="keywordtype">void</font> BillboardSet::removeBillboard( <a class="code" href="classOgre_1_1Billboard.html">Billboard</a>* pBill )
00187     {
00188         <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemn11">mActiveBillboards</a>.remove( pBill );
00189         <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemn12">mFreeBillboards</a>.push_back( pBill );
00190     }
00191 
00192     <font class="comment">//-----------------------------------------------------------------------</font>
<a name="l00193"></a><a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystema34">00193</a>     <font class="keywordtype">void</font> BillboardSet::setBillboardOrigin( <a class="code" href="namespaceOgre.html#a415">BillboardOrigin</a> origin )
00194     {
00195         <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemn4">mOriginType</a> = origin;
00196     }
00197 
00198     <font class="comment">//-----------------------------------------------------------------------</font>
<a name="l00199"></a><a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystema35">00199</a>     <a class="code" href="namespaceOgre.html#a415">BillboardOrigin</a> BillboardSet::getBillboardOrigin(<font class="keywordtype">void</font>)<font class="keyword"> const</font>
00200 <font class="keyword">    </font>{
00201         <font class="keywordflow">return</font> <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemn4">mOriginType</a>;
00202     }
00203 
00204     <font class="comment">//-----------------------------------------------------------------------</font>
<a name="l00205"></a><a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystema36">00205</a>     <font class="keywordtype">void</font> BillboardSet::setDefaultDimensions( <a class="code" href="namespaceOgre.html#a281">Real</a> width, <a class="code" href="namespaceOgre.html#a281">Real</a> height )
00206     {
00207         <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemn5">mDefaultWidth</a> = width;
00208         <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemn6">mDefaultHeight</a> = height;
00209     }
00210     <font class="comment">//-----------------------------------------------------------------------</font>
<a name="l00211"></a><a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystema37">00211</a>     <font class="keywordtype">void</font> BillboardSet::setDefaultWidth(<a class="code" href="namespaceOgre.html#a281">Real</a> width)
00212     {
00213         <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemn5">mDefaultWidth</a> = width;
00214     }
00215     <font class="comment">//-----------------------------------------------------------------------</font>
<a name="l00216"></a><a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystema38">00216</a>     <a class="code" href="namespaceOgre.html#a281">Real</a> BillboardSet::getDefaultWidth(<font class="keywordtype">void</font>)
00217     {
00218         <font class="keywordflow">return</font> <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemn5">mDefaultWidth</a>;
00219     }
00220     <font class="comment">//-----------------------------------------------------------------------</font>
<a name="l00221"></a><a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystema39">00221</a>     <font class="keywordtype">void</font> BillboardSet::setDefaultHeight(<a class="code" href="namespaceOgre.html#a281">Real</a> height)
00222     {
00223         <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemn6">mDefaultHeight</a> = height;
00224     }
00225     <font class="comment">//-----------------------------------------------------------------------</font>
<a name="l00226"></a><a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystema40">00226</a>     <a class="code" href="namespaceOgre.html#a281">Real</a> BillboardSet::getDefaultHeight(<font class="keywordtype">void</font>)
00227     {
00228         <font class="keywordflow">return</font> <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemn6">mDefaultHeight</a>;
00229     }
00230     <font class="comment">//-----------------------------------------------------------------------</font>
<a name="l00231"></a><a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystema41">00231</a>     <font class="keywordtype">void</font> BillboardSet::setMaterialName( <font class="keyword">const</font> <a class="code" href="classOgre_1_1String.html">String</a>&amp; name )
00232     {
00233         <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemn7">mMaterialName</a> = name;
00234 
00235         <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemn8">mpMaterial</a> = static_cast&lt;Material *&gt;(
00236             MaterialManager::getSingleton().getByName(name) );
00237 
00238         <font class="comment">/* Ensure that the new material was loaded (will not load again if</font>
00239 <font class="comment">           already loaded anyway)</font>
00240 <font class="comment">        */</font>
00241         <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemn8">mpMaterial</a>-&gt;<a class="code" href="classOgre_1_1Material.html#Ogre_1_1Materiala52">load</a>();
00242     }
00243 
00244     <font class="comment">//-----------------------------------------------------------------------</font>
<a name="l00245"></a><a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystema42">00245</a>     <font class="keyword">const</font> <a class="code" href="classOgre_1_1String.html">String</a>&amp; BillboardSet::getMaterialName(<font class="keywordtype">void</font>)<font class="keyword"> const</font>
00246 <font class="keyword">    </font>{
00247         <font class="keywordflow">return</font> <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemn7">mMaterialName</a>;
00248     }
00249 
00250     <font class="comment">//-----------------------------------------------------------------------</font>
<a name="l00251"></a><a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1BillboardSeta22">00251</a>     <font class="keywordtype">void</font> BillboardSet::_notifyCurrentCamera( <a class="code" href="classOgre_1_1Camera.html">Camera</a>* cam )
00252     {
00253         <font class="keywordtype">unsigned</font> <font class="keywordtype">int</font> j;
00254         <font class="comment">/* Generate the vertices for all the billboards relative to the camera</font>
00255 <font class="comment">           Also take the opportunity to update the vertex colours</font>
00256 <font class="comment">           May as well do it here to save on loops elsewhere</font>
00257 <font class="comment">        */</font>
00258 
00259         <font class="comment">/* NOTE: most engines generate world coordinates for the billboards</font>
00260 <font class="comment">           directly, taking the world axes of the camera as offsets to the </font>
00261 <font class="comment">           center points. I take a different approach, reverse-transforming </font>
00262 <font class="comment">           the camera world axes into local billboard space. </font>
00263 <font class="comment">           Why?</font>
00264 <font class="comment">           Well, it's actually more efficient this way, because I only have to</font>
00265 <font class="comment">           reverse-transform using the billboardset world matrix (inverse) </font>
00266 <font class="comment">           once, from then on it's simple additions (assuming identically </font>
00267 <font class="comment">           sized billboards). If I transformed every billboard center by it's </font>
00268 <font class="comment">           world transform, that's a matrix multiplication per billboard </font>
00269 <font class="comment">           instead.</font>
00270 <font class="comment">           I leave the final transform to the render pipeline since that can </font>
00271 <font class="comment">           use hardware TnL if it is available.</font>
00272 <font class="comment">        */</font>
00273 
00274         <font class="comment">// Min and max bounds for AABB</font>
00275         <a class="code" href="classOgre_1_1Vector3.html">Vector3</a> min( Math::POS_INFINITY, Math::POS_INFINITY, Math::POS_INFINITY );
00276         <a class="code" href="classOgre_1_1Vector3.html">Vector3</a> max( Math::NEG_INFINITY, Math::NEG_INFINITY, Math::NEG_INFINITY );
00277 
00278         ActiveBillboardList::iterator it;
00279         <font class="comment">// Parametric offsets of origin</font>
00280         <a class="code" href="namespaceOgre.html#a281">Real</a> leftOff, rightOff, topOff, bottomOff;
00281 
00282         <font class="comment">// Boundary offsets based on origin and camera orientation</font>
00283         <font class="comment">// Vector3 vLeftOff, vRightOff, vTopOff, vBottomOff;</font>
00284         <font class="comment">// Final vertex offsets, used where sizes all default to save calcs</font>
00285         <a class="code" href="classOgre_1_1Vector3.html">Vector3</a> vOffset[4];
00286 
00287         <font class="comment">// Get offsets for origin type</font>
00288         <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemb9">getParametricOffsets</a>(leftOff, rightOff, topOff, bottomOff);
00289         <font class="comment">// Get camera axes in billboard space</font>
00290         <a class="code" href="classOgre_1_1Vector3.html">Vector3</a> camX, camY;
00291 
00292         <font class="comment">// Generate axes etc up-front if not oriented per-billboard</font>
00293         <font class="keywordflow">if</font> (<a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemn19">mBillboardType</a> != <a class="code" href="namespaceOgre.html#a416a12">BBT_ORIENTED_SELF</a>)
00294         {
00295             <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1BillboardSetb3">genBillboardAxes</a>(*cam, &amp;camX, &amp;camY);
00296 
00297             <font class="comment">/* If all billboards are the same size we can precalculate the</font>
00298 <font class="comment">               offsets and just use '+' instead of '*' for each billboard,</font>
00299 <font class="comment">               and it should be faster.</font>
00300 <font class="comment">            */</font>
00301             <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemb11">genVertOffsets</a>(leftOff, rightOff, topOff, bottomOff, 
00302                 <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemn5">mDefaultWidth</a>, <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemn6">mDefaultHeight</a>, camX, camY, vOffset);
00303 
00304         }
00305 
00306         <font class="comment">// Init num visible</font>
00307         <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemn21">mNumVisibleBillboards</a> = 0;
00308 
00309         <a class="code" href="namespaceOgre.html#a63">RGBA</a>* pC = <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemn15">mpColours</a>;
00310         <a class="code" href="namespaceOgre.html#a281">Real</a>* pV = <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemn14">mpPositions</a>;
00311 
00312         <font class="keywordflow">if</font>( mAllDefaultSize ) <font class="comment">// If they're all the same size</font>
00313         {
00314             <font class="comment">/* No per-billboard checking, just blast through.</font>
00315 <font class="comment">               Saves us an if clause every billboard which may</font>
00316 <font class="comment">               make a difference.</font>
00317 <font class="comment">            */</font>
00318             <font class="keywordflow">for</font>( it = <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemn11">mActiveBillboards</a>.begin();
00319                  it != <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemn11">mActiveBillboards</a>.end();
00320                  ++it )
00321             {
00322                 <font class="comment">// Skip if not visible (NB always true if not bounds checking individual billboards)</font>
00323                 <font class="keywordflow">if</font> (!<a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemb8">billboardVisible</a>(cam, it)) <font class="keywordflow">continue</font>;
00324 
00325                 <font class="keywordflow">if</font> (<a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemn19">mBillboardType</a> == <a class="code" href="namespaceOgre.html#a416a12">BBT_ORIENTED_SELF</a>)
00326                 {
00327                     <font class="comment">// Have to generate axes &amp; offsets per billboard</font>
00328                     <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1BillboardSetb3">genBillboardAxes</a>(*cam, &amp;camX, &amp;camY, *it);
00329                     <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemb11">genVertOffsets</a>(leftOff, rightOff, topOff, bottomOff, 
00330                         <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemn5">mDefaultWidth</a>, <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemn6">mDefaultHeight</a>, camX, camY, vOffset);
00331                 }
00332 
00333 
00334                 <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemb10">genVertices</a>(&amp;pV, &amp;pC, vOffset, *it);
00335 
00336                 <font class="comment">// Increment visibles</font>
00337                 <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemn21">mNumVisibleBillboards</a>++;
00338             }
00339         }
00340         <font class="keywordflow">else</font> <font class="comment">// not all default size</font>
00341         {
00342             <font class="keywordflow">for</font>( it = <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemn11">mActiveBillboards</a>.begin(); it != <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemn11">mActiveBillboards</a>.end(); ++it )
00343             {
00344                 <font class="comment">// Skip if not visible (NB always true if not bounds checking individual billboards)</font>
00345                 <font class="keywordflow">if</font> (!<a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemb8">billboardVisible</a>(cam, it)) <font class="keywordflow">continue</font>;
00346 
00347                 <font class="keywordflow">if</font> (<a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemn19">mBillboardType</a> == <a class="code" href="namespaceOgre.html#a416a12">BBT_ORIENTED_SELF</a>)
00348                 {
00349                     <font class="comment">// Have to generate axes &amp; offsets per billboard</font>
00350                     <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1BillboardSetb3">genBillboardAxes</a>(*cam, &amp;camX, &amp;camY, *it);
00351                 }
00352 
00353                 <font class="comment">// If it has own dimensions, or self-oriented, gen offsets</font>
00354                 <font class="keywordflow">if</font>( (*it)-&gt;mOwnDimensions || <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemn19">mBillboardType</a> == <a class="code" href="namespaceOgre.html#a416a12">BBT_ORIENTED_SELF</a> ) 
00355                 {
00356                     <font class="comment">// Generate using own dimensions</font>
00357                     <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemb11">genVertOffsets</a>(leftOff, rightOff, topOff, bottomOff, 
00358                         (*it)-&gt;mWidth, (*it)-&gt;mHeight, camX, camY, vOffset);
00359                 }
00360                 <font class="comment">// Create vertex data            </font>
00361                 <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemb10">genVertices</a>(&amp;pV, &amp;pC, vOffset, *it);
00362 
00363                 <font class="comment">// Increment visibles</font>
00364                 <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemn21">mNumVisibleBillboards</a>++;
00365 
00366             }
00367         }
00368 
00369         <font class="comment">// Update bounding box limits</font>
00370         <font class="keywordtype">unsigned</font> <font class="keywordtype">int</font> vertBufferSize = <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemn21">mNumVisibleBillboards</a> * 4 * 3;
00371 
00372         <font class="keywordflow">for</font>( j = 0; j &lt; vertBufferSize; j += 3 )
00373         {
00374                 min.<a class="code" href="classOgre_1_1Vector3.html#Ogre_1_1Vector3a29">makeFloor</a>( <a class="code" href="classOgre_1_1Vector3.html">Vector3</a>(
00375                                    <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemn14">mpPositions</a>[j],
00376                                    <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemn14">mpPositions</a>[j+1],
00377                                    <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemn14">mpPositions</a>[j+2] ) );
00378 
00379                 max.<a class="code" href="classOgre_1_1Vector3.html#Ogre_1_1Vector3a30">makeCeil</a>( <a class="code" href="classOgre_1_1Vector3.html">Vector3</a>(
00380                                    <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemn14">mpPositions</a>[j],
00381                                    <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemn14">mpPositions</a>[j+1],
00382                                    <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemn14">mpPositions</a>[j+2] ) );
00383         }
00384 
00385         <font class="comment">// Set AABB</font>
00386         <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemn3">mAABB</a>.<a class="code" href="classOgre_1_1AxisAlignedBox.html#Ogre_1_1AxisAlignedBoxa9">setExtents</a>(min, max);
00387     }
00388 
00389     <font class="comment">//-----------------------------------------------------------------------</font>
<a name="l00390"></a><a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystema43">00390</a>     <font class="keyword">const</font> <a class="code" href="classOgre_1_1AxisAlignedBox.html">AxisAlignedBox</a>&amp; BillboardSet::getBoundingBox(<font class="keywordtype">void</font>)<font class="keyword"> const</font>
00391 <font class="keyword">    </font>{
00392         <font class="keywordflow">return</font> <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemn3">mAABB</a>;
00393     }
00394 
00395     <font class="comment">//-----------------------------------------------------------------------    </font>
<a name="l00396"></a><a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystema44">00396</a>     <font class="keywordtype">void</font> BillboardSet::_updateRenderQueue(<a class="code" href="classOgre_1_1RenderQueue.html">RenderQueue</a>* queue)
00397     {
00398         queue-&gt;<a class="code" href="classOgre_1_1RenderQueue.html#Ogre_1_1RenderQueuea1">addRenderable</a>(<font class="keyword">this</font>);
00399     }
00400 
00401     <font class="comment">//-----------------------------------------------------------------------</font>
<a name="l00402"></a><a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystema45">00402</a>     <a class="code" href="classOgre_1_1Material.html">Material</a>* BillboardSet::getMaterial(<font class="keywordtype">void</font>)<font class="keyword"> const</font>
00403 <font class="keyword">    </font>{
00404         <font class="keywordflow">return</font> <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemn8">mpMaterial</a>;
00405     }
00406 
00407     <font class="comment">//-----------------------------------------------------------------------</font>
<a name="l00408"></a><a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystema46">00408</a>     <font class="keywordtype">void</font> BillboardSet::getRenderOperation(<a class="code" href="classOgre_1_1RenderOperation.html">RenderOperation</a>&amp; rend)
00409     {
00410         rend.<a class="code" href="classOgre_1_1RenderOperation.html#Ogre_1_1RenderOperationm0">useIndexes</a> = <font class="keyword">true</font>;
00411 
00412         rend.<a class="code" href="classOgre_1_1RenderOperation.html#Ogre_1_1RenderOperationm18">vertexOptions</a> = RenderOperation::VO_DIFFUSE_COLOURS | RenderOperation::VO_TEXTURE_COORDS;
00413         rend.<a class="code" href="classOgre_1_1RenderOperation.html#Ogre_1_1RenderOperationm19">operationType</a> = RenderOperation::OT_TRIANGLE_LIST;
00414 
00415         <font class="comment">// Texture-related flags</font>
00416         rend.<a class="code" href="classOgre_1_1RenderOperation.html#Ogre_1_1RenderOperationm9">numTextureCoordSets</a>     = 1;
00417         rend.<a class="code" href="classOgre_1_1RenderOperation.html#Ogre_1_1RenderOperationm10">numTextureDimensions</a>[0] = 2;
00418         rend.<a class="code" href="classOgre_1_1RenderOperation.html#Ogre_1_1RenderOperationm7">pTexCoords</a>[0]           = <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemn16">mpTexCoords</a>;
00419 
00420         rend.<a class="code" href="classOgre_1_1RenderOperation.html#Ogre_1_1RenderOperationm1">numVertices</a> = <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemn21">mNumVisibleBillboards</a> * 4;
00421         rend.<a class="code" href="classOgre_1_1RenderOperation.html#Ogre_1_1RenderOperationm17">numIndexes</a>  = <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemn21">mNumVisibleBillboards</a> * 6;
00422 
00423         rend.<a class="code" href="classOgre_1_1RenderOperation.html#Ogre_1_1RenderOperationm11">pDiffuseColour</a> = <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemn15">mpColours</a>;
00424 
00425         rend.<a class="code" href="classOgre_1_1RenderOperation.html#Ogre_1_1RenderOperationm3">pVertices</a> = <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemn14">mpPositions</a>;
00426         rend.<a class="code" href="classOgre_1_1RenderOperation.html#Ogre_1_1RenderOperationm16">pIndexes</a>  = <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemn17">mpIndexes</a>;
00427 
00428         <font class="comment">// Dedicated buffers for both components (simpler since types are different)</font>
00429         rend.<a class="code" href="classOgre_1_1RenderOperation.html#Ogre_1_1RenderOperationm12">diffuseStride</a>     = 0;
00430         rend.<a class="code" href="classOgre_1_1RenderOperation.html#Ogre_1_1RenderOperationm4">vertexStride</a>      = 0;
00431         rend.<a class="code" href="classOgre_1_1RenderOperation.html#Ogre_1_1RenderOperationm8">texCoordStride</a>[0] = 0;
00432     }
00433 
00434     <font class="comment">//-----------------------------------------------------------------------</font>
<a name="l00435"></a><a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1BillboardSeta27">00435</a>     <font class="keywordtype">void</font> BillboardSet::getWorldTransforms( <a class="code" href="classOgre_1_1Matrix4.html">Matrix4</a>* xform )
00436     {
00437         *xform = <a class="code" href="classOgre_1_1MovableObject.html#Ogre_1_1SimpleRenderablen14">mParentNode</a>-&gt;<a class="code" href="classOgre_1_1Node.html#Ogre_1_1SceneNodea50">_getFullTransform</a>(); 
00438     }
00439 
00440     <font class="comment">//-----------------------------------------------------------------------</font>
<a name="l00441"></a><a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystema26">00441</a>     <font class="keywordtype">void</font> BillboardSet::setAutoextend( <font class="keywordtype">bool</font> autoextend )
00442     {
00443         <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemn10">mAutoExtendPool</a> = autoextend;
00444     }
00445 
00446     <font class="comment">//-----------------------------------------------------------------------</font>
<a name="l00447"></a><a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystema27">00447</a>     <font class="keywordtype">bool</font> BillboardSet::getAutoextend(<font class="keywordtype">void</font>)<font class="keyword"> const</font>
00448 <font class="keyword">    </font>{
00449         <font class="keywordflow">return</font> <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemn10">mAutoExtendPool</a>;
00450     }
00451 
00452     <font class="comment">//-----------------------------------------------------------------------</font>
<a name="l00453"></a><a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystema28">00453</a>     <font class="keywordtype">void</font> BillboardSet::setPoolSize( <font class="keywordtype">unsigned</font> <font class="keywordtype">int</font> size )
00454     {
00455         <font class="comment">// Never shrink below size()</font>
00456         size_t currSize = <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemn13">mBillboardPool</a>.size();
00457 
00458         <font class="keywordflow">if</font>( currSize &lt; size )
00459         {
00460             this-&gt;<a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1BillboardSetb2">increasePool</a>(size);
00461 
00462             <font class="keywordflow">for</font>( size_t i = currSize; i &lt; size; ++i )
00463             {
00464                 <font class="comment">// Add new items to the queue</font>
00465                 <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemn12">mFreeBillboards</a>.push_back( <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemn13">mBillboardPool</a>[i] );
00466             }
00467 
00468             <font class="comment">/* Allocate / reallocate vertex data</font>
00469 <font class="comment">               Note that we allocate enough space for ALL the billboards in the pool, but only issue</font>
00470 <font class="comment">               rendering operations for the sections relating to the active billboards</font>
00471 <font class="comment">            */</font>
00472             <font class="keywordflow">if</font> (mpPositions)
00473                 <font class="keyword">delete</font> [] <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemn14">mpPositions</a>;
00474             <font class="keywordflow">if</font> (mpIndexes)
00475                 <font class="keyword">delete</font> [] <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemn17">mpIndexes</a>;
00476             <font class="keywordflow">if</font> (mpTexCoords)
00477                 <font class="keyword">delete</font> [] <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemn16">mpTexCoords</a>;
00478             <font class="keywordflow">if</font> (mpColours)
00479                 <font class="keyword">delete</font> [] <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemn15">mpColours</a>;
00480 
00481             <font class="comment">/* Alloc positions   ( 4 verts per billboard, 3 components )</font>
00482 <font class="comment">                     colours     ( 1 x RGBA per vertex )</font>
00483 <font class="comment">                     indices     ( 6 per billboard ( 2 tris ) )</font>
00484 <font class="comment">                     tex. coords ( 2D coords, 4 per billboard )</font>
00485 <font class="comment">            */</font>
00486             <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemn14">mpPositions</a> = <font class="keyword">new</font> <a class="code" href="namespaceOgre.html#a281">Real</a>[size * 3 * 4];
00487             <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemn15">mpColours</a>   = <font class="keyword">new</font> <a class="code" href="namespaceOgre.html#a63">RGBA</a>[size * 4];
00488             <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemn17">mpIndexes</a>   = <font class="keyword">new</font> <font class="keywordtype">unsigned</font> <font class="keywordtype">short</font>[size * 6];
00489             <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemn16">mpTexCoords</a> = <font class="keyword">new</font> <a class="code" href="namespaceOgre.html#a281">Real</a>[size * 2 * 4];
00490 
00491             <font class="comment">/* Create indexes and tex coords (will be the same every frame)</font>
00492 <font class="comment">               Using indexes because it means 1/3 less vertex transforms (4 instead of 6)</font>
00493 <font class="comment"></font>
00494 <font class="comment">               Billboard layout relative to camera:</font>
00495 <font class="comment"></font>
00496 <font class="comment">                2-----3</font>
00497 <font class="comment">                |    /|</font>
00498 <font class="comment">                |  /  |</font>
00499 <font class="comment">                |/    |</font>
00500 <font class="comment">                0-----1</font>
00501 <font class="comment">            */</font>
00502 
00503             <font class="comment">// Create template texcoord data</font>
00504             <a class="code" href="namespaceOgre.html#a281">Real</a> texData[8] = {
00505                 0.0, 0.0,
00506                 1.0, 0.0,
00507                 0.0, 1.0,
00508                 1.0, 1.0 };
00509 
00510             <font class="keywordflow">for</font>(
00511                 <font class="keywordtype">unsigned</font> <font class="keywordtype">short</font> idx, idxOff, bboard = 0;
00512                 bboard &lt; size;
00513                 ++bboard )
00514             {
00515                 <font class="comment">// Do indexes</font>
00516                 idx    = bboard * 6;
00517                 idxOff = bboard * 4;
00518 
00519                 <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemn17">mpIndexes</a>[idx]   = idxOff; <font class="comment">// + 0;, for clarity</font>
00520                 <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemn17">mpIndexes</a>[idx+1] = idxOff + 1;
00521                 <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemn17">mpIndexes</a>[idx+2] = idxOff + 3;
00522                 <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemn17">mpIndexes</a>[idx+3] = idxOff + 0;
00523                 <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemn17">mpIndexes</a>[idx+4] = idxOff + 3;
00524                 <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemn17">mpIndexes</a>[idx+5] = idxOff + 2;
00525 
00526                 <font class="comment">// Do tex coords</font>
00527                 memcpy( <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemn16">mpTexCoords</a> + (bboard * 4 * 2), texData, <font class="keyword">sizeof</font>(<a class="code" href="namespaceOgre.html#a281">Real</a>) * 2 * 4 );
00528             }
00529         }
00530     }
00531 
00532     <font class="comment">//-----------------------------------------------------------------------</font>
<a name="l00533"></a><a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystema29">00533</a>     <font class="keywordtype">unsigned</font> <font class="keywordtype">int</font> BillboardSet::getPoolSize(<font class="keywordtype">void</font>)<font class="keyword"> const</font>
00534 <font class="keyword">    </font>{
00535         <font class="keywordflow">return</font> static_cast&lt; unsigned int &gt;( <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemn13">mBillboardPool</a>.size() );
00536     }
00537 
00538     <font class="comment">//-----------------------------------------------------------------------</font>
<a name="l00539"></a><a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystema47">00539</a>     <font class="keywordtype">void</font> BillboardSet::_notifyBillboardResized(<font class="keywordtype">void</font>)
00540     {
00541         <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemn9">mAllDefaultSize</a> = <font class="keyword">false</font>;
00542     }
00543 
00544     <font class="comment">//-----------------------------------------------------------------------</font>
<a name="l00545"></a><a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemb9">00545</a>     <font class="keywordtype">void</font> BillboardSet::getParametricOffsets(
00546         <a class="code" href="namespaceOgre.html#a281">Real</a>&amp; left, <a class="code" href="namespaceOgre.html#a281">Real</a>&amp; right, <a class="code" href="namespaceOgre.html#a281">Real</a>&amp; top, <a class="code" href="namespaceOgre.html#a281">Real</a>&amp; bottom )
00547     {
00548         <font class="keywordflow">switch</font>( mOriginType )
00549         {
00550         <font class="keywordflow">case</font> <a class="code" href="namespaceOgre.html#a415a1">BBO_TOP_LEFT</a>:
00551             left = 0.0f;
00552             right = 1.0f;
00553             top = 0.0f;
00554             bottom = 1.0f;
00555             <font class="keywordflow">break</font>;
00556 
00557         <font class="keywordflow">case</font> <a class="code" href="namespaceOgre.html#a415a2">BBO_TOP_CENTER</a>:
00558             left = -0.5f;
00559             right = 0.5f;
00560             top = 0.0f;
00561             bottom = 1.0f;
00562             <font class="keywordflow">break</font>;
00563 
00564         <font class="keywordflow">case</font> <a class="code" href="namespaceOgre.html#a415a3">BBO_TOP_RIGHT</a>:
00565             left = -1.0f;
00566             right = 0.0f;
00567             top = 0.0f;
00568             bottom = 1.0f;
00569             <font class="keywordflow">break</font>;
00570 
00571         <font class="keywordflow">case</font> <a class="code" href="namespaceOgre.html#a415a4">BBO_CENTER_LEFT</a>:
00572             left = 0.0f;
00573             right = 1.0f;
00574             top = -0.5f;
00575             bottom = 0.5f;
00576             <font class="keywordflow">break</font>;
00577 
00578         <font class="keywordflow">case</font> <a class="code" href="namespaceOgre.html#a415a5">BBO_CENTER</a>:
00579             left = -0.5f;
00580             right = 0.5f;
00581             top = -0.5f;
00582             bottom = 0.5f;
00583             <font class="keywordflow">break</font>;
00584 
00585         <font class="keywordflow">case</font> <a class="code" href="namespaceOgre.html#a415a6">BBO_CENTER_RIGHT</a>:
00586             left = -1.0f;
00587             right = 0.0f;
00588             top = -0.5f;
00589             bottom = 0.5f;
00590             <font class="keywordflow">break</font>;
00591 
00592         <font class="keywordflow">case</font> <a class="code" href="namespaceOgre.html#a415a7">BBO_BOTTOM_LEFT</a>:
00593             left = 0.0f;
00594             right = 1.0f;
00595             top = -1.0f;
00596             bottom = 0.0f;
00597             <font class="keywordflow">break</font>;
00598 
00599         <font class="keywordflow">case</font> <a class="code" href="namespaceOgre.html#a415a8">BBO_BOTTOM_CENTER</a>:
00600             left = -0.5f;
00601             right = 0.5f;
00602             top = -1.0f;
00603             bottom = 0.0f;
00604             <font class="keywordflow">break</font>;
00605 
00606         <font class="keywordflow">case</font> <a class="code" href="namespaceOgre.html#a415a9">BBO_BOTTOM_RIGHT</a>:
00607             left = -1.0f;
00608             right = 0.0f;
00609             top = -1.0f;
00610             bottom = 0.0f;
00611             <font class="keywordflow">break</font>;
00612         }
00613     }
00614     <font class="comment">//-----------------------------------------------------------------------</font>
<a name="l00615"></a><a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystema48">00615</a>     <font class="keywordtype">bool</font> BillboardSet::getCullIndividually(<font class="keywordtype">void</font>)
00616     {
00617         <font class="keywordflow">return</font> <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemn18">mCullIndividual</a>;
00618     }
00619     <font class="comment">//-----------------------------------------------------------------------</font>
<a name="l00620"></a><a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystema49">00620</a>     <font class="keywordtype">void</font> BillboardSet::setCullIndividually(<font class="keywordtype">bool</font> cullIndividual)
00621     {
00622         <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemn18">mCullIndividual</a> = cullIndividual;
00623     }
00624     <font class="comment">//-----------------------------------------------------------------------</font>
<a name="l00625"></a><a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemb8">00625</a>     <font class="keywordtype">bool</font> BillboardSet::billboardVisible(<a class="code" href="classOgre_1_1Camera.html">Camera</a>* cam, ActiveBillboardList::iterator bill)
00626     {
00627         <font class="comment">// Return always visible if not culling individually</font>
00628         <font class="keywordflow">if</font> (!<a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemn18">mCullIndividual</a>) <font class="keywordflow">return</font> <font class="keyword">true</font>;
00629 
00630         <font class="comment">// Cull based on sphere (have to transform less)</font>
00631         <a class="code" href="classOgre_1_1Sphere.html">Sphere</a> sph;
00632         <a class="code" href="classOgre_1_1Matrix4.html">Matrix4</a> xworld;
00633 
00634         <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1BillboardSeta27">getWorldTransforms</a>(&amp;xworld);
00635 
00636         sph.<a class="code" href="classOgre_1_1Sphere.html#Ogre_1_1Spherea5">setCenter</a>(xworld * (*bill)-&gt;mPosition);
00637 
00638         <font class="keywordflow">if</font> ((*bill)-&gt;mOwnDimensions)
00639         {
00640             sph.<a class="code" href="classOgre_1_1Sphere.html#Ogre_1_1Spherea3">setRadius</a>(std::max((*bill)-&gt;mWidth, (*bill)-&gt;mHeight));
00641         }
00642         <font class="keywordflow">else</font>
00643         {
00644             sph.<a class="code" href="classOgre_1_1Sphere.html#Ogre_1_1Spherea3">setRadius</a>(std::max(<a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemn5">mDefaultWidth</a>, <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemn6">mDefaultHeight</a>));
00645         }
00646 
00647         <font class="keywordflow">return</font> cam-&gt;<a class="code" href="classOgre_1_1Camera.html#Ogre_1_1Cameraa35">isVisible</a>(sph);
00648         
00649     }
00650     <font class="comment">//-----------------------------------------------------------------------</font>
<a name="l00651"></a><a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1BillboardSetb2">00651</a>     <font class="keywordtype">void</font> BillboardSet::increasePool(<font class="keywordtype">unsigned</font> <font class="keywordtype">int</font> size)
00652     {
00653         size_t oldSize = <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemn13">mBillboardPool</a>.size();
00654 
00655         <font class="comment">// Increase size</font>
00656         <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemn13">mBillboardPool</a>.reserve(size);
00657         <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemn13">mBillboardPool</a>.resize(size);
00658 
00659         <font class="comment">// Create new billboards</font>
00660         <font class="keywordflow">for</font>( size_t i = oldSize; i &lt; size; ++i )
00661             <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemn13">mBillboardPool</a>[i] = <font class="keyword">new</font> <a class="code" href="classOgre_1_1Billboard.html">Billboard</a>();
00662 
00663     }
00664     <font class="comment">//-----------------------------------------------------------------------</font>
<a name="l00665"></a><a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1BillboardSetb3">00665</a>     <font class="keywordtype">void</font> BillboardSet:: genBillboardAxes(<a class="code" href="classOgre_1_1Camera.html">Camera</a>&amp; cam, <a class="code" href="classOgre_1_1Vector3.html">Vector3</a>* pX, <a class="code" href="classOgre_1_1Vector3.html">Vector3</a> *pY, <font class="keyword">const</font> <a class="code" href="classOgre_1_1Billboard.html">Billboard</a>* pBill)
00666     {
00667         <font class="comment">// Default behaviour is that billboards are in local node space</font>
00668         <font class="comment">// so orientation of camera (in world space) must be reverse-transformed </font>
00669         <font class="comment">// into node space to generate the axes</font>
00670 
00671         <a class="code" href="classOgre_1_1Quaternion.html">Quaternion</a> invTransform = <a class="code" href="classOgre_1_1MovableObject.html#Ogre_1_1SimpleRenderablen14">mParentNode</a>-&gt;<a class="code" href="classOgre_1_1Node.html#Ogre_1_1SceneNodea47">_getDerivedOrientation</a>().<a class="code" href="classOgre_1_1Quaternion.html#Ogre_1_1Quaterniona19">Inverse</a>();
00672         <a class="code" href="classOgre_1_1Quaternion.html">Quaternion</a> camQ;
00673 
00674         <font class="keywordflow">switch</font> (mBillboardType)
00675         {
00676         <font class="keywordflow">case</font> <a class="code" href="namespaceOgre.html#a416a10">BBT_POINT</a>:
00677             <font class="comment">// Get camera world axes for X and Y (depth is irrelevant)</font>
00678             camQ = cam.<a class="code" href="classOgre_1_1Camera.html#Ogre_1_1Cameraa43">getDerivedOrientation</a>();
00679             <font class="comment">// Convert into billboard local space</font>
00680             camQ = invTransform * camQ;
00681             *pX = camQ * Vector3::UNIT_X;
00682             *pY = camQ * Vector3::UNIT_Y;
00683             <font class="keywordflow">break</font>;
00684         <font class="keywordflow">case</font> <a class="code" href="namespaceOgre.html#a416a11">BBT_ORIENTED_COMMON</a>:
00685             <font class="comment">// Y-axis is common direction</font>
00686             <font class="comment">// X-axis is cross with camera direction </font>
00687             *pY = <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemn20">mCommonDirection</a>;
00688             <font class="comment">// Convert into billboard local space</font>
00689             camQ = invTransform * camQ;
00690             *pX = camQ * cam.<a class="code" href="classOgre_1_1Camera.html#Ogre_1_1Cameraa45">getDerivedDirection</a>().<a class="code" href="classOgre_1_1Vector3.html#Ogre_1_1Vector3a25">crossProduct</a>(*pY);
00691             
00692             <font class="keywordflow">break</font>;
00693         <font class="keywordflow">case</font> <a class="code" href="namespaceOgre.html#a416a12">BBT_ORIENTED_SELF</a>:
00694             <font class="comment">// Y-axis is direction</font>
00695             <font class="comment">// X-axis is cross with camera direction </font>
00696             *pY = pBill-&gt;<a class="code" href="classOgre_1_1Billboard.html#Ogre_1_1Particlem2">mDirection</a>;
00697             <font class="comment">// Convert into billboard local space</font>
00698             camQ = invTransform * camQ;
00699             *pX = camQ * cam.<a class="code" href="classOgre_1_1Camera.html#Ogre_1_1Cameraa45">getDerivedDirection</a>().<a class="code" href="classOgre_1_1Vector3.html#Ogre_1_1Vector3a25">crossProduct</a>(*pY);
00700 
00701             <font class="keywordflow">break</font>;
00702         }
00703 
00704     }
00705     <font class="comment">//-----------------------------------------------------------------------</font>
<a name="l00706"></a><a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystema50">00706</a>     <font class="keywordtype">void</font> BillboardSet::setBillboardType(<a class="code" href="namespaceOgre.html#a416">BillboardType</a> bbt)
00707     {
00708         <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemn19">mBillboardType</a> = bbt;
00709     }
00710     <font class="comment">//-----------------------------------------------------------------------</font>
<a name="l00711"></a><a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystema51">00711</a>     <a class="code" href="namespaceOgre.html#a416">BillboardType</a> BillboardSet::getBillboardType(<font class="keywordtype">void</font>)
00712     {
00713         <font class="keywordflow">return</font> <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemn19">mBillboardType</a>;
00714     }
00715     <font class="comment">//-----------------------------------------------------------------------</font>
<a name="l00716"></a><a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystema52">00716</a>     <font class="keywordtype">void</font> BillboardSet::setCommonDirection(<font class="keyword">const</font> <a class="code" href="classOgre_1_1Vector3.html">Vector3</a>&amp; vec)
00717     {
00718         <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemn20">mCommonDirection</a> = vec;
00719     }
00720     <font class="comment">//-----------------------------------------------------------------------</font>
<a name="l00721"></a><a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystema53">00721</a>     <a class="code" href="classOgre_1_1Vector3.html">Vector3</a> BillboardSet::getCommonDirection(<font class="keywordtype">void</font>)
00722     {
00723         <font class="keywordflow">return</font> <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemn20">mCommonDirection</a>;
00724     }
00725     <font class="comment">//-----------------------------------------------------------------------</font>
<a name="l00726"></a><a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemb10">00726</a>     <font class="keywordtype">void</font> BillboardSet::genVertices(<a class="code" href="namespaceOgre.html#a281">Real</a> **pPos, <a class="code" href="namespaceOgre.html#a63">RGBA</a> **pCol, <font class="keyword">const</font> <a class="code" href="classOgre_1_1Vector3.html">Vector3</a>* offsets, <font class="keyword">const</font> <a class="code" href="classOgre_1_1Billboard.html">Billboard</a>* pBillboard)
00727     {
00728         <font class="comment">// Positions</font>
00729 
00730         <font class="comment">// Left-top</font>
00731         *(*pPos)++ = offsets[0].<a class="code" href="classOgre_1_1Vector3.html#Ogre_1_1Vector3m0">x</a> + pBillboard-&gt;<a class="code" href="classOgre_1_1Billboard.html#Ogre_1_1Particlem1">mPosition</a>.<a class="code" href="classOgre_1_1Vector3.html#Ogre_1_1Vector3m0">x</a>;
00732         *(*pPos)++ = offsets[0].<a class="code" href="classOgre_1_1Vector3.html#Ogre_1_1Vector3m1">y</a> + pBillboard-&gt;<a class="code" href="classOgre_1_1Billboard.html#Ogre_1_1Particlem1">mPosition</a>.<a class="code" href="classOgre_1_1Vector3.html#Ogre_1_1Vector3m1">y</a>;
00733         *(*pPos)++ = offsets[0].<a class="code" href="classOgre_1_1Vector3.html#Ogre_1_1Vector3m2">z</a> + pBillboard-&gt;<a class="code" href="classOgre_1_1Billboard.html#Ogre_1_1Particlem1">mPosition</a>.<a class="code" href="classOgre_1_1Vector3.html#Ogre_1_1Vector3m2">z</a>;
00734         <font class="comment">// Right-top</font>
00735         *(*pPos)++ = offsets[1].<a class="code" href="classOgre_1_1Vector3.html#Ogre_1_1Vector3m0">x</a> + pBillboard-&gt;<a class="code" href="classOgre_1_1Billboard.html#Ogre_1_1Particlem1">mPosition</a>.<a class="code" href="classOgre_1_1Vector3.html#Ogre_1_1Vector3m0">x</a>;
00736         *(*pPos)++ = offsets[1].<a class="code" href="classOgre_1_1Vector3.html#Ogre_1_1Vector3m1">y</a> + pBillboard-&gt;<a class="code" href="classOgre_1_1Billboard.html#Ogre_1_1Particlem1">mPosition</a>.<a class="code" href="classOgre_1_1Vector3.html#Ogre_1_1Vector3m1">y</a>;
00737         *(*pPos)++ = offsets[1].<a class="code" href="classOgre_1_1Vector3.html#Ogre_1_1Vector3m2">z</a> + pBillboard-&gt;<a class="code" href="classOgre_1_1Billboard.html#Ogre_1_1Particlem1">mPosition</a>.<a class="code" href="classOgre_1_1Vector3.html#Ogre_1_1Vector3m2">z</a>;
00738         <font class="comment">// Left-bottom</font>
00739         *(*pPos)++ = offsets[2].<a class="code" href="classOgre_1_1Vector3.html#Ogre_1_1Vector3m0">x</a> + pBillboard-&gt;<a class="code" href="classOgre_1_1Billboard.html#Ogre_1_1Particlem1">mPosition</a>.<a class="code" href="classOgre_1_1Vector3.html#Ogre_1_1Vector3m0">x</a>;
00740         *(*pPos)++ = offsets[2].<a class="code" href="classOgre_1_1Vector3.html#Ogre_1_1Vector3m1">y</a> + pBillboard-&gt;<a class="code" href="classOgre_1_1Billboard.html#Ogre_1_1Particlem1">mPosition</a>.<a class="code" href="classOgre_1_1Vector3.html#Ogre_1_1Vector3m1">y</a>;
00741         *(*pPos)++ = offsets[2].<a class="code" href="classOgre_1_1Vector3.html#Ogre_1_1Vector3m2">z</a> + pBillboard-&gt;<a class="code" href="classOgre_1_1Billboard.html#Ogre_1_1Particlem1">mPosition</a>.<a class="code" href="classOgre_1_1Vector3.html#Ogre_1_1Vector3m2">z</a>;
00742         <font class="comment">// Right-bottom</font>
00743         *(*pPos)++ = offsets[3].<a class="code" href="classOgre_1_1Vector3.html#Ogre_1_1Vector3m0">x</a> + pBillboard-&gt;<a class="code" href="classOgre_1_1Billboard.html#Ogre_1_1Particlem1">mPosition</a>.<a class="code" href="classOgre_1_1Vector3.html#Ogre_1_1Vector3m0">x</a>;
00744         *(*pPos)++ = offsets[3].<a class="code" href="classOgre_1_1Vector3.html#Ogre_1_1Vector3m1">y</a> + pBillboard-&gt;<a class="code" href="classOgre_1_1Billboard.html#Ogre_1_1Particlem1">mPosition</a>.<a class="code" href="classOgre_1_1Vector3.html#Ogre_1_1Vector3m1">y</a>;
00745         *(*pPos)++ = offsets[3].<a class="code" href="classOgre_1_1Vector3.html#Ogre_1_1Vector3m2">z</a> + pBillboard-&gt;<a class="code" href="classOgre_1_1Billboard.html#Ogre_1_1Particlem1">mPosition</a>.<a class="code" href="classOgre_1_1Vector3.html#Ogre_1_1Vector3m2">z</a>;
00746 
00747         <font class="comment">// Update colours</font>
00748         <a class="code" href="namespaceOgre.html#a63">RGBA</a> colour;
00749         Root::getSingleton().convertColourValue(pBillboard-&gt;<a class="code" href="classOgre_1_1Billboard.html#Ogre_1_1Particlem4">mColour</a>, &amp;colour);
00750         *(*pCol)++ = colour;
00751         *(*pCol)++ = colour;
00752         *(*pCol)++ = colour;
00753         *(*pCol)++ = colour;
00754 
00755     }
00756     <font class="comment">//-----------------------------------------------------------------------</font>
<a name="l00757"></a><a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemb11">00757</a>     <font class="keywordtype">void</font> BillboardSet::genVertOffsets(<a class="code" href="namespaceOgre.html#a281">Real</a> inleft, <a class="code" href="namespaceOgre.html#a281">Real</a> inright, <a class="code" href="namespaceOgre.html#a281">Real</a> intop, <a class="code" href="namespaceOgre.html#a281">Real</a> inbottom,
00758         <a class="code" href="namespaceOgre.html#a281">Real</a> width, <a class="code" href="namespaceOgre.html#a281">Real</a> height, <font class="keyword">const</font> <a class="code" href="classOgre_1_1Vector3.html">Vector3</a>&amp; x, <font class="keyword">const</font> <a class="code" href="classOgre_1_1Vector3.html">Vector3</a>&amp; y, <a class="code" href="classOgre_1_1Vector3.html">Vector3</a>* pDestVec)
00759     {
00760         <a class="code" href="classOgre_1_1Vector3.html">Vector3</a> vLeftOff, vRightOff, vTopOff, vBottomOff;
00761         <font class="comment">/* Calculate default offsets. Scale the axes by</font>
00762 <font class="comment">           parametric offset and dimensions, ready to be added to</font>
00763 <font class="comment">           positions.</font>
00764 <font class="comment">        */</font>
00765 
00766         vLeftOff   = x * ( inleft   * width );
00767         vRightOff  = x * ( inright  * width );
00768         vTopOff    = y * ( intop   * height );
00769         vBottomOff = y * ( inbottom * height );
00770 
00771         <font class="comment">// Make final offsets to vertex positions</font>
00772         pDestVec[0] = vLeftOff  + vTopOff;
00773         pDestVec[1] = vRightOff + vTopOff;
00774         pDestVec[2] = vLeftOff  + vBottomOff;
00775         pDestVec[3] = vRightOff + vBottomOff;
00776 
00777     }
00778     <font class="comment">//-----------------------------------------------------------------------</font>
<a name="l00779"></a><a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1BillboardSeta35">00779</a>     <a class="code" href="classOgre_1_1String.html">String</a> BillboardSet::getName(<font class="keywordtype">void</font>)
00780     {
00781         <font class="keywordflow">return</font> <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1BillboardSetn0">mName</a>;
00782     }
00783     <font class="comment">//-----------------------------------------------------------------------</font>
<a name="l00784"></a><a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystema54">00784</a>     <a class="code" href="classOgre_1_1String.html">String</a> BillboardSet::getMovableType(<font class="keywordtype">void</font>)
00785     {
00786         <font class="keywordflow">return</font> <a class="code" href="classOgre_1_1BillboardSet.html#Ogre_1_1ParticleSystemq7">msMovableType</a>;
00787     }
00788 
00789 }
</pre></div><p>
Copyright &copy; 2002 by The OGRE Team<br />
<script type="text/javascript">
<!--//hide script from old browsers
document.write( "Last modified "+ document.lastModified );
//end hiding contents -->
</script>
</p>
</body>
</html>
