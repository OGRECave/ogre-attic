<html>
<head>
<title>OGRE Documentation</title> <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"> 
<link type="text/css" rel="stylesheet" href="style.css">
</head>

<body>
<!-- Generated by Doxygen 1.2.16 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="namespaces.html">Namespace List</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="namespacemembers.html">Namespace Members</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; <a class="qindex" href="pages.html">Related Pages</a> &nbsp; </center>
<hr><h1>OgreQuake3Level.cpp</h1><a href="OgreQuake3Level_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <font class="comment">/*</font>
00002 <font class="comment">-----------------------------------------------------------------------------</font>
00003 <font class="comment">This source file is part of OGRE</font>
00004 <font class="comment">    (Object-oriented Graphics Rendering Engine)</font>
00005 <font class="comment">For the latest info, see http://www.stevestreeting.com/ogre/</font>
00006 <font class="comment"></font>
00007 <font class="comment">Copyright © 2000-2001 Steven J. Streeting</font>
00008 <font class="comment">Also see acknowledgements in Readme.html</font>
00009 <font class="comment"></font>
00010 <font class="comment">This program is free software; you can redistribute it and/or modify it under</font>
00011 <font class="comment">the terms of the GNU General Public License as published by the Free Software</font>
00012 <font class="comment">Foundation; either version 2 of the License, or (at your option) any later</font>
00013 <font class="comment">version.</font>
00014 <font class="comment"></font>
00015 <font class="comment">This program is distributed in the hope that it will be useful, but WITHOUT</font>
00016 <font class="comment">ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS</font>
00017 <font class="comment">FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.</font>
00018 <font class="comment"></font>
00019 <font class="comment">You should have received a copy of the GNU General Public License along with</font>
00020 <font class="comment">this program; if not, write to the Free Software Foundation, Inc., 59 Temple</font>
00021 <font class="comment">Place - Suite 330, Boston, MA 02111-1307, USA, or go to</font>
00022 <font class="comment">http://www.gnu.org/copyleft/gpl.html.</font>
00023 <font class="comment">-----------------------------------------------------------------------------</font>
00024 <font class="comment">*/</font>
00025 <font class="preprocessor">#include "<a class="code" href="OgreQuake3Level_8h.html">OgreQuake3Level.h</a>"</font>
00026 <font class="preprocessor">#include "<a class="code" href="OgreDataChunk_8h.html">OgreDataChunk.h</a>"</font>
00027 <font class="preprocessor">#include "<a class="code" href="OgreLogManager_8h.html">OgreLogManager.h</a>"</font>
00028 <font class="preprocessor">#include "<a class="code" href="OgreTextureManager_8h.html">OgreTextureManager.h</a>"</font>
00029 
00030 <font class="keyword">namespace </font>Ogre {
00031 
00032 
<a name="l00033"></a><a class="code" href="classOgre_1_1Quake3Level.html#Ogre_1_1Quake3Levela0">00033</a>     Quake3Level::Quake3Level()
00034     {
00035 
00036     }
00037 
<a name="l00038"></a><a class="code" href="classOgre_1_1Quake3Level.html#Ogre_1_1Quake3Levela1">00038</a>     <font class="keywordtype">void</font> Quake3Level::loadFromChunk(<a class="code" href="classOgre_1_1DataChunk.html">DataChunk</a>&amp; inChunk)
00039     {
00040         <a class="code" href="classOgre_1_1Quake3Level.html#Ogre_1_1Quake3Levelm0">mChunk</a> = inChunk;
00041         <a class="code" href="classOgre_1_1Quake3Level.html#Ogre_1_1Quake3Levela3">initialise</a>();
00042 
00043 <font class="preprocessor">#ifdef _DEBUG</font>
00044 <font class="preprocessor"></font>        <a class="code" href="classOgre_1_1Quake3Level.html#Ogre_1_1Quake3Levela6">dumpContents</a>();
00045 <font class="preprocessor">#endif</font>
00046 <font class="preprocessor"></font>
00047 
00048     }
00049 
<a name="l00050"></a><a class="code" href="classOgre_1_1Quake3Level.html#Ogre_1_1Quake3Levela3">00050</a>     <font class="keywordtype">void</font> Quake3Level::initialise(<font class="keywordtype">void</font>)
00051     {
00052         <a class="code" href="classOgre_1_1Quake3Level.html#Ogre_1_1Quake3Levelm1">mHeader</a> = (<a class="code" href="structbsp__header__t.html">bsp_header_t</a>*)<a class="code" href="classOgre_1_1Quake3Level.html#Ogre_1_1Quake3Levelm0">mChunk</a>.<a class="code" href="classOgre_1_1DataChunk.html#Ogre_1_1SDDataChunka6">getPtr</a>();
00053         <a class="code" href="classOgre_1_1Quake3Level.html#Ogre_1_1Quake3Levelm2">mLumpStart</a> = ((<font class="keywordtype">unsigned</font> <font class="keywordtype">char</font>*)<a class="code" href="classOgre_1_1Quake3Level.html#Ogre_1_1Quake3Levelm1">mHeader</a>) + <font class="keyword">sizeof</font>(mHeader);
00054 
00055         <a class="code" href="classOgre_1_1Quake3Level.html#Ogre_1_1Quake3Levelm5">mEntities</a> = (<font class="keywordtype">unsigned</font> <font class="keywordtype">char</font>*)<a class="code" href="classOgre_1_1Quake3Level.html#Ogre_1_1Quake3Levela4">getLump</a>(<a class="code" href="OgreQuake3Types_8h.html#a2">BSP_ENTITIES_LUMP</a>);
00056         <a class="code" href="classOgre_1_1Quake3Level.html#Ogre_1_1Quake3Levelm6">mNumEntities</a> = <a class="code" href="classOgre_1_1Quake3Level.html#Ogre_1_1Quake3Levela5">getLumpSize</a>(<a class="code" href="OgreQuake3Types_8h.html#a2">BSP_ENTITIES_LUMP</a>);
00057 
00058         <a class="code" href="classOgre_1_1Quake3Level.html#Ogre_1_1Quake3Levelm3">mElements</a> = (<font class="keywordtype">int</font>*)<a class="code" href="classOgre_1_1Quake3Level.html#Ogre_1_1Quake3Levela4">getLump</a>(<a class="code" href="OgreQuake3Types_8h.html#a13">BSP_ELEMENTS_LUMP</a>);
00059         <a class="code" href="classOgre_1_1Quake3Level.html#Ogre_1_1Quake3Levelm4">mNumElements</a> = <a class="code" href="classOgre_1_1Quake3Level.html#Ogre_1_1Quake3Levela5">getLumpSize</a>(<a class="code" href="OgreQuake3Types_8h.html#a13">BSP_ELEMENTS_LUMP</a>) / <font class="keyword">sizeof</font>(int);
00060 
00061         <a class="code" href="classOgre_1_1Quake3Level.html#Ogre_1_1Quake3Levelm17">mFaces</a> = (<a class="code" href="structbsp__face__t.html">bsp_face_t</a>*)<a class="code" href="classOgre_1_1Quake3Level.html#Ogre_1_1Quake3Levela4">getLump</a>(<a class="code" href="OgreQuake3Types_8h.html#a15">BSP_FACES_LUMP</a>);
00062         <a class="code" href="classOgre_1_1Quake3Level.html#Ogre_1_1Quake3Levelm18">mNumFaces</a> = <a class="code" href="classOgre_1_1Quake3Level.html#Ogre_1_1Quake3Levela5">getLumpSize</a>(<a class="code" href="OgreQuake3Types_8h.html#a15">BSP_FACES_LUMP</a>) / <font class="keyword">sizeof</font>(bsp_face_t);
00063 
00064         <a class="code" href="classOgre_1_1Quake3Level.html#Ogre_1_1Quake3Levelm13">mLeafFaces</a> = (<font class="keywordtype">int</font>*)<a class="code" href="classOgre_1_1Quake3Level.html#Ogre_1_1Quake3Levela4">getLump</a>(<a class="code" href="OgreQuake3Types_8h.html#a7">BSP_LFACES_LUMP</a>);
00065         <a class="code" href="classOgre_1_1Quake3Level.html#Ogre_1_1Quake3Levelm14">mNumLeafFaces</a> = <a class="code" href="classOgre_1_1Quake3Level.html#Ogre_1_1Quake3Levela5">getLumpSize</a>(<a class="code" href="OgreQuake3Types_8h.html#a7">BSP_LFACES_LUMP</a>) / <font class="keyword">sizeof</font>(int);
00066 
00067         <a class="code" href="classOgre_1_1Quake3Level.html#Ogre_1_1Quake3Levelm11">mLeaves</a> = (<a class="code" href="structbsp__leaf__t.html">bsp_leaf_t</a>*)<a class="code" href="classOgre_1_1Quake3Level.html#Ogre_1_1Quake3Levela4">getLump</a>(<a class="code" href="OgreQuake3Types_8h.html#a6">BSP_LEAVES_LUMP</a>);
00068         <a class="code" href="classOgre_1_1Quake3Level.html#Ogre_1_1Quake3Levelm12">mNumLeaves</a> = <a class="code" href="classOgre_1_1Quake3Level.html#Ogre_1_1Quake3Levela5">getLumpSize</a>(<a class="code" href="OgreQuake3Types_8h.html#a6">BSP_LEAVES_LUMP</a>) / <font class="keyword">sizeof</font>(bsp_leaf_t);
00069 
00070         <a class="code" href="classOgre_1_1Quake3Level.html#Ogre_1_1Quake3Levelm23">mLightmaps</a> = (<font class="keywordtype">unsigned</font> <font class="keywordtype">char</font>*)<a class="code" href="classOgre_1_1Quake3Level.html#Ogre_1_1Quake3Levela4">getLump</a>(<a class="code" href="OgreQuake3Types_8h.html#a16">BSP_LIGHTMAPS_LUMP</a>);
00071         <a class="code" href="classOgre_1_1Quake3Level.html#Ogre_1_1Quake3Levelm24">mNumLightmaps</a> = <a class="code" href="classOgre_1_1Quake3Level.html#Ogre_1_1Quake3Levela5">getLumpSize</a>(<a class="code" href="OgreQuake3Types_8h.html#a16">BSP_LIGHTMAPS_LUMP</a>)/<a class="code" href="OgreQuake3Types_8h.html#a19">BSP_LIGHTMAP_BANKSIZE</a>;
00072 
00073         <a class="code" href="classOgre_1_1Quake3Level.html#Ogre_1_1Quake3Levelm7">mModels</a> = (<a class="code" href="structbsp__model__t.html">bsp_model_t</a>*)<a class="code" href="classOgre_1_1Quake3Level.html#Ogre_1_1Quake3Levela4">getLump</a>(<a class="code" href="OgreQuake3Types_8h.html#a9">BSP_MODELS_LUMP</a>);
00074         <a class="code" href="classOgre_1_1Quake3Level.html#Ogre_1_1Quake3Levelm8">mNumModels</a> = <a class="code" href="classOgre_1_1Quake3Level.html#Ogre_1_1Quake3Levela5">getLumpSize</a>(<a class="code" href="OgreQuake3Types_8h.html#a9">BSP_MODELS_LUMP</a>) / <font class="keyword">sizeof</font>(bsp_model_t);
00075 
00076         <a class="code" href="classOgre_1_1Quake3Level.html#Ogre_1_1Quake3Levelm9">mNodes</a> = (<a class="code" href="structbsp__node__t.html">bsp_node_t</a>*)<a class="code" href="classOgre_1_1Quake3Level.html#Ogre_1_1Quake3Levela4">getLump</a>(<a class="code" href="OgreQuake3Types_8h.html#a5">BSP_NODES_LUMP</a>);
00077         <a class="code" href="classOgre_1_1Quake3Level.html#Ogre_1_1Quake3Levelm10">mNumNodes</a> = <a class="code" href="classOgre_1_1Quake3Level.html#Ogre_1_1Quake3Levela5">getLumpSize</a>(<a class="code" href="OgreQuake3Types_8h.html#a5">BSP_NODES_LUMP</a>) / <font class="keyword">sizeof</font>(bsp_node_t);
00078 
00079         <a class="code" href="classOgre_1_1Quake3Level.html#Ogre_1_1Quake3Levelm15">mPlanes</a> = (<a class="code" href="structbsp__plane__t.html">bsp_plane_t</a>*) <a class="code" href="classOgre_1_1Quake3Level.html#Ogre_1_1Quake3Levela4">getLump</a>(<a class="code" href="OgreQuake3Types_8h.html#a4">BSP_PLANES_LUMP</a>);
00080         <a class="code" href="classOgre_1_1Quake3Level.html#Ogre_1_1Quake3Levelm16">mNumPlanes</a> = <a class="code" href="classOgre_1_1Quake3Level.html#Ogre_1_1Quake3Levela5">getLumpSize</a>(<a class="code" href="OgreQuake3Types_8h.html#a4">BSP_PLANES_LUMP</a>)/<font class="keyword">sizeof</font>(bsp_plane_t);
00081 
00082         <a class="code" href="classOgre_1_1Quake3Level.html#Ogre_1_1Quake3Levelm21">mShaders</a> = (<a class="code" href="structbsp__shader__t.html">bsp_shader_t</a>*) <a class="code" href="classOgre_1_1Quake3Level.html#Ogre_1_1Quake3Levela4">getLump</a>(<a class="code" href="OgreQuake3Types_8h.html#a3">BSP_SHADERS_LUMP</a>);
00083         <a class="code" href="classOgre_1_1Quake3Level.html#Ogre_1_1Quake3Levelm22">mNumShaders</a> = <a class="code" href="classOgre_1_1Quake3Level.html#Ogre_1_1Quake3Levela5">getLumpSize</a>(<a class="code" href="OgreQuake3Types_8h.html#a3">BSP_SHADERS_LUMP</a>)/<font class="keyword">sizeof</font>(bsp_shader_t);
00084 
00085         <a class="code" href="classOgre_1_1Quake3Level.html#Ogre_1_1Quake3Levelm25">mVis</a> = (<a class="code" href="structbsp__vis__t.html">bsp_vis_t</a>*)<a class="code" href="classOgre_1_1Quake3Level.html#Ogre_1_1Quake3Levela4">getLump</a>(<a class="code" href="OgreQuake3Types_8h.html#a18">BSP_VISIBILITY_LUMP</a>);
00086 
00087         <a class="code" href="classOgre_1_1Quake3Level.html#Ogre_1_1Quake3Levelm19">mVertices</a> = (<a class="code" href="structbsp__vertex__t.html">bsp_vertex_t</a>*) <a class="code" href="classOgre_1_1Quake3Level.html#Ogre_1_1Quake3Levela4">getLump</a>(<a class="code" href="OgreQuake3Types_8h.html#a12">BSP_VERTICES_LUMP</a>);
00088         <a class="code" href="classOgre_1_1Quake3Level.html#Ogre_1_1Quake3Levelm20">mNumVertices</a> = <a class="code" href="classOgre_1_1Quake3Level.html#Ogre_1_1Quake3Levela5">getLumpSize</a>(<a class="code" href="OgreQuake3Types_8h.html#a12">BSP_VERTICES_LUMP</a>)/<font class="keyword">sizeof</font>(bsp_vertex_t);
00089 
00090     }
00091 
<a name="l00092"></a><a class="code" href="classOgre_1_1Quake3Level.html#Ogre_1_1Quake3Levela4">00092</a>     <font class="keywordtype">void</font>* Quake3Level::getLump(<font class="keywordtype">int</font> lumpType)
00093     {
00094         <font class="keywordflow">return</font> (<font class="keywordtype">unsigned</font> <font class="keywordtype">char</font>*)<a class="code" href="classOgre_1_1Quake3Level.html#Ogre_1_1Quake3Levelm1">mHeader</a> + <a class="code" href="classOgre_1_1Quake3Level.html#Ogre_1_1Quake3Levelm1">mHeader</a>-&gt;<a class="code" href="structbsp__header__t.html#bsp__header__tm2">lumps</a>[lumpType].<a class="code" href="structbsp__lump__entry__t.html#bsp__lump__entry__tm0">offset</a>;
00095     }
00096 
<a name="l00097"></a><a class="code" href="classOgre_1_1Quake3Level.html#Ogre_1_1Quake3Levela5">00097</a>     <font class="keywordtype">int</font> Quake3Level::getLumpSize(<font class="keywordtype">int</font> lumpType)
00098     {
00099         <font class="keywordflow">return</font> <a class="code" href="classOgre_1_1Quake3Level.html#Ogre_1_1Quake3Levelm1">mHeader</a>-&gt;<a class="code" href="structbsp__header__t.html#bsp__header__tm2">lumps</a>[lumpType].<a class="code" href="structbsp__lump__entry__t.html#bsp__lump__entry__tm1">size</a>;
00100     }
00101 
<a name="l00102"></a><a class="code" href="classOgre_1_1Quake3Level.html#Ogre_1_1Quake3Levela6">00102</a>     <font class="keywordtype">void</font> Quake3Level::dumpContents(<font class="keywordtype">void</font>)
00103     {
00104         std::ofstream <a class="code" href="namespaceOgre.html#a348">of</a>;
00105         <a class="code" href="namespaceOgre.html#a348">of</a>.open(<font class="stringliteral">"Quake3Level.log"</font>);
00106 
00107 
00108         <a class="code" href="namespaceOgre.html#a348">of</a> &lt;&lt; <font class="stringliteral">"Quake3 level statistics"</font> &lt;&lt; std::endl;
00109         <a class="code" href="namespaceOgre.html#a348">of</a> &lt;&lt; <font class="stringliteral">"-----------------------"</font> &lt;&lt; std::endl;
00110         <a class="code" href="namespaceOgre.html#a348">of</a> &lt;&lt; <font class="stringliteral">"Entities     : "</font> &lt;&lt; <a class="code" href="classOgre_1_1Quake3Level.html#Ogre_1_1Quake3Levelm6">mNumEntities</a> &lt;&lt; std::endl;
00111         <a class="code" href="namespaceOgre.html#a348">of</a> &lt;&lt; <font class="stringliteral">"Faces        : "</font> &lt;&lt; <a class="code" href="classOgre_1_1Quake3Level.html#Ogre_1_1Quake3Levelm18">mNumFaces</a> &lt;&lt; std::endl;
00112         <a class="code" href="namespaceOgre.html#a348">of</a> &lt;&lt; <font class="stringliteral">"Leaf Faces   : "</font> &lt;&lt; <a class="code" href="classOgre_1_1Quake3Level.html#Ogre_1_1Quake3Levelm14">mNumLeafFaces</a> &lt;&lt; std::endl;
00113         <a class="code" href="namespaceOgre.html#a348">of</a> &lt;&lt; <font class="stringliteral">"Leaves       : "</font> &lt;&lt; <a class="code" href="classOgre_1_1Quake3Level.html#Ogre_1_1Quake3Levelm12">mNumLeaves</a> &lt;&lt; std::endl;
00114         <a class="code" href="namespaceOgre.html#a348">of</a> &lt;&lt; <font class="stringliteral">"Lightmaps    : "</font> &lt;&lt; <a class="code" href="classOgre_1_1Quake3Level.html#Ogre_1_1Quake3Levelm24">mNumLightmaps</a> &lt;&lt; std::endl;
00115         <a class="code" href="namespaceOgre.html#a348">of</a> &lt;&lt; <font class="stringliteral">"Elements     : "</font> &lt;&lt; <a class="code" href="classOgre_1_1Quake3Level.html#Ogre_1_1Quake3Levelm4">mNumElements</a> &lt;&lt; std::endl;
00116         <a class="code" href="namespaceOgre.html#a348">of</a> &lt;&lt; <font class="stringliteral">"Models       : "</font> &lt;&lt; <a class="code" href="classOgre_1_1Quake3Level.html#Ogre_1_1Quake3Levelm8">mNumModels</a> &lt;&lt; std::endl;
00117         <a class="code" href="namespaceOgre.html#a348">of</a> &lt;&lt; <font class="stringliteral">"Nodes        : "</font> &lt;&lt; <a class="code" href="classOgre_1_1Quake3Level.html#Ogre_1_1Quake3Levelm10">mNumNodes</a> &lt;&lt; std::endl;
00118         <a class="code" href="namespaceOgre.html#a348">of</a> &lt;&lt; <font class="stringliteral">"Planes       : "</font> &lt;&lt; <a class="code" href="classOgre_1_1Quake3Level.html#Ogre_1_1Quake3Levelm16">mNumPlanes</a> &lt;&lt; std::endl;
00119         <a class="code" href="namespaceOgre.html#a348">of</a> &lt;&lt; <font class="stringliteral">"Shaders      : "</font> &lt;&lt; <a class="code" href="classOgre_1_1Quake3Level.html#Ogre_1_1Quake3Levelm22">mNumShaders</a> &lt;&lt; std::endl;
00120         <a class="code" href="namespaceOgre.html#a348">of</a> &lt;&lt; <font class="stringliteral">"Vertices     : "</font> &lt;&lt; <a class="code" href="classOgre_1_1Quake3Level.html#Ogre_1_1Quake3Levelm20">mNumVertices</a> &lt;&lt; std::endl;
00121         <a class="code" href="namespaceOgre.html#a348">of</a> &lt;&lt; <font class="stringliteral">"Vis Clusters : "</font> &lt;&lt; <a class="code" href="classOgre_1_1Quake3Level.html#Ogre_1_1Quake3Levelm25">mVis</a>-&gt;<a class="code" href="structbsp__vis__t.html#bsp__vis__tm0">cluster_count</a> &lt;&lt; std::endl;
00122 
00123         <a class="code" href="namespaceOgre.html#a348">of</a> &lt;&lt; std::endl;
00124         <a class="code" href="namespaceOgre.html#a348">of</a> &lt;&lt; <font class="stringliteral">"-= Shaders =-"</font>;
00125         <a class="code" href="namespaceOgre.html#a348">of</a> &lt;&lt; std::endl;
00126         <font class="keywordflow">for</font> (<font class="keywordtype">int</font> i = 0; i &lt; <a class="code" href="classOgre_1_1Quake3Level.html#Ogre_1_1Quake3Levelm22">mNumShaders</a>; ++i)
00127         {
00128             <a class="code" href="namespaceOgre.html#a348">of</a> &lt;&lt; <font class="stringliteral">"Shader "</font> &lt;&lt; i &lt;&lt; <font class="stringliteral">": "</font> &lt;&lt; <a class="code" href="classOgre_1_1Quake3Level.html#Ogre_1_1Quake3Levelm21">mShaders</a>[i].<a class="code" href="structbsp__shader__t.html#bsp__shader__tm0">name</a> &lt;&lt; std::endl;
00129         }
00130 
00131         <a class="code" href="namespaceOgre.html#a348">of</a> &lt;&lt; std::endl;
00132         <a class="code" href="namespaceOgre.html#a348">of</a> &lt;&lt; <font class="stringliteral">"-= Entities =-"</font>;
00133         <a class="code" href="namespaceOgre.html#a348">of</a> &lt;&lt; std::endl;
00134         <font class="keywordtype">char</font>* strEnt = strtok((<font class="keywordtype">char</font>*)<a class="code" href="classOgre_1_1Quake3Level.html#Ogre_1_1Quake3Levelm5">mEntities</a>, <font class="stringliteral">"\0"</font>);
00135         <font class="keywordflow">while</font> (strEnt != 0)
00136         {
00137             <a class="code" href="namespaceOgre.html#a348">of</a> &lt;&lt; strEnt &lt;&lt; std::endl;
00138             strEnt = strtok(0, <font class="stringliteral">"\0"</font>);
00139         }
00140 
00141 
00142 
00143 
00144         <a class="code" href="namespaceOgre.html#a348">of</a>.close();
00145     }
00146 
<a name="l00147"></a><a class="code" href="classOgre_1_1Quake3Level.html#Ogre_1_1Quake3Levela2">00147</a>     <font class="keywordtype">void</font> Quake3Level::extractLightmaps(<font class="keywordtype">void</font>)<font class="keyword"> const</font>
00148 <font class="keyword">    </font>{
00149         <font class="comment">// Lightmaps are always 128x128x24 (RGB)</font>
00150         <font class="keywordtype">unsigned</font> <font class="keywordtype">char</font>* pLightmap = <a class="code" href="classOgre_1_1Quake3Level.html#Ogre_1_1Quake3Levelm23">mLightmaps</a>;
00151         <font class="keywordflow">for</font> (<font class="keywordtype">int</font> i = 0; i &lt; <a class="code" href="classOgre_1_1Quake3Level.html#Ogre_1_1Quake3Levelm24">mNumLightmaps</a>; ++i)
00152         {
00153             <font class="keywordtype">char</font> name[32];
00154             sprintf(name, <font class="stringliteral">"@lightmap%d"</font>, i);
00155 
00156             <font class="comment">// Load, no mipmaps, brighten by factor 2.5</font>
00157             <a class="code" href="classOgre_1_1Image.html">Image</a> img; img.<a class="code" href="classOgre_1_1Image.html#Ogre_1_1Imagea6">loadRawData</a>( <a class="code" href="classOgre_1_1DataChunk.html">DataChunk</a>( pLightmap, 128 * 128 * 3 ), 128, 128, Image::FMT_RGB );
00158             TextureManager::getSingleton().loadImage( name, img, 0, 3.0f );
00159             pLightmap += <a class="code" href="OgreQuake3Types_8h.html#a19">BSP_LIGHTMAP_BANKSIZE</a>;
00160         }
00161 
00162 
00163     }
00164 
00165 
00166 }
</pre></div><p>
Copyright &copy; 2002 by The OGRE Team<br />
<script type="text/javascript">
<!--//hide script from old browsers
document.write( "Last modified "+ document.lastModified );
//end hiding contents -->
</script>
</p>
</body>
</html>
