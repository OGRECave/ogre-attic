<html>
<head>
<title>Tutorial: Material Scripts</title> <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"><STYLE TYPE="text/css">
<!--
.MainHeader {  font-weight: bold; color: #FFFF33; background-color: #006600; font-size: 10pt}
body {  font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 10pt; color: #CCFFCC; background-color: #003300}
.BorderHeader {  background-color: #999900; font-size: 8pt; font-weight: bold; color: #333300; text-align: center}
.MainContent { font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 10pt; color: #CCFFCC }
.BorderContent {  font-size: 8pt; color: #66CC33; border-color: black #666600 #666600; padding-top: 2px; padding-right: 2px; padding-bottom: 10px; padding-left: 2px; margin-bottom: 2px; border-style: solid; border-top-width: 0px; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px}
a:link {  color: #FFFF00; text-decoration: underline}
a:hover {  color: #FFFFFF; text-decoration: underline}
a:visited {  color: #FFCC66; text-decoration: underline}
li {  color: #66CC33; list-style-type: circle; position: relative; left: -15px; clip:    rect(   )}
.NewsDate {  color: #CCFFCC; font-weight: bold}
td {  font-size: 10pt}
th {  font-size: 10pt}
.Annotation {  font-size: 10px}

H1 { text-align: center; }
A.qindex {}
A.qindexRef {}
A.el { text-decoration: none; font-weight: bold }
A.elRef { font-weight: bold }
A.code { text-decoration: none; font-weight: normal; color: #4444ee }
A.codeRef { font-weight: normal; color: #4444ee }
DL.el { margin-left: -1cm }
DIV.fragment { width: 100%; border: none; background-color: #003300 }
DIV.ah { background-color: black; margin-bottom: 3; margin-top: 3 }
TD.md { background-color: #006600 }
DIV.groupHeader { margin-left: 16; margin-top: 12; margin-bottom: 6; font-weight: bold }
DIV.groupText { margin-left: 16; font-style: italic; font-size: smaller }
FONT.keyword       { color: #008000 }
FONT.keywordtype   { color: #999920 }
FONT.keywordflow   { color: #e0FF00 }
FONT.comment       { color: #009900 }
FONT.preprocessor  { color: #809020 }
FONT.stringliteral { color: #002080 }
FONT.charliteral   { color: #008080 }

H3 {
    FONT-FAMILY: trebuchet ms,helvetica,arial
}

.ex {
    FONT-SIZE: 8pt; FONT-FAMILY: tahoma
}
CODE.keywordtype {
    COLOR: #00ccff
}
CODE.keyword {
    FONT-WEIGHT: bold; COLOR: #00ccff
}
CODE.fn {
    COLOR: white;
    FONT-WEIGHT: bold;
}
CODE.var {
    COLOR: #dcdcdc;
}
CODE.macro {
    COLOR: #809020;
    FONT-WEIGHT: bold;
}
CODE.comm {
    COLOR: lime
}
CODE.num {
    COLOR: purple
}
CODE.str {
    COLOR: #ffcc33;
    font-style: italic
}
.SectionHeader {  font-size: 14px; color: #FFFFCC; font-weight: bold}
.header {  font-size: 16px; font-weight: bold; color: #FFFFCC}
-->
</STYLE> 
</head>

<body bgcolor="#FFFFFF" text="#000000">
<p align="center" class="header">OGRE (Object-Oriented Graphics Rendering Engine)</p><p align="center" class="header">Material 
Scripts</p><p align="left" class="MainHeader">&nbsp;</p><P ALIGN="LEFT" CLASS="SectionHeader">Material 
scripts</P><P ALIGN="LEFT">Material scripts offer you the ability to define complex 
materials in a script which can be reused easily. Whilst you could set up all 
materials for a scene in code using the methods of the Material and TextureLayer 
classes, in practice it's a bit unwieldy. Instead you can store material definitions 
in text files which can then be loaded whenever required.</P><P ALIGN="LEFT">You 
can also use this facility to replace existing material definitions which get 
loaded in from resource files. For example, if you have a .3ds model which you 
converted using 3ds2oof, it contains a number of material definitions. You can 
replace any of the material definitions from the .3ds file with your own just 
by adding a material definition with the same name to a script (remember you can 
also rename materials in a .3ds file with the 3ds2oof utility with the -matnames 
option), which will override the one loaded from the .3ds file.</P><P ALIGN="LEFT" CLASS="SectionHeader">Loading 
scripts</P><P ALIGN="LEFT">Material scripts are loaded at initialisation time 
by the system: by default it looks in all common resource locations (see Root::addResourceLocation) 
for files with the '.material' extension and parses them. If you want to parse 
files with a different extension, use the MaterialManager::getSingleton().parseAllSources 
method with your own extension, or if you want to parse an individual file, use 
MaterialManager::getSingleton().parseScript.</P><P ALIGN="LEFT">It's important 
to realise that materials are not loaded completely by this parsing process: only 
the <I>definition</I> is loaded, no textures or other resources are loaded. This 
is because it is common to have a large library of materials, but only use a relatively 
small subset of them in any one scene. To load every material completely in every 
script would therefore cause unnecessary memory overhead. You can access a 'deferred 
load' Material in the normal way (getMaterial() from SceneManager, or MaterialManager::getSingleton().getByName()), 
but you must call the 'load' method before trying to usde it. Ogre does this for 
you when using the normal material assignment methods of entities etc.</P><P ALIGN="LEFT">Another 
important factor is that material names must be unique throughout ALL scripts 
loaded by the system, since materials are always identified by name. </P><P ALIGN="LEFT" CLASS="SectionHeader">Format</P><P ALIGN="LEFT">Several 
materials may be defined in a single script. The script format is pseudo-C++, 
with sections delimited by curly braces ({}), and comments indicated by starting 
a line with '//' (note, no nested form comments allowed). The general format is 
shown below in a typical example:</P><HR><P>// This is a comment<BR>walls/funkywall1<BR>{<BR>&nbsp;&nbsp;&nbsp;&nbsp;ambient 
0.5 0.5 0.5<BR>&nbsp;&nbsp;&nbsp;&nbsp;diffuse 1.0 1.0 1.0<BR>&nbsp;&nbsp;&nbsp;&nbsp;{ 
<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// Texture layer 1 <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;texture 
wibbly.jpg<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;scroll_anim 0.1 
0.0 <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;wave_xform scale sine 
0.0 0.7 0.0 1.0<BR>&nbsp;&nbsp;&nbsp;&nbsp;} </P><P>&nbsp;&nbsp;&nbsp;&nbsp;{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// 
Texture Layer 2<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;texture wobbly.png<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rotate_anim 
0.25<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;colour_op add<BR>&nbsp;&nbsp;&nbsp;&nbsp;}<BR>} 
</P><HR><P ALIGN="LEFT">Every material in the script must be given a name, which 
is the line before the first opening '{'. This name must be globally unique. It 
can include path characters (as in the example) to logically divide up your materials, 
and also to avoid duplicate names, but the engine does not treat the name a hierarchical, 
just as a string.</P><P ALIGN="LEFT">A material can have top-level attributes 
set using the scripting commands available, such as 'ambient' to set the amount 
&amp; colour of the ambient light reflected by the material. Texture layers are 
added by nesting braces within the material definition, and attributes defined 
within these braces apply to the texture layer only. The order of the texture 
layers is important; subsequent texture layers are applied on top of existing 
ones in the script.</P><P ALIGN="LEFT">For a detailed description of the material 
and layer attributes, see the list below:</P><P ALIGN="LEFT" CLASS="SectionHeader">Material 
Attributes </P><UL><LI><A HREF="MaterialScriptAttributes.html#ambient">ambient</A></LI><LI><A HREF="MaterialScriptAttributes.html#diffuse">diffuse</A></LI><LI><A HREF="MaterialScriptAttributes.html#specular">specular</A></LI><LI><A HREF="MaterialScriptAttributes.html#emissive">emissive</A></LI><LI><A HREF="MaterialScriptAttributes.html#scene_blend">scene_blend</A></LI><LI><A HREF="MaterialScriptAttributes.html#depth_check">depth_check</A></LI><LI><A HREF="MaterialScriptAttributes.html#depth_write">depth_write</A></LI><LI><A HREF="MaterialScriptAttributes.html#depth_func">depth_func</A></LI><LI><A HREF="MaterialScriptAttributes.html#depth_bias">depth_bias</A></LI><LI><A HREF="MaterialScriptAttributes.html#cull_hardware">cull_hardware</A></LI><LI><A HREF="MaterialScriptAttributes.html#cull_software">cull_software</A></LI><LI><A HREF="MaterialScriptAttributes.html#lighting">lighting</A></LI><LI><A HREF="MaterialScriptAttributes.html#shading">shading</A></LI><LI><A HREF="MaterialScriptAttributes.html#filtering">filtering</A></LI><LI></LI></UL><P CLASS="SectionHeader">Texture 
Layer Attributes</P><UL><LI><A HREF="MaterialScriptAttributes.html#texture">texture</A></LI><LI><A HREF="MaterialScriptAttributes.html#anim_texture">anim_texture</A></LI><LI><A HREF="MaterialScriptAttributes.html#cubic_texture">cubic_texture</A></LI><LI><A HREF="MaterialScriptAttributes.html#tex_coord_set">tex_coord_set</A></LI><LI><A HREF="MaterialScriptAttributes.html#tex_address_mode">tex_address_mode</A></LI><LI><A HREF="MaterialScriptAttributes.html#colour_op">colour_op</A></LI><LI><A HREF="MaterialScriptAttributes.html#alpha_rejection">alpha_rejection</A></LI><LI><A HREF="MaterialScriptAttributes.html#colour_op_ex">colour_op_ex</A></LI><LI><A HREF="MaterialScriptAttributes.html#colour_op_multipass_fallback">colour_op_multipass_fallback</A></LI><LI><A HREF="MaterialScriptAttributes.html#alpha_op_ex">alpha_op_ex</A></LI><LI><A HREF="MaterialScriptAttributes.html#env_map">env_map</A></LI><LI><A HREF="MaterialScriptAttributes.html#scroll">scroll</A></LI><LI><A HREF="MaterialScriptAttributes.html#scroll_anim">scroll_anim</A></LI><LI><A HREF="MaterialScriptAttributes.html#rotate">rotate</A></LI><LI><A HREF="MaterialScriptAttributes.html#rotate_anim">rotate_anim</A></LI><LI><A HREF="MaterialScriptAttributes.html#scale">scale</A></LI><LI><A HREF="MaterialScriptAttributes.html#wave_xform">wave_xform</A></LI></UL><TABLE WIDTH="100%" BORDER="0" CELLSPACING="2" CELLPADDING="0"><TR><TD WIDTH="14%"><A HREF="../index.html">Back 
to Index</A></TD><TD WIDTH="39%">&nbsp;</TD><TD WIDTH="22%"><A HREF="material.html">&lt;&lt; 
Previous section</A></TD><TD WIDTH="25%"><A HREF="MaterialScriptAttributes.html">Next 
section &gt;&gt;</A></TD></TR></TABLE><P>&nbsp;</P><P>&nbsp;</P><P>&nbsp;</P><P CLASS="SectionHeader">&nbsp;</P>
</body>
</html>
