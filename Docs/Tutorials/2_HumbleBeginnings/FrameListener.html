<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <style type="text/css">
	<!--
	.MainHeader {  font-weight: bold; color: #FFFFFF; background-color: #003300; font-size: 10pt}
	body {  font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 10pt; color: #003300; background-color: #FFFFFF}
	.BorderHeader {  background-color: #999900; font-size: 8pt; font-weight: bold; color: #333300; text-align: center}
	.MainContent { font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 10pt; color: #003300}
	.BorderContent {  font-size: 8pt; color: #000000; border-color: black #666600 #666600; padding-top: 2px; padding-right: 2px; padding-bottom: 10px; padding-left: 2px; margin-bottom: 2px; border-style: solid; border-top-width: 0px; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px}
	a:link {  color: #000066; text-decoration: underline}
	a:hover {  color: #0000FF; text-decoration: underline}
	a:visited {  color: #660066; text-decoration: underline}
	li {  color: #000000; list-style-type: circle; position: relative; left: -15px; clip:    rect(   )}
	.NewsDate {  color: #000000; font-weight: bold}
	td {  font-size: 10pt}
	th {  font-size: 10pt}
	.Annotation {  font-size: 10px}
	.header {  font-size: 16pt; color: #000000}
	.SectionHeader {  font-size: 14px; color: #000000; font-weight: bold}
	pre {  color: #000066; font-size: 12px}

	-->
	</style>
  <title>Creating OGRE Project Files</title>
  <meta name="generator" content="Deppo's HTML Editor v2.1 BETA 2">
  <meta name="keywords" content="">
  <meta name="description" content="">
  <meta name="author" content="Nicholas">
  <meta http-equiv="reply-to" content="vastrim@hotmail.com">
  <meta name="creation_date" content="Sat, 13 Jul, 2002 12:32:59 p GMT">
</head>
<body bgcolor="#ffffff" text="#000000">
<p align="center" class="header">OGRE (Object-Oriented Graphics
Rendering Engine)</p>
<p align="center" class="header"> Our First Frame Listener </p>
<p align="left" class="MainHeader">&nbsp;</p>
<p align="left" class="SectionHeader"> The Frame Listener Class</p>
<p align="left">
A Frame Listener in Ogre is notified by the system at the start of
every frame. The main method of interest to us is
the frameStarted method. For the Frame Listener that we are creating we
will give it a pointer to the Scene Node that the ship entity is
attached to. This will allow us to move that Scene Node and therefore
the ship as well.
</p>
<pre>
class SpaceFrameListener : public ExampleFrameListener
{
protected:
	SceneNode* mShipNode;

public:
    SpaceFrameListener(RenderWindow* win, Camera* cam, SceneNode* shipNode) : ExampleFrameListener(win, cam)
    {
		mShipNode = shipNode;
    };

    bool frameStarted(const FrameEvent&amp; evt);
};

</pre>
<p align="left">
In this example we want to move the ship on the screen based on
keypresses from the user. For now we will simply get
the ship to respond to the arrow keys and move accordingly (up, down,
left, right). </p>
<p></p>
<p align="left">The first thing we do in this method is determine how
much the ship can move in this frame. To do this we simply multiply how
many units per second we want the ship to move with the value of
evt.timeSinceLastFrame (measured in
fractions of a second). We will also want to know which keys, if any,
are being pressed. To do this we call mInputDevice-&gt;capture() which
takes a copy of the state of the input devices which we then query by
using mInputDevice-&gt;isKeyDown().
</p>
<p align="left">
Once we have determined what, if any, movement is to take place we use
the translate method of the Scene Node.
</p>
<pre>    bool frameStarted(const FrameEvent&amp; evt)<br>    {<br>		Real MoveFactor = 80.0 * evt.timeSinceLastFrame;<br><br>		mInputDevice-&gt;capture();<br><br>		if(mInputDevice-&gt;isKeyDown(Ogre::KC_UP))<br>		  mShipNode-&gt;translate(0.0, MoveFactor, 0.0);<br><br>		if(mInputDevice-&gt;isKeyDown(Ogre::KC_DOWN))<br>		  mShipNode-&gt;translate(0.0, -MoveFactor, 0.0);<br><br>		if(mInputDevice-&gt;isKeyDown(Ogre::KC_LEFT))<br>		  mShipNode-&gt;translate(-MoveFactor, 0.0, 0.0);<br><br>		if(mInputDevice-&gt;isKeyDown(Ogre::KC_RIGHT))<br>		  mShipNode-&gt;translate(MoveFactor, 0.0, 0.0);		<br>		<br>		if(mInputDevice-&gt;isKeyDown(Ogre::KC_ESCAPE))<br>		  return false;</pre>
<pre>		return true;<br>    }<br><br><br></pre>
<p></p>
<p align="left" class="SectionHeader"> Connecting the Frame Listener
Class</p>
<p align="left">
All that remains now is to arrange for this Frame Listener class to be
created and used by the application. The easy
way to do this is to override the createFrameListener() method of the
SpaceApplication class. The inherited version
of createFrameListener creates an instance of ExampleFrameListener
which implements the motion that we have seen in the examples that come
with Ogre. By overriding this method and supplying our own class we
will not get that behaviour any more, but we can then instead dictate
our own.
</p>
<pre>    void createFrameListener(void)<br>    {<br>        mFrameListener= new SpaceFrameListener(mWindow, mCamera, mShipNode);<br>        mRoot-&gt;addFrameListener(mFrameListener);<br>    }<br></pre>
<p></p>
<p align="left">
Compile and run the program. The camera will remain in a fixed position
but the ship will move up, down, left, and right as you press the arrow
keys. It wasn't very hard was it? Here ends this tutorial, the next one
we will have a bit more fun with moving and cameras.
</p>
<table width="100%" border="0" cellspacing="2" cellpadding="0">
  <tbody>
    <tr>
      <td width="14%"><a href="Index.html">Back to Index</a></td>
      <td width="39%">&nbsp;</td>
      <td width="22%"><a href="FirstSceneNodeAndEntity.html">&lt;&lt;
Previous section</a></td>
      <td width="25%">Next section &gt;&gt;</td>
    </tr>
  </tbody>
</table>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p class="SectionHeader">&nbsp;</p>
</body>
</html>
